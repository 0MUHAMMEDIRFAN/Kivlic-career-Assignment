/*! For license information please see main.9c252852.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ae(e,t){return e(t)}function Ce(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==_e||null!==Ie)&&(Ce(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,Et,St=!1,Tt=[],At=null,Ct=null,Nt=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){St=!1,null!==At&&Ut(At)&&(At=null),null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),Rt.forEach(jt),Dt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var zt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Wt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Mt(At,e,t,n,r,i),!0;case"dragenter":return Ct=Mt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return In}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),An=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Gn(t,Hn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Ar=Er("animationstart"),Cr=Er("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Ar,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Sr:case Tr:case Ar:s=yn;break;case Cr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Xn;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,qn=!0)),0<(y=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),$t=Zt=Jt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=De(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ai=Ii(Ti),Ci=Ii(!1),Ni=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ci),Ei(Ai)}function Oi(e,t,n){if(Ai.current!==Ti)throw Error(a(168));Si(Ai,t),Si(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ai.current,Si(Ai,e),Si(Ci,Ci.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ci),Ei(Ai),Si(Ai,e)):Ei(Ci),Si(Ci,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He($e,qi),i}finally{kt=t,Vi=!1}}return null}var zi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){zi[Ki++]=Wi,zi[Ki++]=Gi,Gi=e,Wi=t}function $i(e,t,n){Hi[Qi++]=Xi,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===Gi;)Gi=zi[--Ki],zi[Ki]=null,Wi=zi[--Ki],zi[Ki]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Aa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Di(t)?Ni:Ai.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Di(t)?Ni:Ai.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Zi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Zi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Zi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Zi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),Ja=Ya(!1),Za={},$a=Ii(Za),eo=Ii(Za),to=Ii(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si($a,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei($a),Si($a,t)}function io(){Ei($a),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no($a.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si($a,n))}function oo(e){eo.current===e&&(Ei($a),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Ao(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Cs)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Ca(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function zo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return qo(2048,8,e,t)}function Go(e,t){return qo(4,2,e,t)}function Wo(e,t){return qo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function $o(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Aa(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Aa(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=$o.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Cs)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Cs.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Xo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:Co,useRef:Vo,useState:function(){return Co(Ao)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(To(),mo.memoizedState,e)},useTransition:function(){return[Co(Ao)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Xo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Ao)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Zo(t,mo.memoizedState,e)},useTransition:function(){return[No(Ao)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Xa(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ps,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ps,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ps,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ps,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Ni:Ai.current;return a=Ri(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Au(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ri(t,c=Di(n)?Ni:Ai.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ci.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ri(t,s=Di(n)?Ni:Ai.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ci.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||qa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cu(e,t,n,r,a,i)}function Cu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Pu,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Cs)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),nc(r,e,i,-1))}return vc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Xi,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Di(t.type)&&Pi(),Wu(t),null;case 3:return r=t.stateNode,io(),Ei(Ci),Ei(Ai),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no($a.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":X(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":W(r),$(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ci),Ei(Ai),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function $u(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||$u(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Xu&&($u(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,hs(e,t,n),Xu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&$u(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&$u(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Je())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,vs(t,e),Xu=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:$u(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:$u(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Zu=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Zu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,ks(a,t,n),a=a.sibling;Zu=i,Yu=u,Xu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function ws(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var _s,Is=Math.ceil,Es=b.ReactCurrentDispatcher,Ss=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,As=0,Cs=null,Ns=null,Rs=0,Ds=0,Ps=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,Us=0,js=null,Vs=null,Bs=0,qs=1/0,zs=null,Ks=!1,Gs=null,Ws=null,Hs=!1,Qs=null,Ys=0,Xs=0,Js=null,Zs=-1,$s=0;function ec(){return 0!==(6&As)?Je():-1!==Zs?Zs:Zs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===$s&&($s=vt()),$s):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Cs||(e===Cs&&(0===(2&As)&&(Fs|=n),4===Os&&uc(e,Rs)),rc(e,r),1===n&&0===As&&0===(1&t.mode)&&(qs=Je()+500,ji&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Cs?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&As)&&qi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zs=-1,$s=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cs?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=As;As|=2;var o=pc();for(Cs===e&&Rs===t||(zs=null,qs=Je()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Es.current=o,As=i,null!==Ns?t=0:(Cs=null,Rs=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vs,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vs,zs),t);break}wc(e,Vs,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vs,zs),r);break}wc(e,Vs,zs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&As))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vs,zs),rc(e,Je()),null}function cc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(qs=Je()+500,ji&&qi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&As)&&xc();var t=As;As|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(As=t))&&qi()}}function fc(){Ds=Ps.current,Ei(Ps)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Ci),Ei(Ai),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Cs=e,Ns=e=Pc(e.current,null),Rs=Ds=t,Os=0,Ls=null,Us=Fs=Ms=0,Vs=js=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ss.current=null,null===n||null===n.return){Os=1,Ls=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Cs||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Cs,Rs)}function mc(e,t){var n=As;As|=2;var r=pc();for(Cs===e&&Rs===t||(zs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),As=n,Es.current=r,null!==Ns)throw Error(a(261));return Cs=null,Rs=0,Os}function yc(){for(;null!==Ns;)kc(Ns)}function gc(){for(;null!==Ns&&!Ye();)kc(Ns)}function kc(e){var t=_s(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?bc(e):Ns=t,Ss.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Ds)))return void(Ns=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Os=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Os&&(Os=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Cs&&(Ns=Cs=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Cc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=As;As|=4,Ss.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Xe(),As=s,kt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Qs=e,Ys=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,qi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(as(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cs===e&&(Rs&n)===n&&(4===Os||3===Os&&(130023424&Rs)===Rs&&500>Je()-Bs?hc(e,0):Us|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ca(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Cc(e,t){return He(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case C:return(e=Rc(13,n,t,i)).elementType=C,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case A:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Pa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&$i(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Ri(t,Ai.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Cu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Au(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ci.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),zu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),za(t,r,i),Ga(t,r,i,n),Cu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&As)&&(qs=Je()+500,qi()))}break;case 13:lc((function(){var t=Ca(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ca(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ce=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+A(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+A(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+A(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,S=-1,T=5,A=-1;function C(){return!(t.unstable_now()-A<T)}function N(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=N,_=function(){D.postMessage(null)}}else _=function(){y(N,0)};function P(e){E=e,I||(I=!0,_())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Kivlic-career-Assignment/",function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return bt},SDK_VERSION:function(){return Rn},_DEFAULT_ENTRY_NAME:function(){return gn},_addComponent:function(){return xn},_addOrOverwriteComponent:function(){return _n},_apps:function(){return bn},_clearComponents:function(){return Tn},_components:function(){return wn},_getProvider:function(){return En},_registerComponent:function(){return In},_removeServiceInstance:function(){return Sn},deleteApp:function(){return Ln},getApp:function(){return Pn},getApps:function(){return On},initializeApp:function(){return Dn},onLog:function(){return Un},registerVersion:function(){return Fn},setLogLevel:function(){return jn}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||s(e,t)||c()}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||f(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function I(e){var t=w();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function E(e,t,n){return E=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},E.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return E(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},S(e)}function T(e){return o(e)||f(e)||s(e)||c()}function A(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var N,R="popstate";function D(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function P(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function M(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function F(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=t.Pop;var e=p(),n=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:n})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:L(e);return D(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(R,v),h=e,function(){u.removeEventListener(R,v),h=null}},createHref:function(e){return n(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=O(y.location,e,n);r&&r(i,e);var a=P(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(s){u.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;var i=O(y.location,e,n);r&&r(i,e);var a=P(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}function U(e,t,n){void 0===n&&(n="/");var r=H(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;var i=j(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=K(i[o],W(r));return a}function j(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(D(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=Z([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),j(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:z(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=A(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n=T(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=V(i.join("/")),s=[];return s.push.apply(s,h(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,h(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(N||(N={}));var B=/^:\w+$/,q=function(e){return"*"===e};function z(e,t){var n=e.split("/"),r=n.length;return n.some(q)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!q(e)})).reduce((function(e,t){return e+(B.test(t)?3:""===t?1:10)}),r)}function K(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=G({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:Z([i,l.pathname]),pathnameBase:$(Z([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=Z([i,l.pathnameBase]))}return a}function G(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Q("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Q(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function W(e){try{return decodeURI(e)}catch(t){return Q(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Q(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Y(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function X(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function J(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=M(e):(D(!(i=C({},e)).pathname||!i.pathname.includes("?"),Y("?","pathname","search",i)),D(!i.pathname||!i.pathname.includes("#"),Y("#","pathname","hash",i)),D(!i.search||!i.search.includes("#"),Y("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?M(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ee(a),hash:te(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var Z=function(e){return e.join("/").replace(/\/\/+/g,"/")},$=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ee=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},te=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ne=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(S(Error));function re(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ie=["post","put","patch","delete"],ae=(new Set(ie),["get"].concat(ie));new Set(ae),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe.apply(this,arguments)}var ue="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},se=r.useState,ce=r.useEffect,le=r.useLayoutEffect,fe=r.useDebugValue;function he(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!ue(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext(null);var me=r.createContext(null);var ye=r.createContext(null);var ge=r.createContext({outlet:null,matches:[]});var ke=r.createContext(null);function be(){return null!=r.useContext(ye)}function we(){return be()||D(!1),r.useContext(ye).location}function xe(){be()||D(!1);var e=r.useContext(me),t=e.basename,n=e.navigator,i=r.useContext(ge).matches,a=we().pathname,o=JSON.stringify(X(i).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);r.useEffect((function(){u.current=!0}));var s=r.useCallback((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=J(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:Z([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return s}function _e(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(ge).matches,a=we().pathname,o=JSON.stringify(X(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return J(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function Ie(){var e=function(){var e,t=r.useContext(ke),n=Ne(Se.UseRouteError),i=Re(Se.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=re(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Ee,Se,Te=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(ge.Provider,{value:this.props.routeContext},r.createElement(ke.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function Ae(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(de);return a&&a.static&&a.staticContext&&n.route.errorElement&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ge.Provider,{value:t},i)}function Ce(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||D(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=n?o.route.errorElement||r.createElement(Ie,null):null,l=t.concat(i.slice(0,u+1)),f=function(){return r.createElement(Ae,{match:o,routeContext:{outlet:e,matches:l}},s?c:void 0!==o.route.element?o.route.element:e)};return n&&(o.route.errorElement||0===u)?r.createElement(Te,{location:n.location,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function Ne(e){var t=r.useContext(pe);return t||D(!1),t}function Re(e){var t=function(e){var t=r.useContext(ge);return t||D(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||D(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Ee||(Ee={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Se||(Se={}));var De;function Pe(e){D(!1)}function Oe(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;be()&&D(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=M(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,x=v.state,_=void 0===x?null:x,I=v.key,E=void 0===I?"default":I,S=r.useMemo((function(){var e=H(y,d);return null==e?null:{pathname:e,search:k,hash:w,state:_,key:E}}),[d,y,k,w,_,E]);return null==S?null:r.createElement(me.Provider,{value:p},r.createElement(ye.Provider,{children:o,value:{location:S,navigationType:c}}))}function Le(e){var n=e.children,i=e.location,a=r.useContext(de);return function(e,n){be()||D(!1);var i,a=r.useContext(me).navigator,o=r.useContext(pe),u=r.useContext(ge).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,we());if(n){var h,d="string"===typeof n?M(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||D(!1),i=d}else i=f;var p=i.pathname||"/",v=U(e,{pathname:"/"===l?p:p.slice(l.length)||"/"}),m=Ce(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Z([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:Z([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,o||void 0);return n&&m?r.createElement(ye.Provider,{value:{location:oe({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},m):m}(a&&!n?a.router.routes:Fe(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(De||(De={}));var Me=new Promise((function(){}));r.Component;function Fe(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e))if(e.type!==r.Fragment){e.type!==Pe&&D(!1),e.props.index&&e.props.children&&D(!1);var a=[].concat(h(t),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=Fe(e.props.children,a)),n.push(o)}else n.push.apply(n,Fe(e.props.children,t))})),n}function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ue.apply(this,arguments)}function je(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Ve=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Be(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),F((function(e,t){var n=e.location;return O("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:L(t)}),null,t)));var u=o.current,s=l(r.useState({action:u.action,location:u.location}),2),c=s[0],f=s[1];return r.useLayoutEffect((function(){return u.listen(f)}),[u]),r.createElement(Oe,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:u})}var qe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ze=r.forwardRef((function(e,t){var n,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=je(e,Ve),d=!1;if(qe&&"string"===typeof l&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(l)){n=l;var p=new URL(window.location.href),v=l.startsWith("//")?new URL(p.protocol+l):new URL(l);v.origin===p.origin?l=v.pathname+v.search+v.hash:d=!0}var m=function(e,t){var n=(void 0===t?{}:t).relative;be()||D(!1);var i=r.useContext(me),a=i.basename,o=i.navigator,u=_e(e,{relative:n}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:Z([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),y=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=n.preventScrollReset,s=n.relative,c=xe(),l=we(),f=_e(e,{relative:s});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:L(l)===L(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return r.createElement("a",Ue({},h,{href:n||m,onClick:d||o?i:function(e){i&&i(e),e.defaultPrevented||y(e)},ref:t,target:c}))}));var Ke,Ge;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ke||(Ke={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ge||(Ge={}));var We=n.p+"static/media/VACANT.ba69c662e46518bc8122.png",He=n(184);var Qe=function(){return(0,He.jsxs)("div",{className:"banner",children:[(0,He.jsx)("div",{className:"padding"}),(0,He.jsxs)("div",{className:"contents",children:[(0,He.jsxs)("div",{className:"left",children:[(0,He.jsx)("p",{className:"careers",children:"Careers"}),(0,He.jsx)("div",{className:"note",children:(0,He.jsxs)("p",{children:["Submit Your Resume ",(0,He.jsx)("span",{children:"Become discoverable for all of our roles"})]})})]}),(0,He.jsx)("div",{className:"right",children:(0,He.jsx)("img",{src:We,alt:""})})]})]})};var Ye=function(){return(0,He.jsxs)("div",{className:"copyRight",children:[(0,He.jsx)("p",{children:"\xa92021 Kivlik. All rights reserved."}),(0,He.jsx)("p",{children:"Privacy | Terms | Security | Sitemap"})]})};var Xe=function(){return(0,He.jsxs)("div",{className:"footer",children:[(0,He.jsxs)("div",{className:"about",children:[(0,He.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPEAAAAtCAMAAABI6X1vAAAAAXNSR0IB2cksfwAAAIRQTFRFAAAAIEBKH0BMHz9JHz5OBFJTH0FKHj5LID9HIEBLID9JH0FNHz9KHjtCIEFKID9JHj9KGz9IHz9JGkBLHz9JHj5IHEBIHz9KH0FKHz9JHz9JHz9JHkFLHj9IHz9KIT9KHDxIHz9JHz9JID9KHz9JF0BGH0BKHz5KHz5KHz9JHT5LID9IEPU6dAAAACx0Uk5TAP9A/hAG/XcwiNFT8Cup6ts5nxX7YUPtneD3zTMfsFUlcsRr1wuDuX2/To/nG/DZAAADfklEQVR4nL3a6VajMBQAYAKU6Shqp0UUbDvdXOf9329YCiEhd/OY3B96Em9u+sUeQmmidF2p/TKi4qOqHifNzb+H7HJOdcfuPq/Xd1SV14/VqZy006bMe7wgZzdj81EVq+NmUmZdJQzDW29YqyaqlEjuso66vX9q2vXkxd837ezyildJ26ynv5OyddORH8jXasa+aieflHlOmslXlOE5S5LiHEV5a1ExntyBldI168xagq7Mwx+0Sgdu1kWXybsyt8J/cl20o950R7v8qiAM7bI0WWmkGOIreJLVt39FZgcu7sFNll1GKu5H/bY6EtzQg1UWc8QDuLInFYkHcHaxy4QQX8GtgRYP4HxybZCLB7CRFEw8gPMtQ+wCy8UjeHrhCiaegkmxEywWu8GhxAaYErvBUjEADiQ2wYQYAAvFEDiM2ALjYggsE4PgIGIbjIpBsEgMg0OIZ2BMPIDV/JZVIB734dX8ttu/eABnWzPbKR7Bj/O/8cUY2L94ACePVrZLjIH5YhTsXewCg2IUzBbjYN9iJxgS42CumAB7FrvBgJgAM8UU2K8YALvFFJgnJsFexRA4UlhAYJaYBv+oWBVmQGBUDII5Ygb4Z8XOmIOxbBjMEHPA/sUOMJI9v7e0RyFiFti/+MlhgLMxMiXmgQO8qx1kJBshE2ImOIDYQe77j7ERNxQZF3PBP7s7HUsjBsOM3Hdbe1lKkVExG+x1P95AZKeYJGNiPtjvPRdEdospMiIWgD3fVwNkQEyQYbEE7Puzk5sMiXEyKBaBvX8+dpJBMUqGxDKw/2cgLjIsxsiA+EsGDvCcy0FGxJo8+37ZLa5vZOAA4pGcjN8vY2JNfrHIbrESgkOINXkwoGKQjIn54CDiGRkXQ2RELACHEdtkQgyQYbEEHEhskSmxmwyKRWD8kZMRVbmwRkm+PzbIpFiTP2mxDCwQq2pjjRKdERjJ7xyxJtu7+EwsBEvEqrRGyc6BDORiyRGP5J016eR007fAIvGtNerNKkOc9bmSs120b3/nOzT7Sl7rjlN79Ex96Y7374Cjfc0G5/pdferOb50nZTiGjpw0hmXVJCNPLftIPxvw5MpVngqlnidzlJWqP6XgaPlScMFnfR6wbBfq/qDLbFmGzakBd4Ylcditj521hHfxzthUFktijd1xF/PC3MAO8cE4ELnYlowdbnE4ND//A9WIPHMqu5mRAAAAAElFTkSuQmCC",alt:""}),(0,He.jsxs)("p",{children:["KIVLIK is a mobile steam car wash company, which offers premium car wash and detailing services at your doorstep. Conveniently book a car wash with a few taps on your phone. ",(0,He.jsx)("br",{})," KIVLIK has several packages to meet your budget and requirements. Conveniently book a carwash with a few taps using the KIVLIK App or website. You can pick a time, location and package from the App or web. KIVLIK washes each vehicle using our Steam Cleaning system."]})]}),(0,He.jsxs)("div",{className:"company",children:[(0,He.jsx)("h3",{children:"COMPANY"}),(0,He.jsx)("p",{children:" Who We Are"}),(0,He.jsx)("p",{children:" Blog"}),(0,He.jsx)("p",{children:" Careers"}),(0,He.jsx)("p",{children:" Report Fraud"}),(0,He.jsx)("p",{children:" Contact"}),(0,He.jsx)("p",{children:" Investor Relations"})]}),(0,He.jsxs)("div",{className:"question",children:[(0,He.jsx)("p",{children:"Got Questions?"}),(0,He.jsx)("h3",{children:"Help Center"}),(0,He.jsxs)("div",{className:"social",children:[(0,He.jsx)("h3",{className:"followUs",children:"Follow Us"}),(0,He.jsxs)("div",{className:"icons",children:[(0,He.jsx)("i",{className:"bx bxl-facebook"}),(0,He.jsx)("i",{className:"bx bxl-instagram"}),(0,He.jsx)("i",{className:"bx bxl-twitter"}),(0,He.jsx)("i",{className:"bx bxl-youtube"})]})]}),(0,He.jsxs)("div",{className:"store",children:[(0,He.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAO8AAABSCAMAAACL+nMgAAAAAXNSR0IB2cksfwAAAgRQTFRFAAAA////WlpaB5C9AICFCpG9/P39AM3z+fr69/j4/v7++/v74OXm7vDxBo+84+fp6+7v9fb2PVli8PLy8vT0VGx0doqQcoaNnqywQl1mxs7RRF9nNVJb5urrL01WkpKSgZOZV292oa6z1tvdpLK13eLjZnyDTGVuvMXJMk9YwMnMb29vSWNrh5ie2+DiOFRejZ6jyNDTm6mulKSo6uztRWBobYKJM1BacIWLtcDDTmdveIuS6OzsLUtUzdTWsLu/j5+l2N7gIUFL0NfZw8vOan+GP1tkO1dgYWFhf5GXAI6jsr3BX3Z9WXB4ipugUWpxrbm9x8fHJUROZHqBXHN7zunxt8LFkqGmhJabytLUdIiPrLi8mKareYySAICs7Pb609nbaGho1OzzfI+V6urq4OLjubm5KUhRPajLoKCgbr3Xp7S4ucPGioqKYnmAqra6jJ2iabrWY7nWodTmoNPjhMjdTK/PZrrVGJfBptfoSa3Oz8/PLKHHXrfUZrrVKJ7FRKvNHJnC1tnawsLCarzXIpvDY2NjXFxcy8vLWbXT8vT1cnJylZWVxOPrhMbejMvgu+DtOKXLb77ZhISE7/j7P6jMwuPvq9npa2trp6enu7u7N6XJaLzWm5ubjo6Oenp6DpO+qLS4eMLbo6OjsLCw19fXtbW1FZbAfn5+Xl5eq6urTGVtYGXa6wAAAKx0Uk5TAP///wL//wH///////////////////////////////////////////////////////////////////////////////////////8H/////////////////////////wv//////////////8X///////+0//8kjuLa////////yP//////////////////LWJd//q6///6/zL/////vv///////////////////30UjlUAAArISURBVHic5ZyJVxrJFoeBMW13A49FdmiCCAgERFABUUREICiLC0FUTJw4RqNGzTomZjX7MmtmJsnMJLO9Wd57/+Sr6gbFSJMmhLj9zvEoRXV7v65bt5auKharSPV1X52/Mn9n7fdPDoJ+vTN/5fxXdfUsGtV98e339y9cPHGKfUB06sTFC/e///aLupK0lxauP/56t0388Pr6xvWFSzuJBy5fe3xit22rjU48vnZ54C3ckwt/X9xtu2qni38vnNyO+/n86d02qpY6Pf/5yW241w5MkCqtU9eKgAcW5g84LgCeXyjU4frLawfamSmdXrucb4kv3b6628Z8DF29fYkq3ps3dtuUj6MbN8kCfnH9gLa7b+v09ReQ9+cLFV53jPMXVhODaq0LP4MCHvjmh4ouOnv0OOdPpEYW1VY/fANC9Je3Krnks9fHORzOZ7WyqMa69SWLdf5eBResv4G4+5b33nkW60ol/eZz/+HsZ96rV+pZP1UQnc+Spcs511A7k2qqEz/Vs+58xzj7HxQup4dbQ5tqqe/u1LOOMM/+lMJ9JaqdRTXWkXrWvxhn5h+jeGfxGlpUW31SCe9ryp3PMOlsYHq1Wp3K0H3N7YmHdl5jkJcODIjAhXXPKBgbSq+KeMnifXOXUd9K1ObrCU5Kd0JR4vYrnSWuaeSXzC2xy0SC0SRjQ+lVKe8/P84y61pB23FjOoaCgrbJG0DpYHppqHsmZ07E1NIQ5MW7J9TNClDUKZAAmDoavSRvPh2lcoIETOG3eJvizSlbEgW5bTRewEQV8a4PD28wjcxkWfG96fYl5aQqbm9fjfMmtJNOW2ZIq+hPxCSAV2JvdK7YMkRXrscdkyyJh5xxkjefjlI5UfAAeGFTCy8tdebEPcbRQEhuR98Lls2A9+xRSgVHwwsJR4+Wfcokb8NEI08X5osMzUGzeuV/Pm+blBdQTvMn5IBX1SJ1cbvdM0+MbUqPXJhLEZJVyIvk0xuonLD2NHTJRYJlHWaN9HfORZWWdGm3r5oXh2MDSudIPgBbSIBJZYgp3i430SXH0EBH0JiWpw2JsE4U6GgB5kPeoG8F5PA2LXepwnIhyE/VX4RKlzdQOTd5R5OgEliHtEMtRsF7D1fK8p4tgqOQt30GKT/Sxi5oO3e82SxaFIcId1giSVrc48qoFd3kdQrdo8Jxm0sV0QtG5fwVRw9hIv2ZStdjpXhVoY62aiJ1Od6zb9GV0LFndEUsGptTqjtcGN6ui6oTQRw1R/Xt7hRRxItMJyLqWEN3WKOWpvmESSyleKl0CbrFK1kF8YrkdUoUFnVitha8DHA5nId0jTHOb2lpmZWQf0D/w0U8CdIuQPAnPBRp70ZEPIzNFbQYhWykG2QQIEi3kUdQjkql53Pi5M2MApQQgntg+JNq3LkMLyNcDuep8L3/926IlvffDxjh7rexEi3vLw8Z8jLqXe4Z0fG+Yli8L+kj9J4UHe9TZrjPH713T2d3RMd7jBnv+n4b+NPw/sHMnfdX3YWi4WXmzi/bP7q91YqGl5k7391nlZddJe8+nJWtGS9OBPTWSuf1cP74kF5h6Gyq2YRgzXixwehIuqkyY9CNsbRnpG8kElY0kV1kRBj8wOQ14yWyWofyt4qaKyQos9i8Md2MKeKZCsIE49iqoJI7vFu14kWcUtuEWFZRAOcrHI2DQoSNzrpsjjbQ1KGZiGkv8ZaZd5foo97BVLO1kplqo9fRRkX89l6LmwC8neI9xfspbfHhRm/UZZzSJKkngvVMNgmtev1gE8kj6Q/wiCW9PmPcNpBtikcVVAJ3undRyJZYJyy23gAk5grMBsWitRt+jROdZp5VPzkNKgtCbKVXw/uM2eD3mYTmtqi5I6WS/OZIT5Mfha3RbJtP64+6M/AKnkw9Zu/w+yNd/cUtOE+mdfcUuQwvNtc34pdawQOyzti0fkuzXQXyI6qUL+vTKnMYGxvX2bRaiy/J+IUWDe/sS0a8x+kmo9t7PfJ2pKcxqudSvP6OlLc1aXKklrgkWHNqqtce1yw7i24gCkS08bFJpyDfS21YcmvV2cVZNmZNaJbtY9m0ZnQcAbw+rU/W2taPoOMmmG5fFnubGFacKscLz/8qWYWREHBNLpvQ+d0CirfP0UuwucEpDUzgyfqUej4bHQ9rdEUzqzjhSs31eRJTuQDl9/n6i7fIPTLQQKFOkycmBLzN2lg7G0fYgqzGO42wuSG5OMlw1qFKXs6xN6X+kWgyKh0Hv4YcHZ0IyTtngnNsXJXUZoa8/ilY9bFOZeO2Fy4Sqz3ss4z0acJD3Vu8aEYpVbHJ/BGfCvKqB8mnqmq2meHtQe1JTFfHy3g6h3OuxNy3YEY7A2eSQ2mtroHk1fSi1BcOFwJ4I4tk5GkapSzfEsoz52KmyIjSxd/kbXBZ3GRkBPnFBhxg+pzUU9V05IaAJnvV6s7qePlMC7jUBBZX5fMvuxQKxWpqJBEiecUG8pv2VQjOk8FSBuJN5NOLhWPGxVG/DzRleV5hr3+KCow8maaNC3ilZMdNovePWDxQ2pES96mIl7FDczj/3VGF+S5/X0FkxNriTW7jnZUX2YltTDq5hQcmdbi4pXnRIl6tekpHaaynSt5HnzLl3fH2Gw+G5xpjpBldvjkYoISt0I2hwV2QA7RHpBvjTcvKwOZlDQqHvNCg87o0Y2iBl5/TeqlZ32BYrEc2eUWLmnCl3RFaXpxpAT/c0avEMpGOQTzPoIURC7RHU9Bi2MtcgsXk6YVtDrqklm6VCzYobl6i2mNkellsQAq84ItGMhuIS81W9iYvalZTHThEMJghquRlP2c4IbtzgrI76TcZqT8BoDbGB7wjtoAE9P+zDi/ZHo00WlHQi5pwZLeiHR70WuIBHsrGJSF7FL7+5y5F0kboBmFNlofA/BY5scWLGyc8E6CdQog2sWmjWt4/GTr0zkFDT8KRK/SbCPscaJkAr6dxbMUwFWk0k/2NEUc8t6L3OkbHiyoD1h+fi8hyClfvqMY3icGn5ROvmgn2k05fVGaYVHg1CXD5Ji8bM0s1Yf2kQadWKhiOG8u8P2JWwCWm7Awe2PhSQpeUYKgjbNXGvUqPRezuhNmBP4fdYotFPWXd1g/EVDEpGP/2+W2yQRigcF5WMyfNgBo8aBJrLRalPIOxi3jZDZlwBKRH44puZrjleDeYFHCpKTtzdnHTS3FCbx8Ugfa3NbhotxtaqKglE+uDimxy6O0XXzhf5bLrsmOdRH7cEHRRkRcNGuy61SEe2WobXYpCbUVbVpI6uyLEeJ603PvQYQbAzKbsNvsblAAvw+bygwvw0q5+5r47RDOcgN47vBfqWfTLgdffVcBMX4buHd5b9aw1+vWT7wK+y3DYuWd44frJcutjy/eyGL9OEVlXiyMxf5Bp9+9DC66PvVJuM8524F+Kpz1olzLsYcH1z+XXt2+59Jnh4Y1Hw5tB+8zw/sMl17e/Y//C+vDrBw+e3R0u4K0PD7/6B3zeh7TU/oVK96fsY5H7Uyrff7RvRe4/Yr24fgh2S0Ll95cdtv2Dh21/6GHZ/3unsP+XNXDz9sHf33375tYZDYds//6hO58Bnr+xdoDP37i69tb5G4fufBXq/Jwbh+f8HFb+fKR7B+t8pHu05yORxAPw/Kv7a78fOQj69T48/2qAlpbqfNTX1dXBn32vAfBTv+Owr/8DwRBt5jAuax4AAAAASUVORK5CYII=",alt:""}),(0,He.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAO8AAABRCAMAAAANbgGOAAAAAXNSR0IB2cksfwAAAbxQTFRFAAAA////B5C9IEBK9jRIAPB2AICFCpG9/84AAMb/wcrNAM7/AMn/YXd/9ff3ANH/n62x1tzeANr/MU9YAMv/6+7v/v7+ANT/+f7/Bo+8e46UQ15mI0JMANv/ANb//Pz7KUdRANj/AN7/LUtVgpOZfpGXT2hwAIya8PLzN1NcOVZfJEROztXXtb/Dh5idbIGHWXB4PqnL7Pb6d4uRAISp+Pn53+PlrLi8G5nBQFtko9XnVW11PVhhx8/Sbr3X6OvsSGJqJ0ZQ0dfZKZ/GM1Ba0OryhMjdc4eNoNPjZrrVXXR7TK/PucPGzejxMU5X1e30RWBoabrWTGVtk6Ona73YvcbJm6muXrfUSq7OIpvDZrrV5enqWrXTw8vO2d/g8/X17vDxRqzOqLW5l6ar4ubnYrnWi5yhLaHHZHuC8Pn7F5bAnqyw3OHj09rcaH2EorCzZrvWjMvgu+DtwuPvxOPrOKXLP6jMqNjoq9rohMnfN6XJa73YAfB3+F1tDpO+eMLbntPlkKGmCvF7Z7rY//ni/9EPOPOU/91N+nmGfPe5/+yb/LK5sfrVmfP/jOX//unrwPzd/9Qeb7/Z7P71DXeXrAAAAJR0Uk5TAP//////Av//////////////Af//////////////////////////B////////////////wv////////////F/////////47/JNr/4v//////tP//vf//////yP////////////////////////////9e//8t+vr/MmL///////////+1//////////////////+6/1Z2cHEAAAehSURBVHic5ZyJX9pIFMeTDlrMLi7Hku1CdmHLLYdYqoiCeFBrvep931q1rdr77m7bve/zH96ZSZAQMpEIJB/h9/kgJJOE92XevHkTJ0NRIlmbH02PdXTfe3epHvRNd8fY9KNmK0VQ89N/ny8/fD9xja4TXZt4/3D5+dzTZlnakb6htcd6m1h9PV4b6hspJQ4Mb69N6G1bbTSxtj0ckOBe77vXo7ddtVPPvb7rxbi3Om7rbVQtdbvj1vUi3KW6CVLyurYkAg70ddQ5LgTu6Mu3Yetwd107M6/b3cNCTzyy/UJvY7TQi+0RvnpXFvU2RRstruAKfjl0Q29LtNGNg5eId+6O3oZopTtzsIIDz57obYdWevIMhuhXQ3qboZ2GXlHUd2/0tkI7vZmmqLE6zpul6hmjqNek6Hy3CUpTc2quG6+tVPdd+bI/3yLeph+1tai2utttpS4TylpaeOCm/zQ1qba6bKU+JxS1tLQ0CdLUpJrqEpH3SosI+FuVl7XYALBZaNoMAPqA34ADlZiLtmi7kz/QYnPQrSZTayUs5UiB92MxcNPfaq7KADNNO5x22gxfWBYbw38w83TClt3p4HfBH4jRm7cYWIVTFww/ixdvtZociNdk15tXAvy23IvanWbhE3ZdREHgdWBC+Bf6M4jqzisBbvqlvIsiL0UNkzmzfkW8UZPNqSvvpzLA5Tk1789MGbwif2YY3hNqKyVeWeCyiPl4VQavHVUpH68YeILOvPLA5fRNqD9CzHzXwxB5Rf0RA1+68n5EAm76vdZW1U5KvGTgi5twKfIqAF9UYmVeJeAftDW0SjqDlwxsNBq/19bUqkiB9xMlYCOWtrZWQ0q8CsDGvLS1tnIp8hKBjQX9pK29lUqZlwBsLJK2BleoM3hlgY3GiwuswPsZAViKWze88sAluEaXtiZXJEVeOWCDocz6dTEnOQByJ+usOovMwEwqYgCvcL8ZDyzQCEyllHlLgQ2GUmDZ0yP9wB33+vxhMGpXZVEZvFD+LF1t3i9lgA2GUmDZs49D4Riug2w7OFQ1ylPk5QeMrvUQiLFV5y0FNhhKgP+RPXnLz5kFPw7GuXE1FpXBS9NRbspefV4psMFQAky47I7oVkVyJonf7fsh4B6N8D8Dux4Pg/QH4aCszwPSDwbxeD/P29XuATlfVp63qw3dJBB4W839YeHKR6HUKj5gFuyo5f1KCmwwSIFJoajVBJLSfZY20O8zhcMP0EkuL+dud6T5ZkhvOGFRL9c2IOKdd4d7vXCfRZZ3I1fgzfpByuGD4WKepjvbeWfajLd1qeaVABsMEuBfCbQ0vZqetEh22We4+5D0OOVGNj7g+vegdTHctqGRsIiNukGBdyMUytBon39LjjfJ+YMCL7sPvLBHZBdwYRIkUPc46GnvVM9bBGyQSCnNsEw6pUE5CW7ifjrKnXTSQb8ngjaC8QFIlcH1SrtuFnjZGF/Lrpvixp/nDSZtYJcWeIMnqSO0s6sNfedqGjVsehdE5S1T4P2iCFiKq0CLDJPyQhjeAnsKelrE3RvEWwsghtraAt6YL/AG/YKDJIFPfNlTHW7Sknhld6LvhD8Qg9w5vaqeVwwsoT0jh4i4eV509xEKbrSaBIBWkzsCDU+wAgGs9bzZlkK86mrzJLxIh+J7tHleTzyKvTV/IhuMJBNp/jce53wsdOcEIelT5C0AF9P+rEyLzM1tSHlteV5oJCP8dxB7KN4j4cX3c3kV8RbfsOV5OxcmUc4148G8qyno0LvELlCZNw+swpWxNuOi9mOxFdcv/CCq3wTLJkp5N3IlAYDE6/KCSS+TdfH+TLsSA5nNeIrgzmfx8sAqaWnU/56cxkfMq7L9bk3ZpAGexGuxpfbQRv4nYriYxeYjNTgF3qt5YBUNNy9RfsXziuIztLkQn1F0EeIzjMmnvK4EmMXn7+b2C18py5vfGeWEmDHVe58j5l1KvAKwiPbr8mhplD9zMVyF7GAcBxKh/7U4B1DTEvrffW5087T/HRf3vxGPjYGHD4bcmcJFZXkHPbZjGh0p9AlszJOe2aIJUuTFwGpdWdBeHIT9Pm/cA0AvziGF/IrbRdWcz6+mcBaEi2AuhaMYz8vuuLleLzzcLPIo+fabAO523wx36BeaQGYADybOw3tVjKuGFlk8mAjBrqN3dk/48qwvBy07FvLncThSTJlF+XNqZ17Ey+fPp+m2Ai/d+QHl5euwOfAp89bMQIYm6Qzeq6e0v6nEPYcYcW5xfgX9/iCxEPISZgNfKcKthiEkradn8fts6SDjPMoM7JIL71AUaXqsCLcaZpB1FJpCPcpgqO2o4mtdYbOjIYXLDJHnE57i/lWxFcpyxWDwgrEJDegq1TxMtbzkG4hoPiFpvugfavugc4tdH3UDT7v8iFWdMh73vvxIEAvNFyXOB3bV3pW1FpoPPN1g870bbT5/oz2v0WjP41AvDxrreatGe56u0Z6XbLjnYanASiM877xSWLOgwZ5nb7j1ChpuPQq03shS/a43slSy3gheT+ZgsR7Xk1k8kFtPBhE/nXu+/LCnntYL6iGvF4SJA2g9qOXud5frQd8so/WgAkRaPvmwNjc3o9eFVwC+rCWLX/0PJFCPJF4mcgoAAAAASUVORK5CYII=",alt:""})]})]}),(0,He.jsx)("div",{className:"footernav",children:">"})]})};function Je(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et=function(e){var t=l((0,r.useState)(e),2),n=t[0],i=t[1];return[n,function(t){i(t?$e($e({},n),{},Je({},t.target.name,t.target.value)):e)}]},tt=(0,r.createContext)(null),nt=(0,r.createContext)(null);function rt(e){var t=e.children,n=l((0,r.useState)(null),2),i=n[0],a=n[1];return(0,He.jsx)(nt.Provider,{value:{user:i,setUser:a},children:t})}var it=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},at={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(it(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ot=function(e){return function(e){var t=it(e);return at.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ut=function(e){try{return at.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function st(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=st(e[n],t[n]));return e}var ct=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},lt=function(){try{return ct()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Kivlic-career-Assignment",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ut(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ft=function(){var e;return null===(e=lt())||void 0===e?void 0:e.config},ht=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function dt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ot(JSON.stringify({alg:"none",type:"JWT"})),ot(JSON.stringify(a)),""].join(".")}function pt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function vt(){var e,t=null===(e=lt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function mt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function yt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function gt(){var e=pt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function kt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var bt=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(x(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(x(a),wt.prototype.create),a}return y(n)}(S(Error)),wt=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?xt(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new bt(n,a,t);return o}}]),e}();function xt(e,t){return e.replace(_t,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var _t=/\{\$([^}]+)}/g;function It(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Et(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(St(u)&&St(s)){if(!Et(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function St(e){return null!==e&&"object"===typeof e}function Tt(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function At(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ct(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Nt(e,t){var n=new Rt(e,t);return n.subscribe.bind(n)}var Rt=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=A(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Dt),void 0===r.error&&(r.error=Dt),void 0===r.complete&&(r.complete=Dt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Dt(){}function Pt(e){return e&&e._delegate?e._delegate:e}function Ot(){Ot=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Lt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Mt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Lt(a,r,i,o,u,"next",e)}function u(e){Lt(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Ft=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ut="[DEFAULT]",jt=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ht;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ut})}catch(s){}var t,n=A(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=A(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(BS){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ut?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(BS){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return this.component?this.component.multipleInstances?e:Ut:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Vt,Bt,qt=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new jt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),zt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Bt||(Bt={}));var Kt={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},Gt=Bt.INFO,Wt=(Je(Vt={},Bt.DEBUG,"log"),Je(Vt,Bt.VERBOSE,"log"),Je(Vt,Bt.INFO,"info"),Je(Vt,Bt.WARN,"warn"),Je(Vt,Bt.ERROR,"error"),Vt),Ht=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Wt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Qt=function(){function e(t){d(this,e),this.name=t,this._logLevel=Gt,this._logHandler=Ht,this._userLogHandler=null,zt.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Bt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Kt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Bt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Bt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Bt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Bt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Bt.INFO].concat(t)),this._logHandler.apply(this,[this,Bt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Bt.WARN].concat(t)),this._logHandler.apply(this,[this,Bt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Bt.ERROR].concat(t)),this._logHandler.apply(this,[this,Bt.ERROR].concat(t))}}]),e}();var Yt,Xt;var Jt=new WeakMap,Zt=new WeakMap,$t=new WeakMap,en=new WeakMap,tn=new WeakMap;var nn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Zt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return on(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function rn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Xt||(Xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(un(this),n),on(Jt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return on(e.apply(un(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[un(this),t].concat(r));return $t.set(a,t.sort?t.sort():[t]),on(a)}}function an(e){return"function"===typeof e?rn(e):(e instanceof IDBTransaction&&function(e){if(!Zt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Zt.set(e,t)}}(e),t=e,(Yt||(Yt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,nn):e);var t}function on(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(on(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Jt.set(t,e)})).catch((function(){})),tn.set(t,e),t}(e);if(en.has(e))return en.get(e);var t=an(e);return t!==e&&(en.set(e,t),tn.set(t,e)),t}var un=function(e){return tn.get(e)};var sn,cn,ln=["get","getKey","getAll","getAllKeys","count"],fn=["put","add","delete","clear"],hn=new Map;function dn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(hn.get(t))return hn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=fn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||ln.includes(n))){var a=function(){var e=Mt(Ot().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return hn.set(t,a),a}}}nn=function(e){return $e($e({},e),{},{get:function(t,n,r){return dn(t,n)||e.get(t,n,r)},has:function(t,n){return!!dn(t,n)||e.has(t,n)}})}(nn);var pn=function(){function e(t){d(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var vn="@firebase/app",mn="0.9.3",yn=new Qt("@firebase/app"),gn="[DEFAULT]",kn=(Je(sn={},vn,"fire-core"),Je(sn,"@firebase/app-compat","fire-core-compat"),Je(sn,"@firebase/analytics","fire-analytics"),Je(sn,"@firebase/analytics-compat","fire-analytics-compat"),Je(sn,"@firebase/app-check","fire-app-check"),Je(sn,"@firebase/app-check-compat","fire-app-check-compat"),Je(sn,"@firebase/auth","fire-auth"),Je(sn,"@firebase/auth-compat","fire-auth-compat"),Je(sn,"@firebase/database","fire-rtdb"),Je(sn,"@firebase/database-compat","fire-rtdb-compat"),Je(sn,"@firebase/functions","fire-fn"),Je(sn,"@firebase/functions-compat","fire-fn-compat"),Je(sn,"@firebase/installations","fire-iid"),Je(sn,"@firebase/installations-compat","fire-iid-compat"),Je(sn,"@firebase/messaging","fire-fcm"),Je(sn,"@firebase/messaging-compat","fire-fcm-compat"),Je(sn,"@firebase/performance","fire-perf"),Je(sn,"@firebase/performance-compat","fire-perf-compat"),Je(sn,"@firebase/remote-config","fire-rc"),Je(sn,"@firebase/remote-config-compat","fire-rc-compat"),Je(sn,"@firebase/storage","fire-gcs"),Je(sn,"@firebase/storage-compat","fire-gcs-compat"),Je(sn,"@firebase/firestore","fire-fst"),Je(sn,"@firebase/firestore-compat","fire-fst-compat"),Je(sn,"fire-js","fire-js"),Je(sn,"firebase","fire-js-all"),sn),bn=new Map,wn=new Map;function xn(e,t){try{e.container.addComponent(t)}catch(n){yn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function _n(e,t){e.container.addOrOverwriteComponent(t)}function In(e){var t=e.name;if(wn.has(t))return yn.debug("There were multiple attempts to register component ".concat(t,".")),!1;wn.set(t,e);var n,r=A(bn.values());try{for(r.s();!(n=r.n()).done;){xn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function En(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Sn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gn;En(e,t).clearInstance(n)}function Tn(){wn.clear()}var An=(Je(cn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Je(cn,"bad-app-name","Illegal App name: '{$appName}"),Je(cn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Je(cn,"app-deleted","Firebase App named '{$appName}' already deleted"),Je(cn,"no-options","Need to provide options, when not being deployed to hosting via source."),Je(cn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Je(cn,"invalid-log-argument","First argument to `onLog` must be null or a function."),Je(cn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Je(cn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Je(cn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Je(cn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),cn),Cn=new wt("app","Firebase",An),Nn=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ft("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}]),e}(),Rn="9.17.1";function Dn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:gn,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw Cn.create("bad-app-name",{appName:String(a)});if(n||(n=ft()),!n)throw Cn.create("no-options");var o=bn.get(a);if(o){if(Et(n,o.options)&&Et(i,o.config))return o;throw Cn.create("duplicate-app",{appName:a})}var u,s=new qt(a),c=A(wn.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new Nn(n,i,s);return bn.set(a,f),f}function Pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=bn.get(e);if(!t&&e===gn)return Dn();if(!t)throw Cn.create("no-app",{appName:e});return t}function On(){return Array.from(bn.values())}function Ln(e){return Mn.apply(this,arguments)}function Mn(){return(Mn=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!bn.has(n)){e.next=6;break}return bn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fn(e,t,n){var r,i=null!==(r=kn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void yn.warn(u.join(" "))}In(new Ft("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Un(e,t){if(null!==e&&"function"!==typeof e)throw Cn.create("invalid-log-argument");!function(e,t){var n,r=A(zt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Kt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Bt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function jn(e){var t;t=e,zt.forEach((function(e){e.setLogLevel(t)}))}var Vn="firebase-heartbeat-store",Bn=null;function qn(){return Bn||(Bn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=on(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(on(u.result),e.oldVersion,e.newVersion,on(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Vn)}}).catch((function(e){throw Cn.create("idb-open",{originalErrorMessage:e.message})}))),Bn}function zn(e){return Kn.apply(this,arguments)}function Kn(){return Kn=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qn();case 3:return n=e.sent,e.abrupt("return",n.transaction(Vn).objectStore(Vn).get(Hn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof bt?yn.warn(e.t0.message):(r=Cn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Kn.apply(this,arguments)}function Gn(e,t){return Wn.apply(this,arguments)}function Wn(){return Wn=Mt(Ot().mark((function e(t,n){var r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qn();case 3:return r=e.sent,i=r.transaction(Vn,"readwrite"),a=i.objectStore(Vn),e.next=8,a.put(n,Hn(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof bt?yn.warn(e.t0.message):(o=Cn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yn.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Wn.apply(this,arguments)}function Hn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Qn=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new $n(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Yn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Yn(),n=Xn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ot(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Yn(){return(new Date).toISOString().substring(0,10)}function Xn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=A(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),er(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),er(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Jn,Zn,$n=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,zn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Gn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Gn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function er(e){return ot(JSON.stringify({version:2,heartbeats:e})).length}Jn="",In(new Ft("platform-logger",(function(e){return new pn(e)}),"PRIVATE")),In(new Ft("heartbeat",(function(e){return new Qn(e)}),"PRIVATE")),Fn(vn,mn,Jn),Fn(vn,mn,"esm2017"),Fn("fire-js","");var tr=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,xn(t,new Ft("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Ln(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){xn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){_n(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),nr=(Je(Zn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Je(Zn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Zn),rr=new wt("app-compat","Firebase",nr);var ir=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Dn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(It(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Fn,setLogLevel:jn,onLog:Un,apps:null,SDK_VERSION:Rn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(In(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw rr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&st(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!It(n,e=e||gn))throw rr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(tr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){st(n,e)},createSubscribe:Nt,ErrorFactory:wt,deepExtend:st}),n}(),ar=new Qt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ar.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var or=self.firebase.SDK_VERSION;or&&or.indexOf("LITE")>=0&&ar.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ur=ir;!function(e){Fn("@firebase/app-compat","0.2.3",e)}();var sr,cr="firebasestorage.googleapis.com",lr="storageBucket",fr=function(e){k(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,hr(e),"Firebase Storage: ".concat(r," (").concat(hr(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(x(i),n.prototype),i}return y(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return hr(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(bt);function hr(e){return"storage/"+e}function dr(){return new fr(sr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function pr(){return new fr(sr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vr(){return new fr(sr.CANCELED,"User canceled the upload/download.")}function mr(){return new fr(sr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yr(e){return new fr(sr.INVALID_ARGUMENT,e)}function gr(){return new fr(sr.APP_DELETED,"The Firebase app was deleted.")}function kr(e){return new fr(sr.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function br(e,t){return new fr(sr.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function wr(e){throw new fr(sr.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(sr||(sr={}));var xr,_r=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return y(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new fr(sr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===cr?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new fr(sr.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Ir=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return y(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Er(e){return"string"===typeof e||e instanceof String}function Sr(e){return Tr()&&e instanceof Blob}function Tr(){return"undefined"!==typeof Blob&&!vt()}function Ar(e,t,n,r){if(r<t)throw yr("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw yr("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Cr(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Nr(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function Rr(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(xr||(xr={}));var Dr=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return y(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=dr();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?gr():vr());else i(pr())}};this.canceled_?t(0,new Pr(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Pr(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===xr.NO_ERROR,a=r.getStatus();if(!n||Rr(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===xr.ABORT;t(!1,new Pr(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new Pr(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),Pr=y((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Or(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function Lr(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function Mr(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Fr(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function Ur(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Nr(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return Mr(c,t),Or(c,n),Lr(c,a),Fr(c,r),new Dr(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function jr(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Vr(){for(var e=jr(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Tr())return new Blob(n);throw new fr(sr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Br(e){if("undefined"===typeof atob)throw t="base-64",new fr(sr.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var qr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},zr=y((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function Kr(e,t){switch(e){case qr.RAW:return new zr(Gr(t));case qr.BASE64:case qr.BASE64URL:return new zr(Wr(e,t));case qr.DATA_URL:return new zr(function(e){var t=new Hr(e);return t.base64?Wr(qr.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw br(qr.DATA_URL,"Malformed data URL.")}return Gr(t)}(t.rest)}(t),new Hr(t).contentType)}throw dr()}function Gr(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Wr(e,t){switch(e){case qr.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw br(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case qr.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw br(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=Br(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw br(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Hr=y((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw br(qr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Qr=function(){function e(t,n){d(this,e);var r=0,i="";Sr(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return y(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Sr(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Tr()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Vr.apply(null,i))}var a=n.map((function(e){return Er(e)?Kr(qr.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function Yr(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Xr(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Jr(e,t){return t}var Zr=y((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Jr})),$r=null;function ei(){if($r)return $r;var e=[];e.push(new Zr("bucket")),e.push(new Zr("generation")),e.push(new Zr("metageneration")),e.push(new Zr("name","fullPath",!0));var t=new Zr("name");t.xform=function(e,t){return function(e){return!Er(e)||e.length<2?e:Xr(e)}(t)},e.push(t);var n=new Zr("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Zr("timeCreated")),e.push(new Zr("updated")),e.push(new Zr("md5Hash",null,!0)),e.push(new Zr("cacheControl",null,!0)),e.push(new Zr("contentDisposition",null,!0)),e.push(new Zr("contentEncoding",null,!0)),e.push(new Zr("contentLanguage",null,!0)),e.push(new Zr("contentType",null,!0)),e.push(new Zr("metadata","customMetadata",!0)),$r=e}function ti(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new _r(n,r);return t._makeStorageReference(i)}})}(r,e),r}function ni(e,t,n){var r=Yr(t);return null===r?null:ti(e,r,n)}function ri(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var ii="prefixes",ai="items";function oi(e,t,n){var r=Yr(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ii]){var i,a=A(n[ii]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new _r(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[ai]){var s,c=A(n[ai]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new _r(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var ui=y((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function si(e){if(!e)throw dr()}function ci(e,t){return function(n,r){var i=ni(e,r,t);return si(null!==i),i}}function li(e,t){return function(n,r){var i=ni(e,r,t);return si(null!==i),function(e,t,n,r){var i=Yr(t);if(null===i)return null;if(!Er(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Cr("/b/"+o(i)+"/o/"+o(a),n,r)+Nr({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function fi(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new fr(sr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new fr(sr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new fr(sr.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new fr(sr.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function hi(e){var t=fi(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new fr(sr.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function di(e,t,n){var r=Cr(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ui(r,"GET",ci(e,n),i);return a.errorHandler=hi(t),a}function pi(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Cr(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new ui(o,"GET",function(e,t){return function(n,r){var i=oi(e,t,r);return si(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=fi(t),s}function vi(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function mi(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=vi(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ri(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=Qr.getBlob(c,r,l);if(null===f)throw mr();var h={name:s.fullPath},d=Cr(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new ui(d,"POST",ci(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=fi(t),v}var yi=y((function e(t,n,r,i){d(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function gi(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){si(!1)}return si(!!n&&-1!==(t||["active"]).indexOf(n)),n}var ki=262144;function bi(e,t,n,r,i,a,o,u){var s=new yi(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new fr(sr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw mr();var v=t.maxUploadRetryTime,m=new ui(n,"POST",(function(e,n){var i,o=gi(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?ci(t,a)(e,n):null,new yi(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=fi(e),m}var wi={STATE_CHANGED:"state_changed"},xi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _i(e){switch(e){case"running":case"pausing":case"canceling":return xi.RUNNING;case"paused":return xi.PAUSED;case"success":return xi.SUCCESS;case"canceled":return xi.CANCELED;default:return xi.ERROR}}var Ii=y((function e(t,n,r){d(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Ei(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Si=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xr.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=xr.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=xr.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return y(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw wr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw wr("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw wr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw wr("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw wr("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Ti=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Si);function Ai(){return new Ti}var Ci=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=ei(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(sr.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(Rr(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=pr()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(sr.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return y(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=l(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=vi(t,r,i),u={name:o.fullPath},s=Cr(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=ri(o,n),f=e.maxUploadRetryTime,h=new ui(s,"POST",(function(e){var t;gi(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){si(!1)}return si(Er(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=fi(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ai,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new ui(n,"POST",(function(e){var t=gi(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){si(!1)}n||si(!1);var i=Number(n);return si(!isNaN(i)),new yi(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=fi(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Ai,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=ki*this._chunkMultiplier,n=new yi(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=bi(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Ai,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(ki*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=di(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Ai,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=mi(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ai,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=vr(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=_i(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Ii(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(_i(this._state)){case xi.SUCCESS:Ei(this._resolve.bind(null,this.snapshot))();break;case xi.CANCELED:case xi.ERROR:Ei(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(_i(this._state)){case xi.RUNNING:case xi.PAUSED:e.next&&Ei(e.next.bind(e,this.snapshot))();break;case xi.SUCCESS:e.complete&&Ei(e.complete.bind(e))();break;default:e.error&&Ei(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Ni=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof _r?n:_r.makeFromUrl(n,t.host)}return y(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new _r(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Xr(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new _r(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw kr(e)}}]),e}();function Ri(e,t,n){return Di.apply(this,arguments)}function Di(){return(Di=Mt(Ot().mark((function e(t,n,r){var i,a,o,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Pi(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,h(u.prefixes)),(a=n.items).push.apply(a,h(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,Ri(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(e,t){null!=t&&"number"===typeof t.maxResults&&Ar("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=pi(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Ai)}function Oi(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Cr(t.fullServerUrl(),e.host,e._protocol),a=ri(n,r),o=e.maxOperationRetryTime,u=new ui(i,"PATCH",ci(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=hi(t),u}(e.storage,e._location,t,ei());return e.storage.makeRequestWithTokens(n,Ai)}function Li(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Cr(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ui(r,"GET",li(e,n),i);return a.errorHandler=hi(t),a}(e.storage,e._location,ei());return e.storage.makeRequestWithTokens(t,Ai).then((function(e){if(null===e)throw new fr(sr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Mi(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Cr(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new ui(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=hi(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Ai)}function Fi(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new _r(e._location.bucket,n);return new Ni(e.storage,r)}function Ui(e,t){if(e instanceof qi){var n=e;if(null==n._bucket)throw new fr(sr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lr+"' property when initializing the app?");var r=new Ni(n,n._bucket);return null!=t?Ui(r,t):r}return void 0!==t?Fi(e,t):e}function ji(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof qi)return new Ni(e,t);throw yr("To use ref(service, url), the first argument must be a Storage instance.")}return Ui(e,t)}function Vi(e,t){var n=null===t||void 0===t?void 0:t[lr];return null==n?null:_r.makeFromBucketSpec(n,e)}function Bi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:dt(i,e.app.options.projectId))}var qi=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=cr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_r.makeFromBucketSpec(i,this._host):Vi(this._host,this.app.options)}return y(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=_r.makeFromBucketSpec(this._url,e):this._bucket=Vi(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Ar("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Ar("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Mt(Ot().mark((function e(){var t,n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Mt(Ot().mark((function e(){var t,n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Ni(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Ir(gr());var o=Ur(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=Mt(Ot().mark((function e(t,n){var r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),zi="@firebase/storage",Ki="0.11.1",Gi="storage";function Wi(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Ci(e,new Qr(t),n)}(e=Pt(e),t,n)}function Hi(e){return function(e){e._throwIfRoot("getMetadata");var t=di(e.storage,e._location,ei());return e.storage.makeRequestWithTokens(t,Ai)}(e=Pt(e))}function Qi(e){return function(e){var t={prefixes:[],items:[]};return Ri(e,t).then((function(){return t}))}(e=Pt(e))}function Yi(e,t){return ji(e=Pt(e),t)}function Xi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Bi(e,t,n,r)}function Ji(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new qi(r,i,a,n,Rn)}In(new Ft(Gi,Ji,"PUBLIC").setMultipleInstances(!0)),Fn(zi,Ki,""),Fn(zi,Ki,"esm2017");var Zi=function(){function e(t,n,r){d(this,e),this._delegate=t,this.task=n,this.ref=r}return y(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),$i=function(){function e(t,n){d(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return y(e,[{key:"snapshot",get:function(){return new Zi(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Zi(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Zi(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Zi(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),ea=function(){function e(t,n){d(this,e),this._delegate=t,this._service=n}return y(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new ta(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new ta(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),ta=function(){function e(t,n){d(this,e),this._delegate=t,this.storage=n}return y(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Fi(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new $i(Wi(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qr.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Kr(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new $i(new Ci(this._delegate,new Qr(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Qi(this._delegate).then((function(t){return new ea(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Pi(e=Pt(e),t)}(this._delegate,e||void 0).then((function(e){return new ea(e,t.storage)}))}},{key:"getMetadata",value:function(){return Hi(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Oi(e=Pt(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return Li(Pt(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Mi(Pt(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw kr(e)}}]),e}(),na=function(){function e(t,n){d(this,e),this.app=t,this._delegate=n}return y(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(ra(e))throw yr("ref() expected a child path but got a URL, use refFromURL instead.");return new ta(Yi(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!ra(e))throw yr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_r.makeFromUrl(e,this._delegate.host)}catch(t){throw yr("refFromUrl() expected a valid full URL but got an invalid one.")}return new ta(Yi(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Xi(this._delegate,e,t,n)}}]),e}();function ra(e){return/^[A-Za-z]+:\/\//.test(e)}function ia(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new na(r,i)}!function(e){var t={TaskState:xi,TaskEvent:wi,StringFormat:qr,Storage:na,Reference:ta};e.INTERNAL.registerComponent(new Ft("storage-compat",ia,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.1")}(ur);var aa=function(){var e=l(et({email:"",fname:"",lname:"",phone:"",file:""}),2),t=e[0],n=e[1],i=l((0,r.useState)(null),2),a=i[0],o=i[1],u=(0,r.useContext)(nt).user,s=(0,r.useContext)(tt).Firebase,c=function(e){e.target.classList.add("inputBlur")};return(0,He.jsxs)("div",{className:"formContainer",children:[(0,He.jsxs)("div",{className:"heading",children:[(0,He.jsx)("h2",{children:"Personal Details"}),(0,He.jsx)("p",{children:"Please complete the below form and attach a CV."})]}),(0,He.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),u?(n(""),document.querySelectorAll(".inputBlur").forEach((function(e){return e.classList.remove("inputBlur")})),document.getElementById("file").value="",console.log("submitted"),s.storage().ref("profiles/"+u.uid+"/resume/"+t.fname+t.lname).put(a).then((function(e){console.log("stored"),window.popup("CV Sent")}))):alert("Login First And Continue")},children:[(0,He.jsx)("div",{className:"email",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{children:"Email address"}),(0,He.jsx)("input",{type:"email",name:"email",value:t.email,onChange:n,required:!0,onBlur:c})]})}),(0,He.jsxs)("div",{className:"details",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{children:"First Name"}),(0,He.jsx)("input",{type:"text",name:"fname",pattern:"[A-Za-z]*",value:t.fname,onChange:n,required:!0,onBlur:c,title:"Only Letters allowed"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{children:"Last Name"}),(0,He.jsx)("input",{type:"text",name:"lname",pattern:"[A-Za-z]*",value:t.lname,onChange:n,required:!0,onBlur:c,title:"Only Letters allowed"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{children:"Telephone"}),(0,He.jsx)("input",{type:"text",name:"phone",pattern:"(\\+|(\\+[1-9])?[0-9]*)",value:t.phone,onChange:n,required:!0,onBlur:c}),(0,He.jsx)("p",{children:"Please include your country and area code"})]})]}),(0,He.jsxs)("div",{className:"cv",children:[(0,He.jsx)("p",{children:"Upload CV"}),(0,He.jsxs)("label",{htmlFor:"file",className:t.file?"file":"",children:[(0,He.jsx)("p",{children:t.file?t.file:"Upload CV"}),(0,He.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmBAMAAABaE/SdAAAAAXNSR0IB2cksfwAAADBQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWj8cCwAAABB0Uk5TAP+AP8Aw7xCfYNCQ31CvIA2zUD4AAAC5SURBVHicY2CAAm6ZAAZ00CiYii7EISgohq6wUVAQXSFQGYZCkDI0hUBlCwUTURU2CkoVCnqiKOQUFFzOKOgwUVAGIcYtKFUAFANKFcDFmBPdGYBiDNMkkMwrZQCLsaO5GiSGDmgpxvoBTYy5gGGjLJrYwnwGQRFUMWZBISqJbcAQ44AGPLIYQzgDphgDDcVkUMU4gWIPBR8bI4NpgqIMFwXRwQJIKkMGIP8ooom5Ag1ln6SEDFQZGAAvLyiMMs8nPgAAAABJRU5ErkJggg==",alt:""})]}),(0,He.jsx)("input",{type:"file",id:"file",name:"file",accept:"text/plain, application/pdf,application/msword",onChange:function(e){if(n(e),e.target.files[0]){var t=e.target.files[0].type;o("text/plain"===t||"application/pdf"===t||"application/msword"===t?e.target.files[0]:"")}else o("")},required:!0}),(0,He.jsx)("p",{className:"tip",children:"Select resume file (TXT, PDF or Word DOC)"})]}),(0,He.jsx)("button",{type:"submit",children:"Submit"})]})]})};var oa=function(e){(0,r.useEffect)((function(){var t=document.getElementById(e.currentNav);t&&(t.style.color="#20DE96",t.style.borderBottom="1px #000 solid")}));var t=xe(),n=l((0,r.useState)(!1),2),i=n[0],a=n[1],o=(0,r.useContext)(nt).user,u=function(){a(!1)};return window.addEventListener("scroll",u),(0,He.jsxs)("div",{className:"navbar",onMouseLeave:u,children:[(0,He.jsx)("div",{className:"navDiv none",onClick:function(){return a(!i)},children:(0,He.jsx)("div",{className:"nav"})}),(0,He.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPEAAAAtCAMAAABI6X1vAAAAAXNSR0IB2cksfwAAAMNQTFRFAAAA////////////////////////////////////////////////////////////////////+/v7/////////v7+/////////////////////////////////////////////////v7+/////////////////////////////////////////////////////////f39/////////////////////////////////////////v7+/////Pz8/Pz8////rMZxqQAAAEF0Uk5TAP9A/gH9EHcwiD9TBiup2xHqOZ/7Ye+dQ9HQFPDf7jPrVSAEz/fL4xeu13Cx9WrCuSR9v0UngRznCY/Hcw1KUoZSWCGEAAADo0lEQVR4nL3afVvaMBAA8IaWynCKGxVxUthABr6/65y67ft/qqWtbdI0d5fzobl/fHImF355eNqSJoiHqTjpBVTcpum+1lz//tU9vYxVYr47uRjuUFXebgdX91o7lmWu+wty9nqsb9NksLVWib1hGtKG6LEwDIWMNCZ6573OVPtkKtvLsUrsynb39A2vspf1mv7Qyl7IxOQhoj5sPU5W2eRamYNQTj4gDNFBNwyTyyAYZRbRwXvnYCFUzWXXWIJJ1v7yFa2Sg+W6qDKjvMz2Z3x2M5ZJNupRJaZ53T46KMqWRYgkDoSD+B2s9SraW0E9gYsLsOxlluGKi1GfjESIit/B2bo4iEtwak7KEpfg7qlZxoO4BIs0chCX4Il2beCLS3Ctky9xBR7NAlpsA/PFFVi/cPkSa+CIFlvBbLEd7ElcB1NiO5grBsB+xAaYEANgphgCexGbYFwMgXliEOxD3ACjYhDMEsNgD+ImGBOXYNF8ZGWIq/vwoPnY3bq4AncrMCKuwPvN/7mLMXDr4goc7kfGcIsYA7uLUXDbYisYFKNgZzEObllsB0NiHOwqJsDtigEwICbAjmIK3KoYAtvFFNhNTILbFIPgQGABgZ3ENHijYpHUAwKjYhDsInYAb1ZsjSYY6w2DHcQu4PbFFjDSe4TsDpJiJ3D74qnFAPfGyJTYDezhW/0dekLmkgmxI9iD2EIu8medWnyjyLjYFbzZu9PrWI/7Q4hcpI37cUyRUbEzeLPiTlSLI4hsFZNkTOwObvcpEyLbxRQZETPALf+SAMiAmCDDYg647V+LdjIkxsmgmAVufUfASgbFKBkS88Dt7/rYyLAYIwPiPzywh509CxkRK3Lj/bJdnBzywB7EFTms3i9jYkU+Nsh2sWCCfYgV+WesD4feSUBkTOwO9iJukHExREbEDLAfsUkmxAAZFnPAnsQGmRLbyaCYBca3nGqxGi+MUZw35jUyKVbkO1rMAzPEYrU2RrFORVTkaxexIpt38YaYCeaIxb0xinfypSQnPRdxRZ4bk74ak3LBLPG2MeofS1ySu/PgPPs7maO938lDlXjJjp6Jvypx/RFwcL50Bk/Ut/olP791qZXJ2iPCkJNDaeilshqya1lEfCfB2pVrfJUIcfCkJVYiueOCg95x4go+e1ZzZQu1+6DKzFYSTBqOriR4L5+WOLBXxNxYwp3+vHaectF7Cj4QO/2OU9RvYA/9m2etGS1m4wV91HFxcyM7/QcOJU1OIKp+oAAAAABJRU5ErkJggg==",alt:"",className:"logo",onClick:function(){return t("/Kivlic-career-Assignment/")}}),(0,He.jsxs)("ul",{className:i?"navLinks":"navLinks hide",children:[(0,He.jsx)("li",{id:"AboutUs",onClick:function(){return t("/Kivlic-career-Assignment/about")},children:"About us"}),(0,He.jsx)("li",{id:"Services",onClick:function(){return t("/Kivlic-career-Assignment/services")},children:"Services"}),(0,He.jsx)("li",{id:"Pricing",onClick:function(){return t("/Kivlic-career-Assignment/pricing")},children:"Pricing"}),(0,He.jsx)("li",{id:"Contact",onClick:function(){return t("/Kivlic-career-Assignment/contact")},children:"Contact"})]}),o?(0,He.jsx)("ul",{className:i?"signin":"signin hide",children:(0,He.jsxs)("li",{id:"Account",className:"child",onClick:function(){return t("/Kivlic-career-Assignment/account")},children:[(0,He.jsx)("i",{className:"bx bxs-user-circle"}),"Account"]})}):(0,He.jsx)("ul",{className:i?"signin":"signin hide",children:(0,He.jsx)("li",{id:"Login",className:"child",onClick:function(){return t("/Kivlic-career-Assignment/emaillogin")},children:"LOGIN"})})]})};var ua=function(){return(0,He.jsxs)("div",{children:[(0,He.jsx)(oa,{}),(0,He.jsx)(Qe,{}),(0,He.jsx)(aa,{}),(0,He.jsx)(Xe,{}),(0,He.jsx)(Ye,{})]})};function sa(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function ca(){return ca="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=sa(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ca.apply(this,arguments)}ur.registerVersion("firebase","9.17.1","app-compat");function la(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var fa;Object.create;var ha="facebook.com",da="github.com",pa="google.com",va="password",ma="twitter.com",ya="EMAIL_SIGNIN",ga="PASSWORD_RESET",ka="RECOVER_EMAIL",ba="REVERT_SECOND_FACTOR_ADDITION",wa="VERIFY_AND_CHANGE_EMAIL",xa="VERIFY_EMAIL";function _a(){return Je({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ia=function(){var e;return Je(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Je(e,"argument-error",""),Je(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Je(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Je(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Je(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Je(e,"cordova-not-ready","Cordova framework is not ready."),Je(e,"cors-unsupported","This browser is not supported."),Je(e,"credential-already-in-use","This credential is already associated with a different user account."),Je(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Je(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Je(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Je(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Je(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Je(e,"email-already-in-use","The email address is already in use by another account."),Je(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Je(e,"expired-action-code","The action code has expired."),Je(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Je(e,"internal-error","An internal AuthError has occurred."),Je(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Je(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Je(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Je(e,"invalid-auth-event","An internal AuthError has occurred."),Je(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Je(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Je(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Je(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Je(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Je(e,"invalid-email","The email address is badly formatted."),Je(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Je(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Je(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Je(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Je(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Je(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Je(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Je(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Je(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Je(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Je(e,"wrong-password","The password is invalid or the user does not have a password."),Je(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Je(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Je(e,"invalid-provider-id","The specified provider ID is invalid."),Je(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Je(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Je(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Je(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Je(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Je(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Je(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Je(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Je(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Je(e,"missing-continue-uri","A continue URL must be provided in the request."),Je(e,"missing-iframe-start","An internal AuthError has occurred."),Je(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Je(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Je(e,"missing-multi-factor-info","No second factor identifier is provided."),Je(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Je(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Je(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Je(e,"app-deleted","This instance of FirebaseApp has been deleted."),Je(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Je(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Je(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Je(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Je(e,"no-auth-event","An internal AuthError has occurred."),Je(e,"no-such-provider","User was not linked to an account with the given provider."),Je(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Je(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Je(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Je(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Je(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Je(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Je(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Je(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Je(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Je(e,"rejected-credential","The request contains malformed or mismatching credentials."),Je(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Je(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Je(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Je(e,"timeout","The operation has timed out."),Je(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Je(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Je(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Je(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Je(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Je(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Je(e,"unverified-email","The operation requires a verified email."),Je(e,"user-cancelled","The user did not grant your application the permissions it requested."),Je(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Je(e,"user-disabled","The user account has been disabled by an administrator."),Je(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Je(e,"user-signed-out",""),Je(e,"weak-password","The password must be 6 characters long or more."),Je(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Je(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Ea=_a,Sa=new wt("auth","Firebase",_a()),Ta=new Qt("@firebase/auth");function Aa(e){if(Ta.logLevel<=Bt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ta.error.apply(Ta,["Auth (".concat(Rn,"): ").concat(e)].concat(n))}}function Ca(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Pa.apply(void 0,[e].concat(n))}function Na(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pa.apply(void 0,[e].concat(n))}function Ra(e,t,n){var r=Object.assign(Object.assign({},Ea()),Je({},t,n));return new wt("auth","Firebase",r).create(t,{appName:e.name})}function Da(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ca(e,"argument-error"),Ra(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Pa(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return Sa.create.apply(Sa,[e].concat(n))}function Oa(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Pa.apply(void 0,[t].concat(r))}}function La(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Aa(t),new Error(t)}function Ma(e,t){e||La(t)}var Fa=new Map;function Ua(e){Ma(e instanceof Function,"Expected a class definition");var t=Fa.get(e);return t?(Ma(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fa.set(e,t),t)}function ja(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Va(){return"http:"===Ba()||"https:"===Ba()}function Ba(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var qa=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,Ma(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())||yt()}return y(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Va()||mt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function za(e,t){Ma(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ka=function(){function e(){d(this,e)}return y(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void La("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void La("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void La("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ga=(Je(fa={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Je(fa,"MISSING_CUSTOM_TOKEN","internal-error"),Je(fa,"INVALID_IDENTIFIER","invalid-email"),Je(fa,"MISSING_CONTINUE_URI","internal-error"),Je(fa,"INVALID_PASSWORD","wrong-password"),Je(fa,"MISSING_PASSWORD","internal-error"),Je(fa,"EMAIL_EXISTS","email-already-in-use"),Je(fa,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Je(fa,"INVALID_IDP_RESPONSE","invalid-credential"),Je(fa,"INVALID_PENDING_TOKEN","invalid-credential"),Je(fa,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Je(fa,"MISSING_REQ_TYPE","internal-error"),Je(fa,"EMAIL_NOT_FOUND","user-not-found"),Je(fa,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Je(fa,"EXPIRED_OOB_CODE","expired-action-code"),Je(fa,"INVALID_OOB_CODE","invalid-action-code"),Je(fa,"MISSING_OOB_CODE","internal-error"),Je(fa,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Je(fa,"INVALID_ID_TOKEN","invalid-user-token"),Je(fa,"TOKEN_EXPIRED","user-token-expired"),Je(fa,"USER_NOT_FOUND","user-token-expired"),Je(fa,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Je(fa,"INVALID_CODE","invalid-verification-code"),Je(fa,"INVALID_SESSION_INFO","invalid-verification-id"),Je(fa,"INVALID_TEMPORARY_PROOF","invalid-credential"),Je(fa,"MISSING_SESSION_INFO","missing-verification-id"),Je(fa,"SESSION_EXPIRED","code-expired"),Je(fa,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Je(fa,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Je(fa,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Je(fa,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Je(fa,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Je(fa,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Je(fa,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Je(fa,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Je(fa,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Je(fa,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Je(fa,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),fa),Wa=new qa(3e4,6e4);function Ha(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Qa(e,t,n,r){return Ya.apply(this,arguments)}function Ya(){return Ya=Mt(Ot().mark((function e(t,n,r,i){var a,o=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Xa(t,a,Mt(Ot().mark((function e(){var a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Tt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ka.fetch()(eo(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ya.apply(this,arguments)}function Xa(e,t,n){return Ja.apply(this,arguments)}function Ja(){return Ja=Mt(Ot().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d,p;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ga),n),e.prev=2,a=new to(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw no(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),f=l(c,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw no(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw no(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw no(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Ra(t,p,d);case 34:Ca(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof bt)){e.next=41;break}throw e.t0;case 41:Ca(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Ja.apply(this,arguments)}function Za(e,t,n,r){return $a.apply(this,arguments)}function $a(){return $a=Mt(Ot().mark((function e(t,n,r,i){var a,o,u=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Qa(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ca(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function eo(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?za(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var to=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Na(n.auth,"network-request-failed"))}),Wa.get())}))}return y(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function no(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Na(e,t,r);return i.customData._tokenResponse=n,i}function ro(e,t){return io.apply(this,arguments)}function io(){return(io=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(e,t){return oo.apply(this,arguments)}function oo(){return(oo=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uo(e,t){return so.apply(this,arguments)}function so(){return(so=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function co(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function lo(){return lo=Mt(Ot().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Pt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Oa((a=ho(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:co(fo(a.auth_time)),issuedAtTime:co(fo(a.iat)),expirationTime:co(fo(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}function fo(e){return 1e3*Number(e)}function ho(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Aa("JWT malformed, contained fewer than 3 sections"),null;try{var a=ut(r);return a?JSON.parse(a):(Aa("Failed to decode base64 JWT payload"),null)}catch(o){return Aa("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function po(e,t){return vo.apply(this,arguments)}function vo(){return vo=Mt(Ot().mark((function e(t,n){var r=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof bt&&mo(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),vo.apply(this,arguments)}function mo(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var yo=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return y(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Mt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),go=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return y(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=co(this.lastLoginAt),this.creationTime=co(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ko(e){return bo.apply(this,arguments)}function bo(){return bo=Mt(Ot().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,po(t,uo(r,{idToken:i}));case 6:Oa(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?_o(o.providerUserInfo):[],s=xo(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new go(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),bo.apply(this,arguments)}function wo(){return(wo=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pt(t),e.next=3,ko(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xo(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function _o(e){return e.map((function(e){var t=e.providerId,n=la(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Io(e,t){return Eo.apply(this,arguments)}function Eo(){return(Eo=Mt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xa(t,{},Mt(Ot().mark((function e(){var r,i,a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=eo(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ka.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var So=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return y(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Oa(e.idToken,"internal-error"),Oa("undefined"!==typeof e.idToken,"internal-error"),Oa("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ho(e);return Oa(t,"internal-error"),Oa("undefined"!==typeof t.exp,"internal-error"),Oa("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Mt(Ot().mark((function e(t){var n,r=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Oa(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Mt(Ot().mark((function e(t,n){var r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Io(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return La("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Oa("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Oa("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Oa("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function To(e,t){Oa("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ao=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=la(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new go(a.createdAt||void 0,a.lastLoginAt||void 0)}return y(e,[{key:"getIdToken",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,po(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Oa(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return lo.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return wo.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Oa(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Oa(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Mt(Ot().mark((function e(t){var n,r,i=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ko(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,po(this,ro(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Oa(k&&_,t,"internal-error");var I=So.fromJSON(this.name,_);Oa("string"===typeof k,t,"internal-error"),To(f,t.name),To(h,t.name),Oa("boolean"===typeof b,t,"internal-error"),Oa("boolean"===typeof w,t,"internal-error"),To(d,t.name),To(p,t.name),To(v,t.name),To(m,t.name),To(y,t.name),To(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Mt(Ot().mark((function t(n,r){var i,a,o,u=arguments;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new So).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ko(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Co=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return y(e,[{key:"_isAvailable",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Co.type="NONE";var No=Co;function Ro(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Do=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ro(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ro("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return y(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ao._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Mt(Ot().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ua(No),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ua(No),u=Ro(i,n.config.apiKey,n.name),s=null,c=A(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Ao._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Po(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Fo(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Oo(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jo(t))return"Blackberry";if(Vo(t))return"Webos";if(Lo(t))return"Safari";if((t.includes("chrome/")||Mo(t))&&!t.includes("edge/"))return"Chrome";if(Uo(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Oo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/firefox\//i.test(e)}function Lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/crios\//i.test(e)}function Fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/iemobile/i.test(e)}function Uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/android/i.test(e)}function jo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/blackberry/i.test(e)}function Vo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/webos/i.test(e)}function Bo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function qo(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return Bo(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function zo(){return gt()&&10===document.documentMode}function Ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return Bo(e)||Uo(e)||Vo(e)||jo(e)||/windows phone/i.test(e)||Fo(e)}function Go(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Po(pt());break;case"Worker":t="".concat(Po(pt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Rn,"/").concat(r)}var Wo=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return y(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Mt(Ot().mark((function e(t){var n,r,i,a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=A(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=A(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ho=function(){function e(t,n,r){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yo(this),this.idTokenSubscription=new Yo(this),this.beforeStateQueue=new Wo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sa,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return y(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ua(t)),this._initializationPromise=this.queue(Mt(Ot().mark((function r(){var i,a;return Ot().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Do.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Mt(Ot().mark((function e(t){var n,r,i,a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Oa(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ko(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Pt(t):null)&&Oa(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Mt(Ot().mark((function e(t){var n,r=this,i=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Oa(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Mt(Ot().mark((function n(){return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ua(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new wt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Mt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Oa(n=t&&Ua(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Do.create(this,[Ua(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Mt(Ot().mark((function e(t){var n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Oa(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Oa(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Go(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Je({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qo(e){return Pt(e)}var Yo=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=Nt((function(e){return n.observer=e}))}return y(e,[{key:"next",get:function(){return Oa(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Xo(e,t,n){var r=Qo(e);Oa(r._canInitEmulator,r,"emulator-config-failed"),Oa(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Jo(t),o=function(e){var t=Jo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Zo(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:Zo(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Jo(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Zo(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var $o=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return y(e,[{key:"toJSON",value:function(){return La("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return La("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return La("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return La("not implemented")}}]),e}();function eu(e,t){return tu.apply(this,arguments)}function tu(){return(tu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:resetPassword",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(e,t){return ru.apply(this,arguments)}function ru(){return(ru=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iu(e,t){return au.apply(this,arguments)}function au(){return(au=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:update",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ou(e,t){return uu.apply(this,arguments)}function uu(){return(uu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Za(t,"POST","/v1/accounts:signInWithPassword",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function su(e,t){return cu.apply(this,arguments)}function cu(){return(cu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:sendOobCode",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lu(e,t){return fu.apply(this,arguments)}function fu(){return(fu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",su(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hu(e,t){return du.apply(this,arguments)}function du(){return(du=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",su(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pu(e,t){return vu.apply(this,arguments)}function vu(){return(vu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",su(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mu(e,t){return yu.apply(this,arguments)}function yu(){return(yu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",su(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gu(e,t){return ku.apply(this,arguments)}function ku(){return(ku=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Za(t,"POST","/v1/accounts:signInWithEmailLink",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bu(e,t){return wu.apply(this,arguments)}function wu(){return(wu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Za(t,"POST","/v1/accounts:signInWithEmailLink",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xu=function(e){k(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return y(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ou(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",gu(t,{email:this._email,oobCode:this._password}));case 5:Ca(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",nu(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",bu(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ca(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}($o);function _u(e,t){return Iu.apply(this,arguments)}function Iu(){return(Iu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Za(t,"POST","/v1/accounts:signInWithIdp",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eu=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return y(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return _u(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_u(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_u(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ca("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=la(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}($o);function Su(e,t){return Tu.apply(this,arguments)}function Tu(){return(Tu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:sendVerificationCode",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Au(){return(Au=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Za(t,"POST","/v1/accounts:signInWithPhoneNumber",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cu(){return(Cu=Mt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Za(t,"POST","/v1/accounts:signInWithPhoneNumber",Ha(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw no(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nu=Je({},"USER_NOT_FOUND","user-not-found");function Ru(){return(Ru=Mt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Za(t,"POST","/v1/accounts:signInWithPhoneNumber",Ha(t,r),Nu));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Du=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Au.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Cu.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ru.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}($o);var Pu=function(){function e(t){var n,r,i,a,o,u;d(this,e);var s=At(Ct(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Oa(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return y(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=At(Ct(e)).link,n=t?At(Ct(t)).deep_link_id:null,r=At(Ct(e)).deep_link_id;return(r?At(Ct(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(BS){return null}}}]),e}();var Ou=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return y(e,null,[{key:"credential",value:function(e,t){return xu._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Pu.parseLink(t);return Oa(n,"argument-error"),xu._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ou.PROVIDER_ID="password",Ou.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ou.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Lu=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return y(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Mu=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return y(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(Lu),Fu=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Oa(e.idToken||e.accessToken,"argument-error"),Eu._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Oa("providerId"in t&&"signInMethod"in t,"argument-error"),Eu._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Mu),Uu=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,"facebook.com")}return y(n,null,[{key:"credential",value:function(e){return Eu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(BS){return null}}}]),n}(Mu);Uu.FACEBOOK_SIGN_IN_METHOD="facebook.com",Uu.PROVIDER_ID="facebook.com";var ju=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return y(n,null,[{key:"credential",value:function(e,t){return Eu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(BS){return null}}}]),n}(Mu);ju.GOOGLE_SIGN_IN_METHOD="google.com",ju.PROVIDER_ID="google.com";var Vu=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,"github.com")}return y(n,null,[{key:"credential",value:function(e){return Eu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(BS){return null}}}]),n}(Mu);Vu.GITHUB_SIGN_IN_METHOD="github.com",Vu.PROVIDER_ID="github.com";var Bu=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return y(n,[{key:"_getIdTokenResponse",value:function(e){return _u(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_u(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_u(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}($o),qu=function(e){k(n,e);var t=I(n);function n(e){return d(this,n),Oa(e.startsWith("saml."),"argument-error"),t.call(this,e)}return y(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Bu.fromJSON(e);return Oa(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Bu._create(r,n)}catch(i){return null}}}]),n}(Lu),zu=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,"twitter.com")}return y(n,null,[{key:"credential",value:function(e,t){return Eu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(BS){return null}}}]),n}(Mu);function Ku(e,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Za(t,"POST","/v1/accounts:signUp",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}zu.TWITTER_SIGN_IN_METHOD="twitter.com",zu.PROVIDER_ID="twitter.com";var Wu=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return y(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Mt(Ot().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ao._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Hu(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Mt(Ot().mark((function t(n,r,i){var a;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Hu(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Hu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Qu(){return Qu=Mt(Ot().mark((function e(t){var n,r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qo(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Wu({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ku(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Wu._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}var Yu=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o,u;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(x(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return y(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(bt);function Xu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Yu._fromErrorAndOperation(e,n,t,r);throw n}))}function Ju(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Zu(e,t){return $u.apply(this,arguments)}function $u(){return $u=Mt(Ot().mark((function e(t,n){var r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pt(t),e.next=3,ns(!0,r,n);case 3:return e.t0=ao,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Ju(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function es(e,t){return ts.apply(this,arguments)}function ts(){return ts=Mt(Ot().mark((function e(t,n){var r,i,a=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=po,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Wu._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(e,t,n){return rs.apply(this,arguments)}function rs(){return(rs=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ko(n);case 2:i=Ju(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Oa(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function is(e,t){return as.apply(this,arguments)}function as(){return as=Mt(Ot().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,po(t,Xu(i,a,n,t),r);case 6:return Oa((o=e.sent).idToken,i,"internal-error"),Oa(u=ho(o.idToken),i,"internal-error"),s=u.sub,Oa(t.uid===s,i,"user-mismatch"),e.abrupt("return",Wu._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ca(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),as.apply(this,arguments)}function os(e,t){return us.apply(this,arguments)}function us(){return us=Mt(Ot().mark((function e(t,n){var r,i,a,o,u=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Xu(t,i,n);case 4:return a=e.sent,e.next=7,Wu._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}function ss(e,t){return cs.apply(this,arguments)}function cs(){return(cs=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",os(Qo(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(e,t){return fs.apply(this,arguments)}function fs(){return(fs=Mt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pt(t),e.next=3,ns(!1,r,n.providerId);case 3:return e.abrupt("return",es(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hs(e,t){return ds.apply(this,arguments)}function ds(){return(ds=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is(Pt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ps(e,t){return vs.apply(this,arguments)}function vs(){return(vs=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Za(t,"POST","/v1/accounts:signInWithCustomToken",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ms(){return(ms=Mt(Ot().mark((function e(t,n){var r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qo(t),e.next=3,ps(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Wu._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ys=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return y(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?gs._fromServerResponse(e,t):Ca(e,"internal-error")}}]),e}(),gs=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ys);function ks(e,t,n){var r;Oa((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Oa("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Oa(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Oa(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function bs(){return(bs=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pt(t),a={requestType:"PASSWORD_RESET",email:n},r&&ks(i,a,r),e.next=5,hu(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ws(){return(ws=Mt(Ot().mark((function e(t,n,r){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu(Pt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xs(){return(xs=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iu(Pt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _s(e,t){return Is.apply(this,arguments)}function Is(){return(Is=Mt(Ot().mark((function e(t,n){var r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pt(t),e.next=3,eu(r,{oobCode:n});case 3:i=e.sent,Oa(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Oa(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Oa(i.mfaInfo,r,"internal-error");case 13:Oa(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ys._fromServerResponse(Qo(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Es(){return(Es=Mt(Ot().mark((function e(t,n){var r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_s(Pt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(e,t,n){return Ts.apply(this,arguments)}function Ts(){return(Ts=Mt(Ot().mark((function e(t,n,r){var i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qo(t),e.next=3,Ku(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Wu._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function As(){return(As=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pt(t),a={requestType:"EMAIL_SIGNIN",email:n},Oa(r.handleCodeInApp,i,"argument-error"),r&&ks(i,a,r),e.next=6,pu(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cs(){return(Cs=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pt(t),Oa((a=Ou.credentialWithLink(n,r||ja()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",ss(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ns(e,t){return Rs.apply(this,arguments)}function Rs(){return(Rs=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:createAuthUri",Ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ds(){return(Ds=Mt(Ot().mark((function e(t,n){var r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va()?ja():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ns(Pt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ps(){return(Ps=Mt(Ot().mark((function e(t,n){var r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&ks(r.auth,a,n),e.next=8,lu(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Os(){return(Os=Mt(Ot().mark((function e(t,n,r){var i,a,o,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&ks(i.auth,o,r),e.next=8,mu(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ls(e,t){return Ms.apply(this,arguments)}function Ms(){return(Ms=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fs(){return(Fs=Mt(Ot().mark((function e(t,n){var r,i,a,o,u,s,c;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Pt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,po(a,Ls(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Us(e,t,n){return js.apply(this,arguments)}function js(){return(js=Mt(Ot().mark((function e(t,n,r){var i,a,o,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,po(t,nu(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vs=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Bs=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return y(n)}(Vs),qs=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return y(n)}(Vs),zs=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return y(n)}(Bs),Ks=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return y(n)}(Vs),Gs=function(e){k(n,e);var t=I(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return y(n)}(Bs);function Ws(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ho(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Vs(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new qs(a,i);case"github.com":return new zs(a,i);case"google.com":return new Ks(a,i);case"twitter.com":return new Gs(a,i,e.screenName||null);case"custom":case"anonymous":return new Vs(a,null);default:return new Vs(a,r,i)}}(n)}var Hs=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.auth=r}return y(e,[{key:"toJSON",value:function(){return{multiFactorSession:Je({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Qs=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return y(e,[{key:"resolveSignIn",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Qo(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ys._fromServerResponse(r,e)}));Oa(i.mfaPendingCredential,r,"internal-error");var o=Hs._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Mt(Ot().mark((function e(t){var a,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Wu._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Oa(n.user,r,"internal-error"),e.abrupt("return",Wu._forOperation(n.user,n.operationType,u));case 17:Ca(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Ys(e,t){return Qa(e,"POST","/v2/accounts/mfaEnrollment:start",Ha(e,t))}var Xs=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ys._fromServerResponse(t.auth,e)})))}))}return y(e,[{key:"getSession",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Hs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Mt(Ot().mark((function e(t,n){var r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,po(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Mt(Ot().mark((function e(t){var n,r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,po(this.user,Qa(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Ha(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Js=new WeakMap;var Zs="__sak",$s=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return y(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch(BS){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ec=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=pt();return Lo(e)||Bo(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ko(),e._shouldAllowMigration=!0,e}return y(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);zo()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Mt(Ot().mark((function e(t,r){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(b(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Mt(Ot().mark((function e(t){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(b(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(b(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}($s);ec.type="LOCAL";var tc=ec,nc=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return y(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}($s);nc.type="SESSION";var rc=nc;function ic(e){return Promise.all(e.map(function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ac=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return y(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Mt(Ot().mark((function e(t){var n,r,i,a,o,u,s,c;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ic(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function oc(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ac.receivers=[];var uc=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return y(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Mt(Ot().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=oc("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function sc(){return window}function cc(){return"undefined"!==typeof sc().WorkerGlobalScope&&"function"===typeof sc().importScripts}function lc(){return fc.apply(this,arguments)}function fc(){return(fc=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function hc(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var dc="firebaseLocalStorageDb",pc="firebaseLocalStorage",vc="fbase_key",mc=function(){function e(t){d(this,e),this.request=t}return y(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function yc(e,t){return e.transaction([pc],t?"readwrite":"readonly").objectStore(pc)}function gc(){var e=indexedDB.deleteDatabase(dc);return new mc(e).toPromise()}function kc(){var e=indexedDB.open(dc,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(pc,{keyPath:vc})}catch(r){n(r)}})),e.addEventListener("success",Mt(Ot().mark((function n(){var r;return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(pc)){n.next=12;break}return r.close(),n.next=5,gc();case 5:return n.t0=t,n.next=8,kc();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function bc(e,t,n){return wc.apply(this,arguments)}function wc(){return wc=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=yc(t,!0).put((Je(i={},vc,n),Je(i,"value",r),i)),e.abrupt("return",new mc(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),wc.apply(this,arguments)}function xc(e,t){return _c.apply(this,arguments)}function _c(){return _c=Mt(Ot().mark((function e(t,n){var r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yc(t,!1).get(n),e.next=3,new mc(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),_c.apply(this,arguments)}function Ic(e,t){var n=yc(e,!0).delete(t);return new mc(n).toPromise()}var Ec=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return y(e,[{key:"_openDb",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,kc();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cc()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Mt(Ot().mark((function e(){var t=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ac._getInstance(cc()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Mt(Ot().mark((function e(n,r){var i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lc();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new uc(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&hc()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,kc();case 5:return t=e.sent,e.next=8,bc(t,Zs,"1");case 8:return e.next=10,Ic(t,Zs);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Mt(Ot().mark((function e(t,n){var r=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return bc(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return xc(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Mt(Ot().mark((function e(t){var n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ic(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=yc(e,!1).getAll();return new mc(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=A(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Mt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ec.type="LOCAL";var Sc=Ec;function Tc(e,t){return Qa(e,"POST","/v2/accounts/mfaSignIn:start",Ha(e,t))}function Ac(e){return Cc.apply(this,arguments)}function Cc(){return(Cc=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nc(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Na("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Rc(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Dc=1e12,Pc=function(){function e(t){d(this,e),this.auth=t,this.counter=Dc,this._widgets=new Map}return y(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Oc(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Dc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Dc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Dc,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Oc=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Oa(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return y(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Lc=Rc("rcb"),Mc=new qa(3e4,6e4),Fc="https://www.google.com/recaptcha/api.js?",Uc=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=sc().grecaptcha)||void 0===t?void 0:t.render)}return y(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Oa(jc(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(sc().grecaptcha):new Promise((function(r,i){var a=sc().setTimeout((function(){i(Na(e,"network-request-failed"))}),Mc.get());sc()[Lc]=function(){sc().clearTimeout(a),delete sc()[Lc];var o=sc().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Na(e,"internal-error"))},Nc("".concat(Fc,"?").concat(Tt({onload:Lc,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Na(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=sc().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function jc(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Vc=function(){function e(){d(this,e)}return y(e,[{key:"load",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Pc(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Bc="recaptcha",qc={theme:"light",type:"image"},zc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},qc),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=Bc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qo(r),this.isInvisible="invisible"===this.parameters.size,Oa("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Oa(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vc:new Uc,this.validateStartingState()}return y(e,[{key:"verify",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r,i=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Oa(!this.parameters.sitekey,this.auth,"argument-error"),Oa(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oa("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=sc()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Oa(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Mt(Ot().mark((function e(){var t,n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Oa(Va()&&!cc(),this.auth,"internal-error"),e.next=3,Kc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ac(this.auth);case 8:Oa(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Oa(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Kc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Gc=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return y(e,[{key:"confirm",value:function(e){var t=Du._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Wc(){return(Wc=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qo(t),e.next=3,Xc(i,n,Pt(r));case 3:return a=e.sent,e.abrupt("return",new Gc(a,(function(e){return ss(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hc(e,t,n){return Qc.apply(this,arguments)}function Qc(){return(Qc=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pt(t),e.next=3,ns(!1,i,"phone");case 3:return e.next=5,Xc(i.auth,n,Pt(r));case 5:return a=e.sent,e.abrupt("return",new Gc(a,(function(e){return ls(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yc(){return(Yc=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pt(t),e.next=3,Xc(i.auth,n,Pt(r));case 3:return a=e.sent,e.abrupt("return",new Gc(a,(function(e){return hs(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xc(e,t,n){return Jc.apply(this,arguments)}function Jc(){return Jc=Mt(Ot().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Oa("string"===typeof a,t,"argument-error"),Oa(r.type===Bc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Oa("enroll"===u.type,t,"internal-error"),e.next=13,Ys(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Oa("signin"===u.type,t,"internal-error"),Oa(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Tc(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Su(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Jc.apply(this,arguments)}function Zc(){return(Zc=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,es(Pt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $c=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Qo(t)}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return Xc(this.auth,e,Pt(t))}}],[{key:"credential",value:function(e,t){return Du._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Du._fromTokenResponse(n,r):null}}]),e}();function el(e,t){return t?Ua(t):(Oa(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}$c.PROVIDER_ID="phone",$c.PHONE_SIGN_IN_METHOD="phone";var tl=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return _u(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return _u(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return _u(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}($o);function nl(e){return os(e.auth,new tl(e),e.bypassAuthState)}function rl(e){var t=e.auth,n=e.user;return Oa(n,t,"internal-error"),is(n,new tl(e),e.bypassAuthState)}function il(e){return al.apply(this,arguments)}function al(){return(al=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Oa(r=t.user,n,"internal-error"),e.abrupt("return",es(r,new tl(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ol=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return y(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Mt(Ot().mark((function t(n,r){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Mt(Ot().mark((function e(t){var n,r,i,a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nl;case"linkViaPopup":case"linkViaRedirect":return il;case"reauthViaPopup":case"reauthViaRedirect":return rl;default:Ca(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ul=new qa(2e3,1e4);function sl(e,t,n){return cl.apply(this,arguments)}function cl(){return(cl=Mt(Ot().mark((function e(t,n,r){var i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qo(t),Da(t,n,Lu),a=el(i,r),o=new dl(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ll(){return(ll=Mt(Ot().mark((function e(t,n,r){var i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Da((i=Pt(t)).auth,n,Lu),a=el(i.auth,r),o=new dl(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fl(e,t,n){return hl.apply(this,arguments)}function hl(){return(hl=Mt(Ot().mark((function e(t,n,r){var i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Da((i=Pt(t)).auth,n,Lu),a=el(i.auth,r),o=new dl(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dl=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=x(u),u}return y(n,[{key:"executeNotNull",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Oa(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Mt(Ot().mark((function e(){var t,n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ma(1===this.filter.length,"Popup operations only handle one event"),t=oc(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Na(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Na(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Na(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,ul.get())}()}}]),n}(ol);dl.currentPopupAction=null;var pl=new Map,vl=function(e){k(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return y(n,[{key:"execute",value:function(){var e=Mt(Ot().mark((function e(){var t,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pl.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ml(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ca(b(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:pl.set(this.auth._key(),t);case 21:return this.bypassAuthState||pl.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Mt(Ot().mark((function e(t){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ca(b(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ca(b(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ol);function ml(e,t){return yl.apply(this,arguments)}function yl(){return(yl=Mt(Ot().mark((function e(t,n){var r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xl(n),i=wl(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gl(e,t){return kl.apply(this,arguments)}function kl(){return(kl=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wl(t)._set(xl(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bl(e,t){pl.set(e._key(),t)}function wl(e){return Ua(e._redirectPersistence)}function xl(e){return Ro("pendingRedirect",e.config.apiKey,e.name)}function _l(e,t,n){return function(e,t,n){return Il.apply(this,arguments)}(e,t,n)}function Il(){return(Il=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qo(t),Da(t,n,Lu),e.next=4,i._initializationPromise;case 4:return a=el(i,r),e.next=7,gl(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function El(e,t,n){return function(e,t,n){return Sl.apply(this,arguments)}(e,t,n)}function Sl(){return(Sl=Mt(Ot().mark((function e(t,n,r){var i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Da((i=Pt(t)).auth,n,Lu),e.next=4,i.auth._initializationPromise;case 4:return a=el(i.auth,r),e.next=7,gl(a,i.auth);case 7:return e.next=9,Pl(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tl(e,t,n){return function(e,t,n){return Al.apply(this,arguments)}(e,t,n)}function Al(){return(Al=Mt(Ot().mark((function e(t,n,r){var i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Da((i=Pt(t)).auth,n,Lu),e.next=4,i.auth._initializationPromise;case 4:return a=el(i.auth,r),e.next=7,ns(!1,i,n.providerId);case 7:return e.next=9,gl(a,i.auth);case 9:return e.next=11,Pl(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cl(e,t){return Nl.apply(this,arguments)}function Nl(){return(Nl=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qo(t)._initializationPromise;case 2:return e.abrupt("return",Rl(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rl(e,t){return Dl.apply(this,arguments)}function Dl(){return Dl=Mt(Ot().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Qo(t),a=el(i,n),o=new vl(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Dl.apply(this,arguments)}function Pl(e){return Ol.apply(this,arguments)}function Ol(){return(Ol=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oc("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ll=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return y(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Fl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Na(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ml(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ml(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ml(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Fl(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ul(e){return jl.apply(this,arguments)}function jl(){return jl=Mt(Ot().mark((function e(t){var n,r=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Qa(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),jl.apply(this,arguments)}var Vl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bl=/^https?/;function ql(){return(ql=Mt(Ot().mark((function e(t){var n,r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ul(t);case 4:n=e.sent,r=n.authorizedDomains,i=A(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!zl(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ca(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function zl(e){var t=ja(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Bl.test(r))return!1;if(Vl.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Kl=new qa(3e4,6e4);function Gl(){var e=sc().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Wl=null;function Hl(e){return Wl=Wl||function(e){return new Promise((function(t,n){var r,i,a;function o(){Gl(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Gl(),n(Na(e,"network-request-failed"))},timeout:Kl.get()})}if(null===(i=null===(r=sc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=sc().gapi)||void 0===a?void 0:a.load)){var u=Rc("iframefcb");return sc()[u]=function(){gapi.load?o():n(Na(e,"network-request-failed"))},Nc("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Wl=null,e}))}(e),Wl}var Ql=new qa(5e3,15e3),Yl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jl(e){var t=e.config;Oa(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?za(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Rn},i=Xl.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Tt(r).slice(1))}function Zl(e){return $l.apply(this,arguments)}function $l(){return $l=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hl(t);case 2:return n=e.sent,Oa(r=sc().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Jl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yl,dontclear:!0},(function(e){return new Promise(function(){var n=Mt(Ot().mark((function n(r,i){var a,o,u;return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){sc().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Na(t,"network-request-failed"),o=sc().setTimeout((function(){i(a)}),Ql.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),$l.apply(this,arguments)}var ef={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tf="_blank",nf="http://localhost",rf=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return y(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function af(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ef),{width:r.toString(),height:i.toString(),top:a,left:o}),c=pt().toLowerCase();n&&(u=Mo(c)?tf:n),Oo(c)&&(t=t||nf,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(qo(c)&&"_self"!==u)return of(t||"",u),new rf(null);var h=window.open(t||"",u,f);Oa(h,e,"popup-blocked");try{h.focus()}catch(d){}return new rf(h)}function of(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var uf="__/auth/handler",sf="emulator/auth/handler";function cf(e,t,n,r,i,a){Oa(e.config.authDomain,e,"auth-domain-config-required"),Oa(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Rn,eventId:i};if(t instanceof Lu){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=l(s[u],2),f=c[0],h=c[1];o[f]=h}}if(t instanceof Mu){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(uf);return za(t,sf)}(e),"?").concat(Tt(p).slice(1))}var lf="webStorageSupport",ff=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rc,this._completeRedirectFn=Rl,this._overrideRedirectResult=bl}return y(e,[{key:"_openPopup",value:function(){var e=Mt(Ot().mark((function e(t,n,r,i){var a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ma(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=cf(t,n,r,ja(),i),e.abrupt("return",af(t,o,oc()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Mt(Ot().mark((function e(t,n,r,i){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=cf(t,n,r,ja(),i),sc().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Ma(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zl(t);case 2:return n=e.sent,r=new Ll(t),n.register("authEvent",(function(e){return Oa(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(lf,{type:lf},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[lf];void 0!==i&&t(!!i),Ca(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ql.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ko()||Lo()||Bo()}}]),e}(),hf=ff,df=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return y(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Qa(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ha(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Qa(e,"POST","/v2/accounts/mfaSignIn:finalize",Ha(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return y(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return La("unexpected MultiFactorSessionType")}}}]),e}()),pf=function(){function e(){d(this,e)}return y(e,null,[{key:"assertion",value:function(e){return df._fromCredential(e)}}]),e}();pf.FACTOR_ID="phone";var vf="@firebase/auth",mf="0.21.3",yf=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return y(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Oa(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var gf;!function(e){var t;null===(t=lt())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function kf(){return window}gf="Browser",In(new Ft("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Oa(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Oa(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:gf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Go(gf)},i=new Ho(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ua);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),In(new Ft("auth-internal",(function(e){return function(e){return new yf(e)}(Qo(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Fn(vf,mf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(gf)),Fn(vf,mf,"esm2017");function bf(e,t,n){return wf.apply(this,arguments)}function wf(){return wf=Mt(Ot().mark((function e(t,n,r){var i,a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kf(),o=a.BuildInfo,Ma(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Tf(n.sessionId);case 4:return u=e.sent,s={},Bo()?s.ibi=o.packageName:Uo()?s.apn=o.packageName:Ca(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",cf(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),wf.apply(this,arguments)}function xf(){return(xf=Mt(Ot().mark((function e(t){var n,r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kf(),r=n.BuildInfo,i={},Bo()?i.iosBundleId=r.packageName:Uo()?i.androidPackageName=r.packageName:Ca(t,"operation-not-supported-in-this-environment"),e.next=5,Ul(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _f(e){var t=kf().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function If(e,t,n){return Ef.apply(this,arguments)}function Ef(){return Ef=Mt(Ot().mark((function e(t,n,r){var i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kf(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Na(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Uo()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ef.apply(this,arguments)}function Sf(e){var t,n,r,i,a,o,u,s,c,l,f=kf();Oa("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Oa("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Oa("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oa("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oa("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Tf(e){return Af.apply(this,arguments)}function Af(){return(Af=Mt(Ot().mark((function e(t){var n,r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Cf(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cf(e){if(Ma(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Nf=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return y(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ca(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ll);function Rf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Mf(),postBody:null,tenantId:e.tenantId,error:Na(e,"no-auth-event")}}function Df(e,t){return Ff()._set(Uf(e),t)}function Pf(e){return Of.apply(this,arguments)}function Of(){return(Of=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ff()._get(Uf(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Ff()._remove(Uf(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lf(e,t){var n,r,i=function(e){var t=jf(e),n=t.link?decodeURIComponent(t.link):void 0,r=jf(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return jf(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=jf(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Na(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Mf(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ff(){return Ua(tc)}function Uf(e){return Ro("authEvent",e.config.apiKey,e.name)}function jf(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=T(e.split("?"));t[0];return At(t.slice(1).join("?"))}var Vf=function(){function e(){d(this,e),this._redirectPersistence=rc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Rl,this._overrideRedirectResult=bl}return y(e,[{key:"_initialize",value:function(){var e=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Nf(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ca(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Mt(Ot().mark((function e(t,n,r,i){var a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sf(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),pl.clear(),e.next=10,this._originValidation(t);case 10:return o=Rf(t,r,i),e.next=13,Df(t,o);case 13:return e.next=15,bf(t,o,n);case 15:return u=e.sent,e.next=18,_f(u);case 18:return s=e.sent,e.abrupt("return",If(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return xf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=kf(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Mt(Ot().mark((function n(){return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pf(e);case 2:t.onEvent(qf());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Mt(Ot().mark((function n(r){var i,a;return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Pf(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Lf(i,r.url)),t.onEvent(a||qf());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");kf().handleOpenURL=function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Bf=Vf;function qf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Na("no-auth-event")}}function zf(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Kf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return!("file:"!==zf()&&"ionic:"!==zf()&&"capacitor:"!==zf()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gf(){return gt()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Wf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return/Edge\/\d+/.test(e)}function Hf(){try{var e=self.localStorage,t=oc();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt();return Gf()||Wf(e)}()||kt()}catch(n){return Qf()&&kt()}return!1}function Qf(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Yf(){return("http:"===zf()||"https:"===zf()||mt()||Kf())&&!(yt()||vt())&&Hf()&&!Qf()}function Xf(){return Kf()&&"undefined"!==typeof document}function Jf(){return Zf.apply(this,arguments)}function Zf(){return(Zf=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xf()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $f={LOCAL:"local",NONE:"none",SESSION:"session"},eh=Oa,th="persistence";function nh(e,t){eh(Object.values($f).includes(t),e,"invalid-persistence-type"),yt()?eh(t!==$f.SESSION,e,"unsupported-persistence-type"):vt()?eh(t===$f.NONE,e,"unsupported-persistence-type"):Qf()?eh(t===$f.NONE||t===$f.LOCAL&&kt(),e,"unsupported-persistence-type"):eh(t===$f.NONE||Hf(),e,"unsupported-persistence-type")}function rh(e){return ih.apply(this,arguments)}function ih(){return(ih=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=ah(),r=Ro(th,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ah(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var oh=Oa,uh=function(){function e(){d(this,e),this.browserResolver=Ua(hf),this.cordovaResolver=Ua(Bf),this.underlyingResolver=null,this._redirectPersistence=rc,this._completeRedirectFn=Rl,this._overrideRedirectResult=bl}return y(e,[{key:"_initialize",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Mt(Ot().mark((function e(t,n,r,i){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Mt(Ot().mark((function e(t,n,r,i){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Xf()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return oh(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jf();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function sh(e){return e.unwrap()}function ch(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new ph(e,function(e,t){var n,r=Pt(e),i=t;return Oa(t.customData.operationType,r,"argument-error"),Oa(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Qs._fromError(r,i)}(e,t));else if(r){var i=lh(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function lh(e){var t=(e instanceof bt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof bt)&&"temporaryProof"in t&&"phoneNumber"in t)return $c.credentialFromResult(e);var n,r=t.providerId;if(!r||r===va)return null;switch(r){case pa:n=ju;break;case ha:n=Uu;break;case da:n=Vu;break;case ma:n=zu;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Bu._create(r,u):Eu._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Fu(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof bt?n.credentialFromError(e):n.credentialFromResult(e)}function fh(e,t){return t.catch((function(t){throw t instanceof bt&&ch(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,lh(t)),additionalUserInfo:Ws(e),user:vh.getOrCreate(r)}}))}function hh(e,t){return dh.apply(this,arguments)}function dh(){return(dh=Mt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return fh(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ph=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return y(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return fh(sh(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),vh=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=Pt(e);return Js.has(t)||Js.set(t,Xs._fromUser(t)),Js.get(t)}(t)}return y(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fh(this.auth,ls(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hh(this.auth,Hc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fh(this.auth,fl(this._delegate,t,uh)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rh(Qo(this.auth));case 2:return e.abrupt("return",Tl(this._delegate,t,uh));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fh(this.auth,hs(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return hh(this.auth,function(e,t,n){return Yc.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return fh(this.auth,function(e,t,n){return ll.apply(this,arguments)}(this._delegate,e,uh))}},{key:"reauthenticateWithRedirect",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rh(Qo(this.auth));case 2:return e.abrupt("return",El(this._delegate,t,uh));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ps.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zu(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Us(Pt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Us(Pt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Zc.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Fs.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Os.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();vh.USER_MAP=new WeakMap;var mh=Oa,yh=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;mh(r,"invalid-api-key",{appName:t.name}),mh(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?uh:void 0;this._delegate=n.initialize({options:{persistence:kh(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Ia),this.linkUnderlyingAuth()}return y(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?vh.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Xo(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return xs.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return _s(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ws.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fh(this._delegate,Ss(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ds.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Pu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mh(Yf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Cl(this._delegate,uh);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",fh(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Qo(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=gh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=gh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return As.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return bs.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nh(this._delegate,t),e.t0=t,e.next=e.t0===$f.SESSION?4:e.t0===$f.LOCAL?6:e.t0===$f.NONE?11:13;break;case 4:return n=rc,e.abrupt("break",14);case 6:return e.next=8,Ua(Sc)._isAvailable();case 8:return r=e.sent,n=r?Sc:tc,e.abrupt("break",14);case 11:return n=No,e.abrupt("break",14);case 13:return e.abrupt("return",Ca("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return fh(this._delegate,function(e){return Qu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return fh(this._delegate,ss(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return fh(this._delegate,function(e,t){return ms.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return fh(this._delegate,function(e,t,n){return ss(Pt(e),Ou.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return fh(this._delegate,function(e,t,n){return Cs.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return hh(this._delegate,function(e,t,n){return Wc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mh(Yf(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",fh(this._delegate,sl(this._delegate,t,uh)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mh(Yf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,rh(this._delegate);case 3:return e.abrupt("return",_l(this._delegate,t,uh));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Es.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function gh(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&vh.getOrCreate(e))},error:t,complete:n}}function kh(e,t){var n=function(e,t){var n=ah();if(!n)return[];var r=Ro(th,e,t);switch(n.getItem(r)){case $f.NONE:return[No];case $f.LOCAL:return[Sc,rc];case $f.SESSION:return[rc];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Sc)||n.push(Sc),"undefined"!==typeof window)for(var r=0,i=[tc,rc];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(No)||n.push(No),n}yh.Persistence=$f;var bh=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new $c(sh(ur.auth()))}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return $c.credential(e,t)}}]),e}();bh.PHONE_SIGN_IN_METHOD=$c.PHONE_SIGN_IN_METHOD,bh.PROVIDER_ID=$c.PROVIDER_ID;var wh,xh=Oa,_h=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ur.app();d(this,e),xh(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new zc(t,n,i.auth()),this.type=this._delegate.type}return y(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(wh=ur).INTERNAL.registerComponent(new Ft("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new yh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ya,PASSWORD_RESET:ga,RECOVER_EMAIL:ka,REVERT_SECOND_FACTOR_ADDITION:ba,VERIFY_AND_CHANGE_EMAIL:wa,VERIFY_EMAIL:xa}},EmailAuthProvider:Ou,FacebookAuthProvider:Uu,GithubAuthProvider:Vu,GoogleAuthProvider:ju,OAuthProvider:Fu,SAMLAuthProvider:qu,PhoneAuthProvider:bh,PhoneMultiFactorGenerator:pf,RecaptchaVerifier:_h,TwitterAuthProvider:zu,Auth:yh,AuthCredential:$o,Error:bt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),wh.registerVersion("@firebase/auth-compat","0.3.3");var Ih,Eh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Sh={},Th=Th||{},Ah=Eh||self;function Ch(){}function Nh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Rh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Dh="closure_uid_"+(1e9*Math.random()>>>0),Ph=0;function Oh(e,t,n){return e.call.apply(e.bind,arguments)}function Lh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Mh(e,t,n){return(Mh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Oh:Lh).apply(null,arguments)}function Fh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Uh(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function jh(){this.s=this.s,this.o=this.o}jh.prototype.s=!1,jh.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Dh)&&e[Dh]||(e[Dh]=++Ph))},jh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Vh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Bh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function qh(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Nh(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function zh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}zh.prototype.h=function(){this.defaultPrevented=!0};var Kh=function(){if(!Ah.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ah.addEventListener("test",Ch,t),Ah.removeEventListener("test",Ch,t)}catch(n){}return e}();function Gh(e){return/^[\s\xa0]*$/.test(e)}var Wh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Hh(e,t){return e<t?-1:e>t?1:0}function Qh(){var e=Ah.navigator;return e&&(e=e.userAgent)?e:""}function Yh(e){return-1!=Qh().indexOf(e)}function Xh(e){return Xh[" "](e),e}Xh[" "]=Ch;var Jh,Zh=Yh("Opera"),$h=Yh("Trident")||Yh("MSIE"),ed=Yh("Edge"),td=ed||$h,nd=Yh("Gecko")&&!(-1!=Qh().toLowerCase().indexOf("webkit")&&!Yh("Edge"))&&!(Yh("Trident")||Yh("MSIE"))&&!Yh("Edge"),rd=-1!=Qh().toLowerCase().indexOf("webkit")&&!Yh("Edge");function id(){var e=Ah.document;return e?e.documentMode:void 0}e:{var ad="",od=function(){var e=Qh();return nd?/rv:([^\);]+)(\)|;)/.exec(e):ed?/Edge\/([\d\.]+)/.exec(e):$h?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):rd?/WebKit\/(\S+)/.exec(e):Zh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(od&&(ad=od?od[1]:""),$h){var ud=id();if(null!=ud&&ud>parseFloat(ad)){Jh=String(ud);break e}}Jh=ad}var sd,cd={};function ld(){return function(e){var t=cd;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Wh(String(Jh)).split("."),n=Wh("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Hh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Hh(0==a[2].length,0==o[2].length)||Hh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ah.document&&$h){var fd=id();sd=fd||(parseInt(Jh,10)||void 0)}else sd=void 0;var hd=sd;function dd(e,t){if(zh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(nd){e:{try{Xh(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:pd[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&dd.X.h.call(this)}}Uh(dd,zh);var pd={2:"touch",3:"pen",4:"mouse"};dd.prototype.h=function(){dd.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var vd="closure_listenable_"+(1e6*Math.random()|0),md=0;function yd(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++md,this.ba=this.ea=!1}function gd(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function kd(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function bd(e){var t={};for(var n in e)t[n]=e[n];return t}var wd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xd(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<wd.length;a++)n=wd[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _d(e){this.src=e,this.g={},this.h=0}function Id(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Vh(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(gd(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ed(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}_d.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ed(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new yd(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Sd="closure_lm_"+(1e6*Math.random()|0),Td={};function Ad(e,t,n,r,i){if(r&&r.once)return Nd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ad(e,t[a],n,r,i);return null}return n=Fd(n),e&&e[vd]?e.N(t,n,Rh(r)?!!r.capture:!!r,i):Cd(e,t,n,!1,r,i)}function Cd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Rh(i)?!!i.capture:!!i,u=Ld(e);if(u||(e[Sd]=u=new _d(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Od;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Kh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Pd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Nd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Nd(e,t[a],n,r,i);return null}return n=Fd(n),e&&e[vd]?e.O(t,n,Rh(r)?!!r.capture:!!r,i):Cd(e,t,n,!0,r,i)}function Rd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Rd(e,t[a],n,r,i);else r=Rh(r)?!!r.capture:!!r,n=Fd(n),e&&e[vd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ed(a=e.g[t],n,r,i))&&(gd(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ld(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ed(t,n,r,i)),(n=-1<e?t[e]:null)&&Dd(n))}function Dd(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[vd])Id(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Pd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ld(t))?(Id(n,e),0==n.h&&(n.src=null,t[Sd]=null)):gd(e)}}}function Pd(e){return e in Td?Td[e]:Td[e]="on"+e}function Od(e,t){if(e.ba)e=!0;else{t=new dd(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Dd(e),e=n.call(r,t)}return e}function Ld(e){return(e=e[Sd])instanceof _d?e:null}var Md="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fd(e){return"function"===typeof e?e:(e[Md]||(e[Md]=function(t){return e.handleEvent(t)}),e[Md])}function Ud(){jh.call(this),this.i=new _d(this),this.P=this,this.I=null}function jd(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new zh(t,e);else if(t instanceof zh)t.target=t.target||e;else{var i=t;xd(t=new zh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Vd(o,r,!0,t)&&i}if(i=Vd(o=t.g=e,r,!0,t)&&i,i=Vd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Vd(o=t.g=n[a],r,!1,t)&&i}function Vd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Id(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Uh(Ud,jh),Ud.prototype[vd]=!0,Ud.prototype.removeEventListener=function(e,t,n,r){Rd(this,e,t,n,r)},Ud.prototype.M=function(){if(Ud.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gd(n[r]);delete t.g[e],t.h--}}this.I=null},Ud.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ud.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Bd=Ah.JSON.stringify;function qd(){var e=Xd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var zd,Kd=function(){function e(){d(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=Gd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Gd=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Wd}),(function(e){return e.reset()})),Wd=function(){function e(){d(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Hd(e){Ah.setTimeout((function(){throw e}),0)}function Qd(e,t){zd||function(){var e=Ah.Promise.resolve(void 0);zd=function(){e.then(Jd)}}(),Yd||(zd(),Yd=!0),Xd.add(e,t)}var Yd=!1,Xd=new Kd;function Jd(){for(var e;e=qd();){try{e.h.call(e.g)}catch(n){Hd(n)}var t=Gd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Yd=!1}function Zd(e,t){Ud.call(this),this.h=e||1,this.g=t||Ah,this.j=Mh(this.lb,this),this.l=Date.now()}function $d(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function ep(e,t,n){if("function"===typeof e)n&&(e=Mh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Mh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ah.setTimeout(e,t||0)}function tp(e){e.g=ep((function(){e.g=null,e.i&&(e.i=!1,tp(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Uh(Zd,Ud),(Ih=Zd.prototype).ca=!1,Ih.R=null,Ih.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),jd(this,"tick"),this.ca&&($d(this),this.start()))}},Ih.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ih.M=function(){Zd.X.M.call(this),$d(this),delete this.g};var np=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:tp(this)}},{key:"M",value:function(){ca(b(n.prototype),"M",this).call(this),this.g&&(Ah.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(jh);function rp(e){jh.call(this),this.h=e,this.g={}}Uh(rp,jh);var ip=[];function ap(e,t,n,r){Array.isArray(n)||(n&&(ip[0]=n.toString()),n=ip);for(var i=0;i<n.length;i++){var a=Ad(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function op(e){kd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Dd(e)}),e),e.g={}}function up(){this.g=!0}function sp(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Bd(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}rp.prototype.M=function(){rp.X.M.call(this),op(this)},rp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},up.prototype.Aa=function(){this.g=!1},up.prototype.info=function(){};var cp={},lp=null;function fp(){return lp=lp||new Ud}function hp(e){zh.call(this,cp.Pa,e)}function dp(e){var t=fp();jd(t,new hp(t))}function pp(e,t){zh.call(this,cp.STAT_EVENT,e),this.stat=t}function vp(e){var t=fp();jd(t,new pp(t,e))}function mp(e,t){zh.call(this,cp.Qa,e),this.size=t}function yp(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ah.setTimeout((function(){e()}),t)}cp.Pa="serverreachability",Uh(hp,zh),cp.STAT_EVENT="statevent",Uh(pp,zh),cp.Qa="timingevent",Uh(mp,zh);var gp={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},kp={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function bp(){}function wp(e){return e.h||(e.h=e.i())}function xp(){}bp.prototype.h=null;var _p,Ip={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ep(){zh.call(this,"d")}function Sp(){zh.call(this,"c")}function Tp(){}function Ap(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new rp(this),this.O=Np,e=td?125:void 0,this.T=new Zd(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Cp}function Cp(){this.i=null,this.g="",this.h=!1}Uh(Ep,zh),Uh(Sp,zh),Uh(Tp,bp),Tp.prototype.g=function(){return new XMLHttpRequest},Tp.prototype.i=function(){return{}},_p=new Tp;var Np=45e3,Rp={},Dp={};function Pp(e,t,n){e.K=1,e.v=Zp(Hp(t)),e.s=n,e.P=!0,Op(e,null)}function Op(e,t){e.F=Date.now(),Up(e),e.A=Hp(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),fv(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Cp,e.g=hm(e.l,n?t:null,!e.s),0<e.N&&(e.L=new np(Mh(e.La,e,e.g),e.N)),ap(e.S,e.g,"readystatechange",e.ib),t=e.H?bd(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),dp(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Lp(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Mp(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Fp(e,n))==Dp){4==t&&(e.o=4,vp(14),i=!1),sp(e.j,e.m,null,"[Incomplete Response]");break}if(r==Rp){e.o=4,vp(15),sp(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}sp(e.j,e.m,r,null),zp(e,r)}Lp(e)&&r!=Dp&&r!=Rp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,vp(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),im(t),t.K=!0,vp(11))):(sp(e.j,e.m,n,"[Invalid Chunked Response]"),qp(e),Bp(e))}function Fp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Dp:(n=Number(t.substring(n,r)),isNaN(n)?Rp:(r+=1)+n>t.length?Dp:(t=t.substr(r,n),e.C=r+n,t))}function Up(e){e.V=Date.now()+e.O,jp(e,e.O)}function jp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=yp(Mh(e.gb,e),t)}function Vp(e){e.B&&(Ah.clearTimeout(e.B),e.B=null)}function Bp(e){0==e.l.G||e.I||um(e.l,e)}function qp(e){Vp(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,$d(e.T),op(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function zp(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||kv(n.h,e)))if(!e.J&&kv(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;om(n),Xv(n)}rm(n),vp(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=yp(Mh(n.cb,n),6e3));if(1>=gv(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else cm(n,11)}else if((e.J||n.g==e)&&om(n),!Gh(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(bv(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Jp(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=fm(r,r.H?r.ka:null,r.V),d.J){wv(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Vp(p),Up(p)),r.g=d}else nm(r);0<n.i.length&&Zv(n)}else"stop"!=a[0]&&"close"!=a[0]||cm(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?cm(n,7):Yv(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}dp()}catch(a){}}function Kp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Nh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Nh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Nh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ih=Ap.prototype).setTimeout=function(e){this.O=e},Ih.ib=function(e){e=e.target;var t=this.L;t&&3==zv(e)?t.l():this.La(e)},Ih.La=function(e){try{if(e==this.g)e:{var t=zv(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||td||this.g&&(this.h.h||this.g.fa()||Kv(this.g)))){this.I||4!=t||7==n||dp(),Vp(this);var r=this.g.aa();this.Y=r;t:if(Lp(this)){var i=Kv(this.g);e="";var a=i.length,o=4==zv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qp(this),Bp(this);var u="";break t}this.h.i=new Ah.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gh(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,vp(12),qp(this),Bp(this);break e}sp(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zp(this,r)}this.P?(Mp(this,t,u),td&&this.i&&3==t&&(ap(this.S,this.T,"tick",this.hb),this.T.start())):(sp(this.j,this.m,u,null),zp(this,u)),4==t&&qp(this),this.i&&!this.I&&(4==t?um(this.l,this):(this.i=!1,Up(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,vp(12)):(this.o=0,vp(13)),qp(this),Bp(this)}}}catch(t){}},Ih.hb=function(){if(this.g){var e=zv(this.g),t=this.g.fa();this.C<t.length&&(Vp(this),Mp(this,e,t),this.i&&4!=e&&Up(this))}},Ih.cancel=function(){this.I=!0,qp(this)},Ih.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(dp(),vp(17)),qp(this),this.o=2,Bp(this)):jp(this,this.V-e)};var Gp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wp(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Wp){this.h=void 0!==t?t:e.h,Qp(this,e.j),this.s=e.s,this.g=e.g,Yp(this,e.m),this.l=e.l,t=e.i;var n=new uv;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Xp(this,n),this.o=e.o}else e&&(n=String(e).match(Gp))?(this.h=!!t,Qp(this,n[1]||"",!0),this.s=$p(n[2]||""),this.g=$p(n[3]||"",!0),Yp(this,n[4]),this.l=$p(n[5]||"",!0),Xp(this,n[6]||"",!0),this.o=$p(n[7]||"")):(this.h=!!t,this.i=new uv(null,this.h))}function Hp(e){return new Wp(e)}function Qp(e,t,n){e.j=n?$p(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Yp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Xp(e,t,n){t instanceof uv?(e.i=t,function(e,t){t&&!e.j&&(sv(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(cv(this,t),fv(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ev(t,av)),e.i=new uv(t,e.h))}function Jp(e,t,n){e.i.set(t,n)}function Zp(e){return Jp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function $p(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ev(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,tv),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tv(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Wp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ev(t,nv,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ev(t,nv,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ev(n,"/"==n.charAt(0)?iv:rv,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ev(n,ov)),e.join("")};var nv=/[#\/\?@]/g,rv=/[#\?:]/g,iv=/[#\?]/g,av=/[#\?@]/g,ov=/#/g;function uv(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function sv(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function cv(e,t){sv(e),t=hv(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function lv(e,t){return sv(e),t=hv(e,t),e.g.has(t)}function fv(e,t,n){cv(e,t),0<n.length&&(e.i=null,e.g.set(hv(e,t),Bh(n)),e.h+=n.length)}function hv(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ih=uv.prototype).add=function(e,t){sv(this),this.i=null,e=hv(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ih.forEach=function(e,t){sv(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ih.oa=function(){sv(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ih.W=function(e){sv(this);var t=[];if("string"===typeof e)lv(this,e)&&(t=t.concat(this.g.get(hv(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ih.set=function(e,t){return sv(this),this.i=null,lv(this,e=hv(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ih.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Ih.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var dv=y((function e(t,n){d(this,e),this.h=t,this.g=n}));function pv(e){this.l=e||mv,Ah.PerformanceNavigationTiming?e=0<(e=Ah.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ah.g&&Ah.g.Ga&&Ah.g.Ga()&&Ah.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vv,mv=10;function yv(e){return!!e.h||!!e.g&&e.g.size>=e.j}function gv(e){return e.h?1:e.g?e.g.size:0}function kv(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function bv(e,t){e.g?e.g.add(t):e.h=t}function wv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function xv(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=A(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Bh(e.i)}function _v(){}function Iv(){this.g=new _v}function Ev(e,t,n){var r=n||"";try{Kp(e,(function(e,n){var i=e;Rh(e)&&(i=Bd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Tv(e){this.l=e.ac||null,this.j=e.jb||!1}function Av(e,t){Ud.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Cv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pv.prototype.cancel=function(){if(this.i=xv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=A(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},_v.prototype.stringify=function(e){return Ah.JSON.stringify(e,void 0)},_v.prototype.parse=function(e){return Ah.JSON.parse(e,void 0)},Uh(Tv,bp),Tv.prototype.g=function(){return new Av(this.l,this.j)},Tv.prototype.i=(vv={},function(){return vv}),Uh(Av,Ud);var Cv=0;function Nv(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Rv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Dv(e)}function Dv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ih=Av.prototype).open=function(e,t){if(this.readyState!=Cv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Dv(this)},Ih.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ah).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Ih.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rv(this)),this.readyState=Cv},Ih.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dv(this)),this.g&&(this.readyState=3,Dv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Ah.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nv(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Ih.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rv(this):Dv(this),3==this.readyState&&Nv(this)}},Ih.Va=function(e){this.g&&(this.response=this.responseText=e,Rv(this))},Ih.Ua=function(e){this.g&&(this.response=e,Rv(this))},Ih.ga=function(){this.g&&Rv(this)},Ih.setRequestHeader=function(e,t){this.v.append(e,t)},Ih.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ih.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Av.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Pv=Ah.JSON.parse;function Ov(e){Ud.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Lv,this.K=this.L=!1}Uh(Ov,Ud);var Lv="",Mv=/^https?$/i,Fv=["POST","PUT"];function Uv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,jv(e),Bv(e)}function jv(e){e.D||(e.D=!0,jd(e,"complete"),jd(e,"error"))}function Vv(e){if(e.h&&"undefined"!=typeof Th&&(!e.C[1]||4!=zv(e)||2!=e.aa()))if(e.v&&4==zv(e))ep(e.Ha,0,e);else if(jd(e,"readystatechange"),4==zv(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Gp)[1]||null;if(!a&&Ah.self&&Ah.self.location){var o=Ah.self.location.protocol;a=o.substr(0,o.length-1)}i=!Mv.test(a?a.toLowerCase():"")}t=i}if(t)jd(e,"complete"),jd(e,"success");else{e.m=6;try{var u=2<zv(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",jv(e)}}finally{Bv(e)}}}function Bv(e,t){if(e.g){qv(e);var n=e.g,r=e.C[0]?Ch:null;e.g=null,e.C=null,t||jd(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function qv(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ah.clearTimeout(e.A),e.A=null)}function zv(e){return e.g?e.g.readyState:0}function Kv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Lv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Am){return null}}function Gv(e){var t="";return kd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Wv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gv(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Jp(e,t,n))}function Hv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qv(e){this.Ca=0,this.i=[],this.j=new up,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Hv("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Hv("baseRetryDelayMs",5e3,e),this.bb=Hv("retryDelaySeedMs",1e4,e),this.$a=Hv("forwardChannelMaxRetries",2,e),this.ta=Hv("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new pv(e&&e.concurrentRequestLimit),this.Fa=new Iv,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Yv(e){if(Jv(e),3==e.G){var t=e.U++,n=Hp(e.F);Jp(n,"SID",e.I),Jp(n,"RID",t),Jp(n,"TYPE","terminate"),em(e,n),(t=new Ap(e,e.j,t,void 0)).K=2,t.v=Zp(Hp(n)),n=!1,Ah.navigator&&Ah.navigator.sendBeacon&&(n=Ah.navigator.sendBeacon(t.v.toString(),"")),!n&&Ah.Image&&((new Image).src=t.v,n=!0),n||(t.g=hm(t.l,null),t.g.da(t.v)),t.F=Date.now(),Up(t)}lm(e)}function Xv(e){e.g&&(im(e),e.g.cancel(),e.g=null)}function Jv(e){Xv(e),e.u&&(Ah.clearTimeout(e.u),e.u=null),om(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Ah.clearTimeout(e.m),e.m=null)}function Zv(e){yv(e.h)||e.m||(e.m=!0,Qd(e.Ja,e),e.C=0)}function $v(e,t){var n;n=t?t.m:e.U++;var r=Hp(e.F);Jp(r,"SID",e.I),Jp(r,"RID",n),Jp(r,"AID",e.T),em(e,r),e.o&&e.s&&Wv(r,e.o,e.s),n=new Ap(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=tm(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),bv(e.h,n),Pp(n,r,t)}function em(e,t){e.ia&&kd(e.ia,(function(e,n){Jp(t,n,e)})),e.l&&Kp({},(function(e,n){Jp(t,n,e)}))}function tm(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Mh(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Ev(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function nm(e){e.g||e.u||(e.Z=1,Qd(e.Ia,e),e.A=0)}function rm(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=yp(Mh(e.Ia,e),sm(e,e.A)),e.A++,!0)}function im(e){null!=e.B&&(Ah.clearTimeout(e.B),e.B=null)}function am(e){e.g=new Ap(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Hp(e.sa);Jp(t,"RID","rpc"),Jp(t,"SID",e.I),Jp(t,"CI",e.L?"0":"1"),Jp(t,"AID",e.T),Jp(t,"TYPE","xmlhttp"),em(e,t),e.o&&e.s&&Wv(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Zp(Hp(t)),n.s=null,n.P=!0,Op(n,e)}function om(e){null!=e.v&&(Ah.clearTimeout(e.v),e.v=null)}function um(e,t){var n=null;if(e.g==t){om(e),im(e),e.g=null;var r=2}else{if(!kv(e.h,t))return;n=t.D,wv(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;jd(r=fp(),new mp(r,n)),Zv(e)}else nm(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(gv(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=yp(Mh(e.Ja,e,t),sm(e,e.C)),e.C++,!0))}(e,t)||2==r&&rm(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cm(e,5);break;case 4:cm(e,10);break;case 3:cm(e,6);break;default:cm(e,2)}}function sm(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function cm(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Mh(e.kb,e);n||(n=new Wp("//www.google.com/images/cleardot.gif"),Ah.location&&"http"==Ah.location.protocol||Qp(n,"https"),Zp(n)),function(e,t){var n=new up;if(Ah.Image){var r=new Image;r.onload=Fh(Sv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Fh(Sv,n,r,"TestLoadImage: error",!1,t),r.onabort=Fh(Sv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Fh(Sv,n,r,"TestLoadImage: timeout",!1,t),Ah.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else vp(2);e.G=0,e.l&&e.l.va(t),lm(e),Jv(e)}function lm(e){if(e.G=0,e.la=[],e.l){var t=xv(e.h);0==t.length&&0==e.i.length||(qh(e.la,t),qh(e.la,e.i),e.h.i.length=0,Bh(e.i),e.i.length=0),e.l.ua()}}function fm(e,t,n){var r=n instanceof Wp?Hp(n):new Wp(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Yp(r,r.m);else{var i=Ah.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Wp(null,void 0);r&&Qp(a,r),t&&(a.g=t),i&&Yp(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Jp(r,n,t),Jp(r,"VER",e.ma),em(e,r),r}function hm(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Ov(new Tv({jb:!0})):new Ov(e.ra)).Ka(e.H),t}function dm(){}function pm(){if($h&&!(10<=Number(hd)))throw Error("Environmental error: no available transport.")}function vm(e,t){Ud.call(this),this.g=new Qv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Gh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Gh(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gm(this)}function mm(e){Ep.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ym(){Sp.call(this),this.status=1}function gm(e){this.g=e}(Ih=Ov.prototype).Ka=function(e){this.L=e},Ih.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_p.g(),this.C=this.u?wp(this.u):wp(_p),this.g.onreadystatechange=Mh(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Uv(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=A(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Ah.FormData&&e instanceof Ah.FormData,!(0<=Vh(Fv,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=A(n);try{for(c.s();!(s=c.n()).done;){var f=l(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qv(this),0<this.B&&((this.K=function(e){return $h&&ld()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mh(this.qa,this)):this.A=ep(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Uv(this,u)}},Ih.qa=function(){"undefined"!=typeof Th&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jd(this,"timeout"),this.abort(8))},Ih.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,jd(this,"complete"),jd(this,"abort"),Bv(this))},Ih.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bv(this,!0)),Ov.X.M.call(this)},Ih.Ha=function(){this.s||(this.F||this.v||this.l?Vv(this):this.fb())},Ih.fb=function(){Vv(this)},Ih.aa=function(){try{return 2<zv(this)?this.g.status:-1}catch(vv){return-1}},Ih.fa=function(){try{return this.g?this.g.responseText:""}catch(vv){return""}},Ih.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Pv(t)}},Ih.Ea=function(){return this.m},Ih.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ih=Qv.prototype).ma=8,Ih.G=1,Ih.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Ap(this,this.j,e,void 0),n=this.s;if(this.S&&(n?xd(n=bd(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=tm(this,t,r),Jp(i=Hp(this.F),"RID",e),Jp(i,"CVER",22),this.D&&Jp(i,"X-HTTP-Session-Id",this.D),em(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Gv(n)))+"&"+r:this.o&&Wv(i,this.o,n)),bv(this.h,t),this.Ya&&Jp(i,"TYPE","init"),this.O?(Jp(i,"$req",r),Jp(i,"SID","null"),t.Z=!0,Pp(t,i,null)):Pp(t,i,r),this.G=2}}else 3==this.G&&(e?$v(this,e):0==this.i.length||yv(this.h)||$v(this))},Ih.Ia=function(){if(this.u=null,am(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=yp(Mh(this.eb,this),e)}},Ih.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,vp(10),Xv(this),am(this))},Ih.cb=function(){null!=this.v&&(this.v=null,Xv(this),rm(this),vp(19))},Ih.kb=function(e){e?(this.j.info("Successfully pinged google.com"),vp(2)):(this.j.info("Failed to ping google.com"),vp(1))},(Ih=dm.prototype).xa=function(){},Ih.wa=function(){},Ih.va=function(){},Ih.ua=function(){},Ih.Ra=function(){},pm.prototype.g=function(e,t){return new vm(e,t)},Uh(vm,Ud),vm.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;vp(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=fm(e,null,e.V),Zv(e)},vm.prototype.close=function(){Yv(this.g)},vm.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Bd(e),e=n);t.i.push(new dv(t.ab++,e)),3==t.G&&Zv(t)},vm.prototype.M=function(){this.g.l=null,delete this.j,Yv(this.g),delete this.g,vm.X.M.call(this)},Uh(mm,Ep),Uh(ym,Sp),Uh(gm,dm),gm.prototype.xa=function(){jd(this.g,"a")},gm.prototype.wa=function(e){jd(this.g,new mm(e))},gm.prototype.va=function(e){jd(this.g,new ym)},gm.prototype.ua=function(){jd(this.g,"b")},pm.prototype.createWebChannel=pm.prototype.g,vm.prototype.send=vm.prototype.u,vm.prototype.open=vm.prototype.m,vm.prototype.close=vm.prototype.close,gp.NO_ERROR=0,gp.TIMEOUT=8,gp.HTTP_ERROR=6,kp.COMPLETE="complete",xp.EventType=Ip,Ip.OPEN="a",Ip.CLOSE="b",Ip.ERROR="c",Ip.MESSAGE="d",Ud.prototype.listen=Ud.prototype.N,Ov.prototype.listenOnce=Ov.prototype.O,Ov.prototype.getLastError=Ov.prototype.Oa,Ov.prototype.getLastErrorCode=Ov.prototype.Ea,Ov.prototype.getStatus=Ov.prototype.aa,Ov.prototype.getResponseJson=Ov.prototype.Sa,Ov.prototype.getResponseText=Ov.prototype.fa,Ov.prototype.send=Ov.prototype.da,Ov.prototype.setWithCredentials=Ov.prototype.Ka;var km=Sh.createWebChannelTransport=function(){return new pm},bm=Sh.getStatEventTarget=function(){return fp()},wm=Sh.ErrorCode=gp,xm=Sh.EventType=kp,_m=Sh.Event=cp,Im=Sh.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Em=Sh.FetchXmlHttpFactory=Tv,Sm=Sh.WebChannel=xp,Tm=Sh.XhrIo=Ov,Am="@firebase/firestore",Cm=function(){function e(t){d(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Cm.UNAUTHENTICATED=new Cm(null),Cm.GOOGLE_CREDENTIALS=new Cm("google-credentials-uid"),Cm.FIRST_PARTY=new Cm("first-party-uid"),Cm.MOCK_USER=new Cm("mock-user");var Nm="9.17.1",Rm=new Qt("@firebase/firestore");function Dm(){return Rm.logLevel}function Pm(e){if(Rm.logLevel<=Bt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Mm);Rm.debug.apply(Rm,["Firestore (".concat(Nm,"): ").concat(e)].concat(h(i)))}}function Om(e){if(Rm.logLevel<=Bt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Mm);Rm.error.apply(Rm,["Firestore (".concat(Nm,"): ").concat(e)].concat(h(i)))}}function Lm(e){if(Rm.logLevel<=Bt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Mm);Rm.warn.apply(Rm,["Firestore (".concat(Nm,"): ").concat(e)].concat(h(i)))}}function Mm(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Fm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Nm,") INTERNAL ASSERTION FAILED: ")+e;throw Om(t),new Error(t)}function Um(e,t){e||Fm()}function jm(e,t){return e}var Vm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Bm=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(bt),qm=y((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),zm=y((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Km=function(){function e(){d(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Cm.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Gm=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Wm=function(){function e(t){d(this,e),this.t=t,this.currentUser=Cm.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new qm;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new qm,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Pm("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Pm("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new qm)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Pm("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Um("string"==typeof n.accessToken),new zm(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Um(null===e||"string"==typeof e),new Cm(e)}}]),e}(),Hm=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Cm.FIRST_PARTY,this.p=new Map}return y(e,[{key:"I",value:function(){return this.g?this.g():(Um(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),Qm=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new Hm(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Cm.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ym=y((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Xm=function(){function e(t){d(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Pm("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Pm("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Pm("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Pm("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Um("string"==typeof t.token),e.A=t.token,new Ym(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Jm(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Zm=function(){function e(){d(this,e)}return y(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Jm(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function $m(e,t){return e<t?-1:e>t?1:0}function ey(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ty(e){return e+"\0"}var ny=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Bm(Vm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Bm(Vm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Bm(Vm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bm(Vm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?$m(this.nanoseconds,e.nanoseconds):$m(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ry=function(){function e(t){d(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ny(0,0))}},{key:"max",value:function(){return new e(new ny(253402300799,999999999))}}]),e}(),iy=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&Fm(),void 0===r?r=t.length-n:r>t.length-n&&Fm(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ay=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,h(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(iy),oy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,uy=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return oy.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Bm(Vm.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Bm(Vm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Bm(Vm.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(iy),sy=function(){function e(t){d(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ay.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ay.fromString(t))}},{key:"fromName",value:function(t){return new e(ay.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ay.emptyPath())}},{key:"comparator",value:function(e,t){return ay.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ay(t.slice()))}}]),e}(),cy=y((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ly(e){return e.fields.find((function(e){return 2===e.kind}))}function fy(e){return e.fields.filter((function(e){return 2!==e.kind}))}cy.UNKNOWN_ID=-1;var hy=y((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var dy=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,my.min())}}]),e}();function py(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ry.fromTimestamp(1e9===r?new ny(n+1,0):new ny(n,r));return new my(i,sy.empty(),t)}function vy(e){return new my(e.readTime,e.key,-1)}var my=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(ry.min(),sy.empty(),-1)}},{key:"max",value:function(){return new e(ry.max(),sy.empty(),-1)}}]),e}();function yy(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=sy.comparator(e.documentKey,t.documentKey))?n:$m(e.largestBatchId,t.largestBatchId)}var gy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ky=function(){function e(){d(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function by(e){return wy.apply(this,arguments)}function wy(){return wy=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Vm.FAILED_PRECONDITION&&t.message===gy){e.next=2;break}throw t;case 2:Pm("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}var xy=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Fm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=A(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),_y=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new qm,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Sy(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Ry(e.target.error);r.P.reject(new Sy(t,n))}}return y(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Pm("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Ay(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Sy(n,t)}}}]),e}(),Iy=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(pt())&&Om("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"F",value:function(){var e=Mt(Ot().mark((function e(t){var n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Pm("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Sy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Bm(Vm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Bm(Vm.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Sy(t,n))},i.onupgradeneeded=function(e){Pm("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Pm("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Mt(Ot().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=Ot().mark((function e(){var n,u,s,l;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.F(t);case 4:return c.db=e.sent,n=_y.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),xy.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Pm("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Pm("SimpleDb","Removing database:",e),Cy(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!kt())return!1;if(e.N())return!0;var t=pt(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Kivlic-career-Assignment",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ey=function(){function e(t){d(this,e),this.q=t,this.U=!1,this.K=null}return y(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Cy(this.q.delete())}}]),e}(),Sy=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,Vm.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(Bm);function Ty(e){return"IndexedDbTransactionError"===e.name}var Ay=function(){function e(t){d(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Pm("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Pm("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Cy(n)}},{key:"add",value:function(e){return Pm("SimpleDb","ADD",this.store.name,e,e),Cy(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Cy(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Pm("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Pm("SimpleDb","DELETE",this.store.name,e),Cy(this.store.delete(e))}},{key:"count",value:function(){return Pm("SimpleDb","COUNT",this.store.name),Cy(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new xy((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new xy((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Pm("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new xy((function(n,r){t.onerror=function(e){var t=Ry(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new xy((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ey(i),o=t(i.primaryKey,i.value,a);if(o instanceof xy){var u=o.catch((function(e){return a.done(),xy.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return xy.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Cy(e){return new xy((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ry(e.target.error);n(t)}}))}var Ny=!1;function Ry(e){var t=Iy.D(pt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Bm("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ny||(Ny=!0,setTimeout((function(){throw r}),0)),r}}return e}var Dy=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.et=n,this.task=null}return y(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Pm("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Pm,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Ty(e.t4)){e.next=17;break}Pm("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,by(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Py=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"st",value:function(){var e=Mt(Ot().mark((function e(){var t,n=this,r=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return xy.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Pm("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Pm("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=vy(t);yy(r,n)>0&&(n=r)})),new my(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Oy=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Oy.at=-1;var Ly=y((function e(t,n,r,i,a,o,u,s){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),My=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Fy(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Uy(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function jy(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Vy(e){return null==e}function By(e){return 0===e&&1/e==-1/0}function qy(e){return"number"==typeof e&&Number.isInteger(e)&&!By(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var zy=function(e){function t(e){d(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return $m(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();zy.EMPTY_BYTE_STRING=new zy("");var Ky=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gy(e){if(Um(!!e),"string"==typeof e){var t=0,n=Ky.exec(e);if(Um(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Wy(e.seconds),nanos:Wy(e.nanos)}}function Wy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hy(e){return"string"==typeof e?zy.fromBase64String(e):zy.fromUint8Array(e)}function Qy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yy(e){var t=e.mapValue.fields.__previous_value__;return Qy(t)?Yy(t):t}function Xy(e){var t=Gy(e.mapValue.fields.__local_write_time__.timestampValue);return new ny(t.seconds,t.nanos)}var Jy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zy={nullValue:"NULL_VALUE"};function $y(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qy(e)?4:dg(e)?9007199254740991:10:Fm()}function eg(e,t){if(e===t)return!0;var n=$y(e);if(n!==$y(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Xy(e).isEqual(Xy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Gy(e.timestampValue),r=Gy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hy(e.bytesValue).isEqual(Hy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Wy(e.geoPointValue.latitude)===Wy(t.geoPointValue.latitude)&&Wy(e.geoPointValue.longitude)===Wy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Wy(e.integerValue)===Wy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Wy(e.doubleValue),r=Wy(t.doubleValue);return n===r?By(n)===By(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ey(e.arrayValue.values||[],t.arrayValue.values||[],eg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fy(n)!==Fy(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!eg(n[i],r[i])))return!1;return!0}(e,t);default:return Fm()}}function tg(e,t){return void 0!==(e.values||[]).find((function(e){return eg(e,t)}))}function ng(e,t){if(e===t)return 0;var n=$y(e),r=$y(t);if(n!==r)return $m(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $m(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Wy(e.integerValue||e.doubleValue),r=Wy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return rg(e.timestampValue,t.timestampValue);case 4:return rg(Xy(e),Xy(t));case 5:return $m(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Hy(e),r=Hy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=$m(n[i],r[i]);if(0!==a)return a}return $m(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=$m(Wy(e.latitude),Wy(t.latitude));return 0!==n?n:$m(Wy(e.longitude),Wy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ng(n[i],r[i]);if(a)return a}return $m(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Jy.mapValue&&t===Jy.mapValue)return 0;if(e===Jy.mapValue)return 1;if(t===Jy.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=$m(r[o],a[o]);if(0!==u)return u;var s=ng(n[r[o]],i[a[o]]);if(0!==s)return s}return $m(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Fm()}}function rg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return $m(e,t);var n=Gy(e),r=Gy(t),i=$m(n.seconds,r.seconds);return 0!==i?i:$m(n.nanos,r.nanos)}function ig(e){return ag(e)}function ag(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Gy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Hy(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,sy.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=A(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ag(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=A(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ag(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Fm();var t,n}function og(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ug(e){return!!e&&"integerValue"in e}function sg(e){return!!e&&"arrayValue"in e}function cg(e){return!!e&&"nullValue"in e}function lg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fg(e){return!!e&&"mapValue"in e}function hg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Uy(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=hg(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=hg(e.arrayValue.values[r]);return n}return Object.assign({},e)}function dg(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function pg(e){return"nullValue"in e?Zy:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?og(My.empty(),sy.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Fm()}function vg(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?og(My.empty(),sy.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Jy:Fm()}function mg(e,t){var n=ng(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function yg(e,t){var n=ng(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var gg=y((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function kg(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?sy.comparator(sy.fromName(o.referenceValue),n.key):ng(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function bg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!eg(e.position[n],t.position[n]))return!1;return!0}var wg=y((function e(){d(this,e)})),xg=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ng(t,this.value)):null!==t&&$y(this.value)===$y(t)&&this.matchesComparison(ng(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fm()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Dg(e,t,r):"array-contains"===t?new Mg(e,r):"in"===t?new Fg(e,r):"not-in"===t?new Ug(e,r):"array-contains-any"===t?new jg(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Pg(e,n):new Og(e,n)}}]),n}(wg),_g=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return y(n,[{key:"matches",value:function(e){return Ig(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=A(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(wg);function Ig(e){return"and"===e.op}function Eg(e){return"or"===e.op}function Sg(e){return Tg(e)&&Ig(e)}function Tg(e){var t,n=A(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof _g)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Ag(e){if(e instanceof xg)return e.field.canonicalString()+e.op.toString()+ig(e.value);if(Sg(e))return e.filters.map((function(e){return Ag(e)})).join(",");var t=e.filters.map((function(e){return Ag(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Cg(e,t){return e instanceof xg?function(e,t){return t instanceof xg&&e.op===t.op&&e.field.isEqual(t.field)&&eg(e.value,t.value)}(e,t):e instanceof _g?function(e,t){return t instanceof _g&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Cg(n,t.filters[r])}),!0)}(e,t):void Fm()}function Ng(e,t){var n=e.filters.concat(t);return _g.create(n,e.op)}function Rg(e){return e instanceof xg?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ig(e.value))}(e):e instanceof _g?function(e){return e.op.toString()+" {"+e.getFilters().map(Rg).join(" ,")+"}"}(e):"Filter"}var Dg=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=sy.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=sy.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(xg),Pg=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Lg("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(xg),Og=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Lg("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(xg);function Lg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return sy.fromName(e.referenceValue)}))}var Mg=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return sg(t)&&tg(t.arrayValue,this.value)}}]),n}(xg),Fg=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&tg(this.value.arrayValue,t)}}]),n}(xg),Ug=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(tg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!tg(this.value.arrayValue,t)}}]),n}(xg),jg=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return tg(t.value.arrayValue,e)}))}}]),n}(xg),Vg=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function Bg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var qg=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Kg.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Kg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Kg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new zg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new zg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new zg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new zg(this.root,e,this.comparator,!0)}}]),e}(),zg=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Kg=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Fm();if(this.right.isRed())throw Fm();var e=this.left.check();if(e!==this.right.check())throw Fm();return e+(this.isRed()?0:1)}}]),e}();Kg.EMPTY=null,Kg.RED=!0,Kg.BLACK=!1,Kg.EMPTY=new(function(){function e(){d(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw Fm()}},{key:"value",get:function(){throw Fm()}},{key:"color",get:function(){throw Fm()}},{key:"left",get:function(){throw Fm()}},{key:"right",get:function(){throw Fm()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Kg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Gg=function(){function e(t){d(this,e),this.comparator=t,this.data=new qg(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Wg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Wg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Wg=function(){function e(t){d(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Hg(e){return e.hasNext()?e.getNext():void 0}var Qg=function(){function e(t){d(this,e),this.fields=t,t.sort(uy.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new Gg(uy.comparator),i=A(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=A(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=A(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return ey(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Yg=function(){function e(t){d(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!fg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hg(t)}},{key:"setAll",value:function(e){var t=this,n=uy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=hg(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());fg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return eg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];fg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Uy(t,(function(t,n){return e[t]=n}));var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(hg(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Xg(e){var t=[];return Uy(e.fields,(function(e,n){var r=new uy([e]);if(fg(n)){var i=Xg(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=A(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Qg(t)}var Jg=function(){function e(t,n,r,i,a,o,u){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(ry.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Yg.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Yg.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=ry.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ry.min(),ry.min(),ry.min(),Yg.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,ry.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ry.min(),ry.min(),Yg.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ry.min(),ry.min(),Yg.empty(),2)}}]),e}(),Zg=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function $g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Zg(e,t,n,r,i,a,o)}function ek(e){var t=jm(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Ag(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Vy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ig(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ig(e)})).join(",")),t.ft=n}return t.ft}function tk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Bg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Cg(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bg(e.startAt,t.startAt)&&bg(e.endAt,t.endAt)}function nk(e){return sy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function rk(e,t){return e.filters.filter((function(e){return e instanceof xg&&e.field.isEqual(t)}))}function ik(e,t,n){var r,i=Zy,a=!0,o=A(rk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Zy,c=!0;switch(u.op){case"<":case"<=":s=pg(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Zy}mg({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];mg({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ak(e,t,n){var r,i=Jy,a=!0,o=A(rk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Jy,c=!0;switch(u.op){case">=":case">":s=vg(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Jy}yg({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];yg({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var ok=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function uk(e,t,n,r,i,a,o,u){return new ok(e,t,n,r,i,a,o,u)}function sk(e){return new ok(e)}function ck(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function lk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function fk(e){var t,n=A(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function hk(e){return null!==e.collectionGroup}function dk(e){var t=jm(e);if(null===t.dt){t.dt=[];var n=fk(t),r=lk(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Vg(n)),t.dt.push(new Vg(uy.keyField(),"asc"));else{var i,a=!1,o=A(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Vg(uy.keyField(),s))}}}return t.dt}function pk(e){var t=jm(e);if(!t._t)if("F"===t.limitType)t._t=$g(t.path,t.collectionGroup,dk(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=A(dk(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Vg(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new gg(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new gg(t.startAt.position,t.startAt.inclusive):null;t._t=$g(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function vk(e,t){t.getFirstInequalityField(),fk(e);var n=e.filters.concat([t]);return new ok(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function mk(e,t,n){return new ok(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yk(e,t){return tk(pk(e),pk(t))&&e.limitType===t.limitType}function gk(e){return"".concat(ek(pk(e)),"|lt:").concat(e.limitType)}function kk(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Rg(e)})).join(", "),"]")),Vy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ig(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ig(e)})).join(",")),"Target(".concat(t,")")}(pk(e)),"; limitType=").concat(e.limitType,")")}function bk(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):sy.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=A(dk(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=A(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=kg(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,dk(e),t))&&!(e.endAt&&!function(e,t,n){var r=kg(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,dk(e),t))}(e,t)}function wk(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xk(e){return function(t,n){var r,i=!1,a=A(dk(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=_k(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function _k(e,t,n){var r=e.field.isKeyField()?sy.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ng(r,i):Fm()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fm()}}function Ik(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:By(t)?"-0":t}}function Ek(e){return{integerValue:""+e}}function Sk(e,t){return qy(t)?Ek(t):Ik(e,t)}var Tk=y((function e(){d(this,e),this._=void 0}));function Ak(e,t,n){return e instanceof Rk?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Dk?Pk(e,t):e instanceof Ok?Lk(e,t):function(e,t){var n=Nk(e,t),r=Fk(n)+Fk(e.gt);return ug(n)&&ug(e.gt)?Ek(r):Ik(e.yt,r)}(e,t)}function Ck(e,t,n){return e instanceof Dk?Pk(e,t):e instanceof Ok?Lk(e,t):n}function Nk(e,t){return e instanceof Mk?ug(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Rk=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(Tk),Dk=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Tk);function Pk(e,t){var n,r=Uk(t),i=A(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return eg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ok=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Tk);function Lk(e,t){var n,r=Uk(t),i=A(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!eg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Mk=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return y(n)}(Tk);function Fk(e){return Wy(e.integerValue||e.doubleValue)}function Uk(e){return sg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var jk=y((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Vk=y((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),Bk=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function qk(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var zk=y((function e(){d(this,e)}));function Kk(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new nb(e.key,Bk.none()):new Yk(e.key,e.data,Bk.none());var n,r=e.data,i=Yg.empty(),a=new Gg(uy.comparator),o=A(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Xk(e.key,i,new Qg(a.toArray()),Bk.none())}function Gk(e,t,n){e instanceof Yk?function(e,t,n){var r=e.value.clone(),i=Zk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xk?function(e,t,n){if(qk(e.precondition,t)){var r=Zk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Jk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Wk(e,t,n,r){return e instanceof Yk?function(e,t,n,r){if(!qk(e.precondition,t))return n;var i=e.value.clone(),a=$k(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xk?function(e,t,n,r){if(!qk(e.precondition,t))return n;var i=$k(e.fieldTransforms,r,t),a=t.data;return a.setAll(Jk(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return qk(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hk(e,t){var n,r=null,i=A(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Nk(a.transform,o||null);null!=u&&(null===r&&(r=Yg.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Qk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ey(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Dk&&t instanceof Dk||e instanceof Ok&&t instanceof Ok?ey(e.elements,t.elements,eg):e instanceof Mk&&t instanceof Mk?eg(e.gt,t.gt):e instanceof Rk&&t instanceof Rk}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Yk=function(e){k(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zk),Xk=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(zk);function Jk(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Zk(e,t,n){var r=new Map;Um(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ck(o,u,n[i]))}return r}function $k(e,t,n){var r,i=new Map,a=A(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ak(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var eb,tb,nb=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zk),rb=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zk),ib=y((function e(t){d(this,e),this.count=t}));function ab(e){switch(e){default:return Fm();case Vm.CANCELLED:case Vm.UNKNOWN:case Vm.DEADLINE_EXCEEDED:case Vm.RESOURCE_EXHAUSTED:case Vm.INTERNAL:case Vm.UNAVAILABLE:case Vm.UNAUTHENTICATED:return!1;case Vm.INVALID_ARGUMENT:case Vm.NOT_FOUND:case Vm.ALREADY_EXISTS:case Vm.PERMISSION_DENIED:case Vm.FAILED_PRECONDITION:case Vm.ABORTED:case Vm.OUT_OF_RANGE:case Vm.UNIMPLEMENTED:case Vm.DATA_LOSS:return!0}}function ob(e){if(void 0===e)return Om("GRPC error has no .code"),Vm.UNKNOWN;switch(e){case eb.OK:return Vm.OK;case eb.CANCELLED:return Vm.CANCELLED;case eb.UNKNOWN:return Vm.UNKNOWN;case eb.DEADLINE_EXCEEDED:return Vm.DEADLINE_EXCEEDED;case eb.RESOURCE_EXHAUSTED:return Vm.RESOURCE_EXHAUSTED;case eb.INTERNAL:return Vm.INTERNAL;case eb.UNAVAILABLE:return Vm.UNAVAILABLE;case eb.UNAUTHENTICATED:return Vm.UNAUTHENTICATED;case eb.INVALID_ARGUMENT:return Vm.INVALID_ARGUMENT;case eb.NOT_FOUND:return Vm.NOT_FOUND;case eb.ALREADY_EXISTS:return Vm.ALREADY_EXISTS;case eb.PERMISSION_DENIED:return Vm.PERMISSION_DENIED;case eb.FAILED_PRECONDITION:return Vm.FAILED_PRECONDITION;case eb.ABORTED:return Vm.ABORTED;case eb.OUT_OF_RANGE:return Vm.OUT_OF_RANGE;case eb.UNIMPLEMENTED:return Vm.UNIMPLEMENTED;case eb.DATA_LOSS:return Vm.DATA_LOSS;default:return Fm()}}(tb=eb||(eb={}))[tb.OK=0]="OK",tb[tb.CANCELLED=1]="CANCELLED",tb[tb.UNKNOWN=2]="UNKNOWN",tb[tb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tb[tb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tb[tb.NOT_FOUND=5]="NOT_FOUND",tb[tb.ALREADY_EXISTS=6]="ALREADY_EXISTS",tb[tb.PERMISSION_DENIED=7]="PERMISSION_DENIED",tb[tb.UNAUTHENTICATED=16]="UNAUTHENTICATED",tb[tb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tb[tb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tb[tb.ABORTED=10]="ABORTED",tb[tb.OUT_OF_RANGE=11]="OUT_OF_RANGE",tb[tb.UNIMPLEMENTED=12]="UNIMPLEMENTED",tb[tb.INTERNAL=13]="INTERNAL",tb[tb.UNAVAILABLE=14]="UNAVAILABLE",tb[tb.DATA_LOSS=15]="DATA_LOSS";var ub=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Uy(this.inner,(function(t,n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return jy(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),sb=new qg(sy.comparator);function cb(){return sb}var lb=new qg(sy.comparator);function fb(){for(var e=lb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function hb(e){var t=lb;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function db(){return vb()}function pb(){return vb()}function vb(){return new ub((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var mb=new qg(sy.comparator),yb=new Gg(sy.comparator);function gb(){for(var e=yb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var kb=new Gg($m);function bb(){return kb}var wb=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,xb.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(ry.min(),i,bb(),cb(),gb())}}]),e}(),xb=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,gb(),gb(),gb())}}]),e}(),_b=y((function e(t,n,r,i){d(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),Ib=y((function e(t,n){d(this,e),this.targetId=t,this.Et=n})),Eb=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zy.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Sb=function(){function e(){d(this,e),this.At=0,this.Rt=Cb(),this.bt=zy.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return y(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=gb(),t=gb(),n=gb();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fm()}})),new xb(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=Cb()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),Tb=function(){function e(t){d(this,e),this.$t=t,this.Bt=new Map,this.Lt=cb(),this.qt=Ab(),this.Ut=new Gg($m)}return y(e,[{key:"Kt",value:function(e){var t,n=A(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=A(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Fm()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(nk(i))if(0===n){var a=new sy(i.path);this.Qt(t,a,Jg.newNoDocument(a,ry.min()))}else Um(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&nk(a.target)){var o=new sy(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Jg.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=gb();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new wb(e,n,this.Ut,this.Lt,r);return this.Lt=cb(),this.qt=Ab(),this.Ut=new Gg($m),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new Sb,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Gg($m),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||Pm("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Sb),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function Ab(){return new qg(sy.comparator)}function Cb(){return new qg(sy.comparator)}var Nb={asc:"ASCENDING",desc:"DESCENDING"},Rb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Db={and:"AND",or:"OR"},Pb=y((function e(t,n){d(this,e),this.databaseId=t,this.wt=n}));function Ob(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Lb(e,t){return e.wt?t.toBase64():t.toUint8Array()}function Mb(e,t){return Ob(e,t.toTimestamp())}function Fb(e){return Um(!!e),ry.fromTimestamp(function(e){var t=Gy(e);return new ny(t.seconds,t.nanos)}(e))}function Ub(e,t){return function(e){return new ay(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function jb(e){var t=ay.fromString(e);return Um(sw(t)),t}function Vb(e,t){return Ub(e.databaseId,t.path)}function Bb(e,t){var n=jb(t);if(n.get(1)!==e.databaseId.projectId)throw new Bm(Vm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Bm(Vm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new sy(Gb(n))}function qb(e,t){return Ub(e.databaseId,t)}function zb(e){var t=jb(e);return 4===t.length?ay.emptyPath():Gb(t)}function Kb(e){return new ay(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gb(e){return Um(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wb(e,t,n){return{name:Vb(e,t),fields:n.value.mapValue.fields}}function Hb(e,t,n){var r=Bb(e,t.name),i=Fb(t.updateTime),a=t.createTime?Fb(t.createTime):ry.min(),o=new Yg({mapValue:{fields:t.fields}}),u=Jg.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Qb(e,t){return"found"in t?function(e,t){Um(!!t.found),t.found.name,t.found.updateTime;var n=Bb(e,t.found.name),r=Fb(t.found.updateTime),i=t.found.createTime?Fb(t.found.createTime):ry.min(),a=new Yg({mapValue:{fields:t.found.fields}});return Jg.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Um(!!t.missing),Um(!!t.readTime);var n=Bb(e,t.missing),r=Fb(t.readTime);return Jg.newNoDocument(n,r)}(e,t):Fm()}function Yb(e,t){var n;if(t instanceof Yk)n={update:Wb(e,t.key,t.value)};else if(t instanceof nb)n={delete:Vb(e,t.key)};else if(t instanceof Xk)n={update:Wb(e,t.key,t.data),updateMask:uw(t.fieldMask)};else{if(!(t instanceof rb))return Fm();n={verify:Vb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Rk)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Dk)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ok)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Mk)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Fm()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Mb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fm()}(e,t.precondition)),n}function Xb(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Bk.updateTime(Fb(e.updateTime)):void 0!==e.exists?Bk.exists(e.exists):Bk.none()}(t.currentDocument):Bk.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Um("REQUEST_TIME"===t.setToServerValue),n=new Rk;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Dk(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Ok(i)}else"increment"in t?n=new Mk(e,t.increment):Fm();var a=uy.fromServerFormat(t.fieldPath);return new jk(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Bb(e,t.update.name),a=new Yg({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Qg(t.map((function(e){return uy.fromServerFormat(e)})))}(t.updateMask);return new Xk(i,a,o,n,r)}return new Yk(i,a,n,r)}if(t.delete){var u=Bb(e,t.delete);return new nb(u,n)}if(t.verify){var s=Bb(e,t.verify);return new rb(s,n)}return Fm()}function Jb(e,t){return{documents:[qb(e,t.path)]}}function Zb(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=qb(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=qb(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ow(_g.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:iw(e.field),direction:tw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||Vy(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function $b(e){var t=zb(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Um(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=ew(e);return t instanceof _g&&Sg(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Vg(aw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Vy(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new gg(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new gg(n,t)}(n.endAt)),uk(t,i,u,o,s,"F",c,l)}function ew(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=aw(e.unaryFilter.field);return xg.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=aw(e.unaryFilter.field);return xg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=aw(e.unaryFilter.field);return xg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=aw(e.unaryFilter.field);return xg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fm()}}(e):void 0!==e.fieldFilter?function(e){return xg.create(aw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fm()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _g.create(e.compositeFilter.filters.map((function(e){return ew(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Fm()}}(e.compositeFilter.op))}(e):Fm()}function tw(e){return Nb[e]}function nw(e){return Rb[e]}function rw(e){return Db[e]}function iw(e){return{fieldPath:e.canonicalString()}}function aw(e){return uy.fromServerFormat(e.fieldPath)}function ow(e){return e instanceof xg?function(e){if("=="===e.op){if(lg(e.value))return{unaryFilter:{field:iw(e.field),op:"IS_NAN"}};if(cg(e.value))return{unaryFilter:{field:iw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lg(e.value))return{unaryFilter:{field:iw(e.field),op:"IS_NOT_NAN"}};if(cg(e.value))return{unaryFilter:{field:iw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iw(e.field),op:nw(e.op),value:e.value}}}(e):e instanceof _g?function(e){var t=e.getFilters().map((function(e){return ow(e)}));return 1===t.length?t[0]:{compositeFilter:{op:rw(e.op),filters:t}}}(e):Fm()}function uw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function sw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function cw(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=fw(t)),t=lw(e.get(n),t);return fw(t)}function lw(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function fw(e){return e+"\x01\x01"}function hw(e){var t=e.length;if(Um(t>=2),2===t)return Um("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ay.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Fm(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Fm()}a=o+2}return new ay(r)}var dw=["userId","batchId"];function pw(e,t){return[e,cw(t)]}function vw(e,t,n){return[e,cw(t),n]}var mw={},yw=["prefixPath","collectionGroup","readTime","documentId"],gw=["prefixPath","collectionGroup","documentId"],kw=["collectionGroup","readTime","prefixPath","documentId"],bw=["canonicalId","targetId"],ww=["targetId","path"],xw=["path","targetId"],_w=["collectionId","parent"],Iw=["indexId","uid"],Ew=["uid","sequenceNumber"],Sw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Tw=["indexId","uid","orderedDocumentKey"],Aw=["userId","collectionPath","documentId"],Cw=["userId","collectionPath","largestBatchId"],Nw=["userId","collectionGroup","largestBatchId"],Rw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Dw=[].concat(h(Rw),["documentOverlays"]),Pw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ow=Pw,Lw=[].concat(Ow,["indexConfiguration","indexState","indexEntries"]),Mw=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).se=e,i.currentSequenceNumber=r,i}return y(n)}(ky);function Fw(e,t){var n=jm(e);return Iy.M(n.se,t)}var Uw=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Gk(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=A(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Wk(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=A(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Wk(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=pb();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Kk(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(ry.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),gb())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&ey(this.mutations,e.mutations,(function(e,t){return Qk(e,t)}))&&ey(this.baseMutations,e.baseMutations,(function(e,t){return Qk(e,t)}))}}]),e}(),jw=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){Um(t.mutations.length===r.length);for(var i=mb,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Vw=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Bw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ry.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ry.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:zy.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),qw=y((function e(t){d(this,e),this.ie=t}));function zw(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Kw(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Vb(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ob(e,t.version.toTimestamp()),createTime:Ob(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Gw(t.version)};else{if(!t.isUnknownDocument())return Fm();r.unknownDocument={path:n.path.toArray(),version:Gw(t.version)}}return r}function Kw(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Gw(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ww(e){var t=new ny(e.seconds,e.nanoseconds);return ry.fromTimestamp(t)}function Hw(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Xb(e.ie,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Xb(e.ie,t)})),u=ny.fromMillis(t.localWriteTimeMs);return new Uw(t.batchId,u,n,o)}function Qw(e){var t,n,r=Ww(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Ww(e.lastLimboFreeSnapshotVersion):ry.min();return void 0!==e.query.documents?(Um(1===(n=e.query).documents.length),t=pk(sk(zb(n.documents[0])))):t=function(e){return pk($b(e))}(e.query),new Bw(t,e.targetId,0,e.lastListenSequenceNumber,r,i,zy.fromBase64String(e.resumeToken))}function Yw(e,t){var n,r=Gw(t.snapshotVersion),i=Gw(t.lastLimboFreeSnapshotVersion);n=nk(t.target)?Jb(e.ie,t.target):Zb(e.ie,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ek(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Xw(e){var t=$b({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?mk(t,t.limit,"L"):t}function Jw(e,t){return new Vw(t.largestBatchId,Xb(e.ie,t.overlayMutation))}function Zw(e,t){var n=t.path.lastSegment();return[e,cw(t.path.popLast()),n]}function $w(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Gw(r.readTime),documentKey:cw(r.documentKey.path),largestBatchId:r.largestBatchId}}var ex=function(){function e(){d(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return tx(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Ww(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return tx(e).put({bundleId:(n=t).id,createTime:Gw(Fb(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return nx(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Xw(t.bundledQuery),readTime:Ww(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return nx(e).put(function(e){return{name:e.name,readTime:Gw(Fb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function tx(e){return Fw(e,"bundles")}function nx(e){return Fw(e,"namedQueries")}var rx=function(){function e(t,n){d(this,e),this.yt=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return ix(e).get(Zw(this.userId,t)).next((function(e){return e?Jw(n.yt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=db();return xy.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Vw(t,a);i.push(r.oe(e,o))})),xy.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(cw(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(ix(e).Y("collectionPathOverlayIndex",i))})),xy.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=db(),a=cw(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ix(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Jw(r.yt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=db(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ix(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Jw(a.yt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"oe",value:function(e,t){return ix(e).put(function(e,t,n){var r=l(Zw(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Yb(e.ie,n.mutation)}}(this.yt,this.userId,t))}}],[{key:"re",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ix(e){return Fw(e,"documentOverlays")}var ax=function(){function e(){d(this,e)}return y(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Wy(e.integerValue));else if("doubleValue"in e){var n=Wy(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),By(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Hy(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?dg(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Fm()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),sy.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();function ox(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ux(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ox(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ax.Ie=new ax;var sx=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"Te",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ee(n.value),n=t.next();this.Ae()}},{key:"Re",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{var a=r.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ae()}},{key:"Ve",value:function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"Se",value:function(e){var t=this.De(e),n=ux(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"xe",value:function(e){var t=this.De(e),n=ux(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"Oe",value:function(){this.Me(255),this.Me(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Fe",value:function(){return this.buffer.slice(0,this.position)}},{key:"De",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ee",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}},{key:"Ae",value:function(){this.ke(0),this.ke(1)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"ke",value:function(e){this.Ce(1),this.buffer[this.position++]=e}},{key:"Me",value:function(e){this.Ce(1),this.buffer[this.position++]=~e}},{key:"Ce",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),cx=function(){function e(t){d(this,e),this.$e=t}return y(e,[{key:"we",value:function(e){this.$e.Te(e)}},{key:"fe",value:function(e){this.$e.ve(e)}},{key:"le",value:function(e){this.$e.Se(e)}},{key:"ae",value:function(){this.$e.Ne()}}]),e}(),lx=function(){function e(t){d(this,e),this.$e=t}return y(e,[{key:"we",value:function(e){this.$e.Re(e)}},{key:"fe",value:function(e){this.$e.Ve(e)}},{key:"le",value:function(e){this.$e.xe(e)}},{key:"ae",value:function(){this.$e.Oe()}}]),e}(),fx=function(){function e(){d(this,e),this.$e=new sx,this.Be=new cx(this.$e),this.Le=new lx(this.$e)}return y(e,[{key:"seed",value:function(e){this.$e.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Be:this.Le}},{key:"Fe",value:function(){return this.$e.Fe()}},{key:"reset",value:function(){this.$e.reset()}}]),e}(),hx=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"Ue",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function dx(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=px(e.arrayValue,t.arrayValue))?n:0!==(n=px(e.directionalValue,t.directionalValue))?n:sy.comparator(e.documentKey,t.documentKey)}function px(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var vx=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];var n,r=A(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Qe=i:this.Ge.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"je",value:function(e){Um(e.collectionGroup===this.collectionId);var t=ly(e);if(void 0!==t&&!this.We(t))return!1;for(var n=fy(e),r=0,i=0;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){var a=n[r];if(!this.ze(this.Qe,a)||!this.He(this.Ke[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}},{key:"We",value:function(e){var t,n=A(this.Ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.ze(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ze",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"He",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function mx(e){var t,n;if(Um(e instanceof xg||e instanceof _g),e instanceof xg){if(e instanceof Fg){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return xg.create(e.field,"==",t)})))||[];return _g.create(r,"or")}return e}var i=e.filters.map((function(e){return mx(e)}));return _g.create(i,e.op)}function yx(e){if(0===e.getFilters().length)return[];var t=wx(mx(e));return Um(bx(t)),gx(t)||kx(t)?[t]:t.getFilters()}function gx(e){return e instanceof xg}function kx(e){return e instanceof _g&&Sg(e)}function bx(e){return gx(e)||kx(e)||function(e){if(e instanceof _g&&Eg(e)){var t,n=A(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!gx(r)&&!kx(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function wx(e){if(Um(e instanceof xg||e instanceof _g),e instanceof xg)return e;if(1===e.filters.length)return wx(e.filters[0]);var t=e.filters.map((function(e){return wx(e)})),n=_g.create(t,e.op);return bx(n=Ix(n))?n:(Um(n instanceof _g),Um(Ig(n)),Um(n.filters.length>1),n.filters.reduce((function(e,t){return xx(e,t)})))}function xx(e,t){var n;return Um(e instanceof xg||e instanceof _g),Um(t instanceof xg||t instanceof _g),n=e instanceof xg?t instanceof xg?function(e,t){return _g.create([e,t],"and")}(e,t):_x(e,t):t instanceof xg?_x(t,e):function(e,t){if(Um(e.filters.length>0&&t.filters.length>0),Ig(e)&&Ig(t))return Ng(e,t.getFilters());var n=Eg(e)?e:t,r=Eg(e)?t:e,i=n.filters.map((function(e){return xx(e,r)}));return _g.create(i,"or")}(e,t),Ix(n)}function _x(e,t){if(Ig(t))return Ng(t,e.getFilters());var n=t.filters.map((function(t){return xx(e,t)}));return _g.create(n,"or")}function Ix(e){if(Um(e instanceof xg||e instanceof _g),e instanceof xg)return e;var t=e.getFilters();if(1===t.length)return Ix(t[0]);if(Tg(e))return e;var n=t.map((function(e){return Ix(e)})),r=[];return n.forEach((function(t){t instanceof xg?r.push(t):t instanceof _g&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:_g.create(r,e.op)}var Ex=function(){function e(){d(this,e),this.Je=new Sx}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),xy.resolve()}},{key:"getCollectionParents",value:function(e,t){return xy.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return xy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return xy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return xy.resolve(null)}},{key:"getIndexType",value:function(e,t){return xy.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return xy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return xy.resolve(null)}},{key:"getMinOffset",value:function(e,t){return xy.resolve(my.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return xy.resolve(my.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return xy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return xy.resolve()}}]),e}(),Sx=function(){function e(){d(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Gg(ay.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Gg(ay.comparator)).toArray()}}]),e}(),Tx=new Uint8Array(0),Ax=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Ye=new Sx,this.Xe=new ub((function(e){return ek(e)}),(function(e,t){return tk(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ye.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ye.add(t)}));var a={collectionId:r,parent:cw(i)};return Cx(e).put(a)}return xy.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ty(t),""],!1,!0);return Cx(e).W(r).next((function(e){var r,i=A(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(hw(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Rx(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Dx(e);return a.next((function(e){o.put($w(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Rx(e),r=Dx(e),i=Nx(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Nx(e),i=!0,a=new Map;return xy.forEach(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=gb(),o=[];return xy.forEach(a,(function(i,a){var u;Pm("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ek(t)));var s=function(e,t){var n=ly(t);if(void 0===n)return null;var r,i=A(rk(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=A(fy(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=A(rk(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=A(fy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ik(e,o.fieldPath,e.startAt):ak(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new gg(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=A(fy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ak(e,o.fieldPath,e.endAt):ik(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new gg(r,i)}(a,i),h=n.en(i,a,l),d=n.en(i,a,f),p=n.nn(i,a,c),v=n.sn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return xy.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=sy.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return xy.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:yx(_g.create(e.filters,"and")).map((function(t){return $g(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Xe.set(e,t),t)}},{key:"sn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.rn(t[d/c]):Tx,f=u.on(e,s,n[d%c],r),p=u.un(e,s,i[d%c],a),v=o.map((function(t){return u.on(e,s,t,!0)}));l.push.apply(l,h(u.createRange(f,p,v)))},d=0;d<s;++d)f();return l}},{key:"on",value:function(e,t,n,r){var i=new hx(e,sy.empty(),t,n);return r?i:i.Ue()}},{key:"un",value:function(e,t,n,r){var i=new hx(e,sy.empty(),t,n);return r?i.Ue():i}},{key:"tn",value:function(e,t){var n=new vx(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=A(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.je(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return xy.forEach(i,(function(t){return n.tn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Gg(uy.comparator),r=!1,i=A(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=A(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=A(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"cn",value:function(e,t){var n,r=new fx,i=A(fy(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);ax.Ie.ue(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Fe()}},{key:"rn",value:function(e){var t=new fx;return ax.Ie.ue(e,t.qe(0)),t.Fe()}},{key:"an",value:function(e,t){var n=new fx;return ax.Ie.ue(og(this.databaseId,t),n.qe(function(e){var t=fy(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}},{key:"nn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new fx);var i,a=0,o=A(fy(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=A(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.hn(t,s.fieldPath)&&sg(c))r=this.ln(r,s,c);else{var h=f.qe(s.kind);ax.Ie.ue(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"en",value:function(e,t,n){return this.nn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Fe();return t}},{key:"ln",value:function(e,t,n){var r,i=h(e),a=[],o=A(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=A(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new fx;f.seed(l.Fe()),ax.Ie.ue(s,f.qe(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"hn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof xg&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Rx(e),i=Dx(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return xy.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new dy(t.sequenceNumber,new my(Ww(t.readTime),new sy(hw(t.documentKey)),t.largestBatchId)):dy.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new hy(uy.fromServerFormat(n),r)}));return new cy(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:$m(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Rx(e),a=Dx(e);return this.dn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return xy.forEach(t,(function(t){return a.put($w(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return xy.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?xy.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),xy.forEach(a,(function(r){return n._n(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?xy.resolve():n.mn(e,i,r,t,a)}))}))}))}))}},{key:"gn",value:function(e,t,n,r){return Nx(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}},{key:"yn",value:function(e,t,n,r){return Nx(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}},{key:"_n",value:function(e,t,n){var r=Nx(e),i=new Gg(dx);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},(function(e,r){i=i.add(new hx(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Gg(dx),r=this.cn(t,e);if(null==r)return n;var i=ly(t);if(null!=i){var a=e.data.field(i.fieldPath);if(sg(a)){var o,u=A(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new hx(t.indexId,e.key,this.rn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new hx(t.indexId,e.key,Tx,r));return n}},{key:"mn",value:function(e,t,n,r,i){var a=this;Pm("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Hg(a),s=Hg(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Hg(o)):l?(i(u),u=Hg(a)):(u=Hg(a),s=Hg(o))}}(r,i,dx,(function(r){o.push(a.gn(e,t,n,r))}),(function(r){o.push(a.yn(e,t,n,r))})),xy.waitFor(o)}},{key:"dn",value:function(e){var t=1;return Dx(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return dx(e,t)})).filter((function(e,t,n){return!t||0!==dx(e,n[t-1])}));var r=[];r.push(e);var i,a=A(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=dx(o,e),s=dx(o,t);if(0===u)r[0]=e.Ue();else if(u>0&&s<0)r.push(o),r.push(o.Ue());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Tx,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Tx,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"pn",value:function(e,t){return dx(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Px)}},{key:"getMinOffset",value:function(e,t){var n=this;return xy.mapArray(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){return e||Fm()}))})).next(Px)}}]),e}();function Cx(e){return Fw(e,"collectionParents")}function Nx(e){return Fw(e,"indexEntries")}function Rx(e){return Fw(e,"indexConfiguration")}function Dx(e){return Fw(e,"indexState")}function Px(e){Um(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;yy(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new my(t.readTime,t.documentKey,n)}var Ox={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lx=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Mx(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Um(1===u)})));var c,l=[],f=A(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=vw(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return xy.waitFor(a).next((function(){return l}))}function Fx(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Fm();t=e.noDocument}return JSON.stringify(t).length}Lx.DEFAULT_COLLECTION_PERCENTILE=10,Lx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lx.DEFAULT=new Lx(41943040,Lx.DEFAULT_COLLECTION_PERCENTILE,Lx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lx.DISABLED=new Lx(-1,0,0);var Ux=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vx(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Bx(e),o=Vx(e);return o.add({}).next((function(u){Um("number"==typeof u);var s,c=new Uw(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Yb(e.ie,t)})),i=n.mutations.map((function(t){return Yb(e.ie,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.yt,i.userId,c),f=[],h=new Gg((function(e,t){return $m(e.canonicalString(),t.canonicalString())})),d=A(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=vw(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,mw))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),xy.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Vx(e).get(t).next((function(e){return e?(Um(e.userId===n.userId),Hw(n.yt,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?xy.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Vx(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Um(t.batchId>=r),a=Hw(n.yt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Vx(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vx(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Hw(t.yt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=pw(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Bx(e).Z({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],f=u[2],h=hw(c);if(s===n.userId&&t.path.isEqual(h))return Vx(e).get(f).next((function(e){if(!e)throw Fm();Um(e.userId===n.userId),a.push(Hw(n.yt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gg($m),i=[];return t.forEach((function(t){var a=pw(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Bx(e).Z({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],f=hw(s);u===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(u)})),xy.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=pw(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Gg($m);return Bx(e).Z({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],f=o[2],h=hw(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Vx(e).get(t).next((function(e){if(null===e)throw Fm();Um(e.userId===n.userId),r.push(Hw(n.yt,e))})))})),xy.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Mx(e.se,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),xy.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return xy.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Bx(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=hw(e[1]);i.push(a)}else r.done()})).next((function(){Um(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return jx(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return qx(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"re",value:function(t,n,r,i){return Um(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function jx(e,t,n){var r=pw(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Bx(e).Z({range:a,X:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Vx(e){return Fw(e,"mutations")}function Bx(e){return Fw(e,"documentMutations")}function qx(e){return Fw(e,"mutationQueues")}var zx=function(){function e(t){d(this,e),this.bn=t}return y(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),Kx=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.yt=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new zx(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return ry.fromTimestamp(new ny(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Gx(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Um(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Gx(e).Z((function(o,u){var s=Qw(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return xy.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Gx(e).Z((function(e,n){var r=Qw(n);t(r)}))}},{key:"Vn",value:function(e){return Wx(e).get("targetGlobalKey").next((function(e){return Um(null!==e),e}))}},{key:"Sn",value:function(e,t){return Wx(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return Gx(e).put(Yw(this.yt,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ek(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Gx(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Qw(n);tk(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Hx(e);return t.forEach((function(t){var o=cw(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),xy.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Hx(e);return xy.forEach(t,(function(t){var a=cw(t.path);return xy.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Hx(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Hx(e),i=gb();return r.Z({range:n,X:!0},(function(e,t,n){var r=hw(e[1]),a=new sy(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=cw(t.path),r=IDBKeyRange.bound([n],[ty(n)],!1,!0),i=0;return Hx(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return Gx(e).get(t).next((function(e){return e?Qw(e):null}))}}]),e}();function Gx(e){return Fw(e,"targets")}function Wx(e){return Fw(e,"targetGlobal")}function Hx(e){return Fw(e,"targetDocuments")}function Qx(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=$m(r,o);return 0===s?$m(i,u):s}var Yx=function(){function e(t){d(this,e),this.xn=t,this.buffer=new Gg(Qx),this.Nn=0}return y(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Qx(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Xx=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;Pm("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Ty(e.t0)){e.next=12;break}Pm("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,by(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Jx=function(){function e(t,n){d(this,e),this.$n=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return xy.resolve(Oy.at);var r=new Yx(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Pm("LruGarbageCollector","Garbage collection skipped; disabled"),xy.resolve(Ox)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Pm("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Ox):n.qn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"qn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Pm("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Dm()<=Bt.DEBUG&&Pm("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),xy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Zx=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new Jx(e,t)}(this,n)}return y(e,[{key:"Bn",value:function(e){var t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Un",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return $x(e,n)}},{key:"removeReference",value:function(e,t,n){return $x(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return $x(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return qx(e).tt((function(r){return jx(e,r,t).next((function(e){return e&&(n=!0),xy.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ry.min()),Hx(e).delete([0,cw(o.path)])}))}));i.push(s)}})).next((function(){return xy.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return $x(e,t)}},{key:"Kn",value:function(e,t){var n,r=Hx(e),i=Oy.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Oy.at&&t(new sy(hw(n)),i),i=s,n=u):i=Oy.at})).next((function(){i!==Oy.at&&t(new sy(hw(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function $x(e,t){return Hx(e).put(function(e,t){return{targetId:0,path:cw(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var e_=function(){function e(){d(this,e),this.changes=new ub((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Jg.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?xy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),t_=function(){function e(t){d(this,e),this.yt=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return a_(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return a_(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Kw(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Jg.newInvalidDocument(t);return a_(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(o_(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:Jg.newInvalidDocument(t)};return a_(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(o_(t))},(function(e,i){r={document:n.jn(t,i),size:Fx(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=cb();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=cb(),i=new qg(sy.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,Fx(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return xy.resolve();var r=new Gg(s_);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(o_(r.first()),o_(r.last())),a=r.getIterator(),o=a.getNext();return a_(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=sy.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&s_(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(o_(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Kw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return a_(e).W(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=cb(),o=A(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.jn(sy.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(bk(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=cb(),o=u_(t,n),u=u_(t,my.max());return a_(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(sy.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new r_(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return i_(e).get("remoteDocumentGlobalKey").next((function(e){return Um(!!e),e}))}},{key:"Qn",value:function(e,t){return i_(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Hb(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=sy.fromSegments(t.noDocument.path),i=Ww(t.noDocument.readTime);n=Jg.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Fm();var a=sy.fromSegments(t.unknownDocument.path),o=Ww(t.unknownDocument.version);n=Jg.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new ny(e[0],e[1]);return ry.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!n.isNoDocument()||!n.version.isEqual(ry.min()))return n}return Jg.newInvalidDocument(e)}}]),e}();function n_(e){return new t_(e)}var r_=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new ub((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Gg((function(e,t){return $m(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=zw(t.Yn.yt,o);i=i.add(a.path.popLast());var c=Fx(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=zw(t.Yn.yt,o.convertToNoDocument(ry.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),xy.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(e_);function i_(e){return Fw(e,"remoteDocumentGlobal")}function a_(e){return Fw(e,"remoteDocumentsV14")}function o_(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function u_(e,t){var n=t.documentKey.path.toArray();return[e,Kw(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function s_(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=$m(n[a],r[a]))return i;return(i=$m(n.length,r.length))||((i=$m(n[n.length-2],r[r.length-2]))||$m(n[n.length-1],r[r.length-1]))}var c_=y((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),l_=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Wk(r.mutation,e,Qg.empty(),ny.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,gb()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gb(),i=db();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=fb();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=db();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,gb())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=cb(),a=vb(),o=vb();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Xk)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Wk(o.mutation,t,o.mutation.getFieldMask(),ny.now())):a.set(t.key,Qg.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new c_(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=vb(),i=new qg((function(e,t){return e-t})),a=gb();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=A(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Qg.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||gb()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=pb();c.forEach((function(e){if(!a.has(e)){var n=Kk(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return xy.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return sy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):xy.resolve(db()),u=-1,s=a;return o.next((function(t){return xy.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?xy.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,gb())})).next((function(e){return{batchId:u,changes:hb(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new sy(t)).next((function(e){var t=fb();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=fb();return this.indexManager.getCollectionParents(e,i).next((function(o){return xy.forEach(o,(function(o){var u=function(e,t){return new ok(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Jg.newInvalidDocument(r)))}));var n=fb();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Wk(a.mutation,i,Qg.empty(),ny.now()),bk(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),f_=function(){function e(t){d(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return xy.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Fb(n.createTime)}),xy.resolve()}},{key:"getNamedQuery",value:function(e,t){return xy.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Xw(e.bundledQuery),readTime:Fb(e.readTime)}}(t)),xy.resolve()}}]),e}(),h_=function(){function e(){d(this,e),this.overlays=new qg(sy.comparator),this.es=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return xy.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=db();return xy.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),xy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),xy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=db(),i=t.length+1,a=new sy(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return xy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new qg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=db(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=db(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return xy.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Vw(t,n));var a=this.es.get(t);void 0===a&&(a=gb(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),d_=function(){function e(){d(this,e),this.ns=new Gg(p_.ss),this.rs=new Gg(p_.os)}return y(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new p_(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new p_(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new sy(new ay([])),r=new p_(n,e),i=new p_(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new sy(new ay([])),n=new p_(t,e),r=new p_(t,e+1),i=gb();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new p_(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),p_=function(){function e(t,n){d(this,e),this.key=t,this._s=n}return y(e,null,[{key:"ss",value:function(e,t){return sy.comparator(e.key,t.key)||$m(e._s,t._s)}},{key:"os",value:function(e,t){return $m(e._s,t._s)||sy.comparator(e.key,t.key)}}]),e}(),v_=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Gg(p_.ss)}return y(e,[{key:"checkEmpty",value:function(e){return xy.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Uw(i,t,n,r);this.mutationQueue.push(a);var o,u=A(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new p_(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return xy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return xy.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return xy.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return xy.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return xy.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new p_(t,0),i=new p_(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),xy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gg($m);return t.forEach((function(e){var t=new p_(e,0),i=new p_(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),xy.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;sy.isDocumentKey(i)||(i=i.child(""));var a=new p_(new sy(i),0),o=new Gg($m);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),xy.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Um(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return xy.forEach(t.mutations,(function(i){var a=new p_(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new p_(t,0),r=this.gs.firstAfterOrEqual(n);return xy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,xy.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),m_=function(){function e(t){d(this,e),this.Es=t,this.docs=new qg(sy.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return xy.resolve(n?n.document.mutableCopy():Jg.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=cb();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Jg.newInvalidDocument(e))})),xy.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=cb(),a=t.path,o=new sy(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||yy(vy(l),n)<=0||(r.has(l.key)||bk(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return xy.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Fm()}},{key:"As",value:function(e,t){return xy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new y_(this)}},{key:"getSize",value:function(e){return xy.resolve(this.size)}}]),e}(),y_=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).Yn=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),xy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(e_),g_=function(){function e(t){d(this,e),this.persistence=t,this.Rs=new ub((function(e){return ek(e)}),tk),this.lastRemoteSnapshotVersion=ry.min(),this.highestTargetId=0,this.bs=0,this.Ps=new d_,this.targetCount=0,this.vs=zx.Pn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),xy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return xy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return xy.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),xy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),xy.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new zx(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,xy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),xy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,xy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),xy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return xy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return xy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),xy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),xy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),xy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return xy.resolve(n)}},{key:"containsKey",value:function(e,t){return xy.resolve(this.Ps.containsKey(t))}}]),e}(),k_=function(){function e(t,n){var r=this;d(this,e),this.Vs={},this.overlays={},this.Ss=new Oy(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new g_(this),this.indexManager=new Ex,this.remoteDocumentCache=new m_((function(e){return r.referenceDelegate.xs(e)})),this.yt=new qw(n),this.Ns=new f_(this.yt)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new h_,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new v_(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Pm("MemoryPersistence","Starting transaction:",e);var i=new b_(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return xy.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),b_=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(ky),w_=function(){function e(t){d(this,e),this.persistence=t,this.Fs=new d_,this.$s=null}return y(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Fm()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),xy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),xy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),xy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xy.forEach(this.Ls,(function(r){var i=sy.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,ry.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return xy.or([function(){return xy.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),x_=function(){function e(t){d(this,e),this.yt=t}return y(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new _y("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dw,{unique:!0}),e.createObjectStore("documentMutations")}(e),__(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=xy.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),__(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ry.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dw,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return xy.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Us(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Aw});t.createIndex("collectionPathOverlayIndex",Cw,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Nw,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:yw});t.createIndex("documentKeyIndex",gw),t.createIndex("collectionGroupIndex",kw)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Iw}).createIndex("sequenceNumberIndex",Ew,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Sw}).createIndex("documentKeyIndex",Tw,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Fx(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Us",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return xy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return xy.forEach(r,(function(r){Um(r.userId===n.userId);var i=Hw(t.yt,r);return Mx(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new ay(n),o=function(e){return[0,cw(e)]}(a);r.push(t.get(o).next((function(n){return n?xy.resolve():function(n){return t.put({targetId:0,path:cw(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return xy.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:_w});var n=t.store("collectionParents"),r=new Sx,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:cw(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new ay(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],hw(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Qw(r),a=Yw(t.yt,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new sy(ay.fromString(i.document.name).popFirst(5)):i.noDocument?sy.fromSegments(i.noDocument.path):i.unknownDocument?sy.fromSegments(i.unknownDocument.path):Fm()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return xy.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=n_(this.yt),a=new k_(w_.Bs,this.yt.ie);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:gb();Hw(n.yt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),xy.forEach(r,(function(e,r){var o=new Cm(r),u=rx.re(n.yt,o),s=a.getIndexManager(o),c=Ux.re(o,n.yt,s,a.referenceDelegate);return new l_(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Mw(t,Oy.at),e).next()}))}))}}]),e}();function __(e){e.createObjectStore("targetDocuments",{keyPath:ww}).createIndex("documentTargetsIndex",xw,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bw,{unique:!0}),e.createObjectStore("targetGlobal")}var I_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",E_=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Bm(Vm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zx(this,i),this.ii=n+"main",this.yt=new qw(s),this.ri=new Iy(this.ii,this.Xs,new x_(this.yt)),this.Cs=new Kx(this.referenceDelegate,this.yt),this.remoteDocumentCache=n_(this.yt),this.Ns=new ex,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Om("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Bm(Vm.FAILED_PRECONDITION,I_);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Oy(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Mt(Ot().mark((function n(r){return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Mt(Ot().mark((function t(n){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return T_(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Ty(t))return Pm("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Pm("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return S_(e).get("owner").next((function(e){return xy.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return T_(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r,i,a=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Fw(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return xy.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=A(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?xy.resolve(!0):S_(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Bm(Vm.FAILED_PRECONDITION,I_);return!1}}return!(!t.networkEnabled||!t.inForeground)||T_(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Pm("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Mt(Ot().mark((function e(){var t=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Mw(e,Oy.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return T_(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return Ux.re(e,this.yt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Ax(e,this.yt.ie.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return rx.re(this.yt,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Pm("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Lw:14===i?Ow:13===i?Pw:12===i?Dw:11===i?Rw:void Fm();return this.ri.runTransaction(e,o,u,(function(i){return a=new Mw(i,r.Ss?r.Ss.next():Oy.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw Om("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Bm(Vm.FAILED_PRECONDITION,gy);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return S_(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Bm(Vm.FAILED_PRECONDITION,I_)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return S_(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=S_(e);return n.get("owner").next((function(e){return t.mi(e)?(Pm("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):xy.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Om("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!vt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pm("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Om("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(Uh){Om("Failed to set zombie client id.",Uh)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(Uh){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Iy.C()}}]),e}();function S_(e){return Fw(e,"owner")}function T_(e){return Fw(e,"clientMetadata")}function A_(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var C_=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return y(e,null,[{key:"Ci",value:function(t,n){var r,i=gb(),a=gb(),o=A(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),N_=function(){function e(){d(this,e),this.xi=!1}return y(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(ck(t))return xy.resolve(null);var r=pk(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=mk(t,null,"F"),r=pk(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=gb.apply(void 0,h(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,mk(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return ck(t)||r.isEqual(ry.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Dm()<=Bt.DEBUG&&Pm("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),kk(t)),i.Bi(e,o,t,py(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Gg(xk(e));return t.forEach((function(t,r){bk(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Dm()<=Bt.DEBUG&&Pm("QueryEngine","Using full collection scan to execute query:",kk(t)),this.Ni.getDocumentsMatchingQuery(e,t,my.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),R_=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new qg($m),this.Ui=new ub((function(e){return ek(e)}),tk),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return y(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new l_(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function D_(e,t,n,r){return new R_(e,t,n,r)}function P_(e,t){return O_.apply(this,arguments)}function O_(){return O_=Mt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jm(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=gb(),s=A(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=A(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=A(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=A(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function L_(e,t){var n=jm(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=xy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Um(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=gb(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function M_(e){var t=jm(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function F_(e,t){var n=jm(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(zy.EMPTY_BYTE_STRING,ry.min()).withLastLimboFreeSnapshotVersion(ry.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=cb(),s=gb();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(U_(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(ry.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return xy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.qi=i,e}))}function U_(e,t,n){var r=gb(),i=gb();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=cb();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(ry.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Pm("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function j_(e,t){var n=jm(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function V_(e,t){var n=jm(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,xy.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new Bw(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function B_(e,t,n){return q_.apply(this,arguments)}function q_(){return q_=Mt(Ot().mark((function e(t,n,r){var i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=jm(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ty(e.t1)){e.next=12;break}throw e.t1;case 12:Pm("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),q_.apply(this,arguments)}function z_(e,t,n){var r=jm(e),i=ry.min(),a=gb();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=jm(e),i=r.Ui.get(n);return void 0!==i?xy.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,pk(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:ry.min(),n?a:gb())})).next((function(e){return W_(r,wk(t),e),{documents:e,Hi:a}}))}))}function K_(e,t){var n=jm(e),r=jm(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function G_(e,t){var n=jm(e),r=n.Ki.get(t)||ry.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,py(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return W_(n,t,e),e}))}function W_(e,t,n){var r=e.Ki.get(t)||ry.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function H_(e,t,n,r){return Q_.apply(this,arguments)}function Q_(){return Q_=Mt(Ot().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=jm(t),o=gb(),u=cb(),s=A(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,V_(a,function(e){return pk(sk(ay.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return U_(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function Y_(e,t){return X_.apply(this,arguments)}function X_(){return X_=Mt(Ot().mark((function e(t,n){var r,i,a,o=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:gb(),e.next=3,V_(t,pk(Xw(n.bundledQuery)));case 3:return i=e.sent,a=jm(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Fb(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(zy.EMPTY_BYTE_STRING,t);return a.qi=a.qi.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function J_(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Z_(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function $_(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var eI=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Bm(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Om("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),tI=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Bm(i.error.code,i.error.message))),a?new e(t,i.state,r):(Om("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),nI=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=bb(),o=0;i&&o<r.activeTargetIds.length;++o)i=qy(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Om("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),rI=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Om("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),iI=function(){function e(){d(this,e),this.activeTargetIds=bb()}return y(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),aI=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new qg($m),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=J_(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new iI),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return y(e,[{key:"start",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=A(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(J_(this.persistenceKey,i)))&&(o=nI.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=A(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem($_(this.persistenceKey,e));if(n){var r=tI.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem($_(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Pm("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Pm("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Pm("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Pm("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Om("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Mt(Ot().mark((function e(){var r,i,a,o,u,s,c;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=Oy.at;if(null!=e)try{var n=JSON.parse(e);Um("number"==typeof n),t=n}catch(e){Om("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Oy.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new eI(this.currentUser,e,t,n),i=Z_(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=Z_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=$_(this.persistenceKey,e),i=new tI(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return nI.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return eI.Zi(new Cm(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return tI.Zi(r,t)}},{key:"yr",value:function(e){return rI.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Pm("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=bb();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),oI=function(){function e(){d(this,e),this.Lr=new iI,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new iI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),uI=function(){function e(){d(this,e)}return y(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),sI=function(){function e(){var t=this;d(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return y(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Pm("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=A(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Pm("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=A(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),cI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},lI=function(){function e(t){d(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return y(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),fI=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return y(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Tm;o.setWithCredentials(!0),o.listenOnce(xm.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case wm.NO_ERROR:var t=o.getResponseJson();Pm("Connection","XHR received:",JSON.stringify(t)),i(t);break;case wm.TIMEOUT:Pm("Connection",'RPC "'+e+'" timed out'),a(new Bm(Vm.DEADLINE_EXCEEDED,"Request time out"));break;case wm.HTTP_ERROR:var n=o.getStatus();if(Pm("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Vm).indexOf(t)>=0?t:Vm.UNKNOWN}(u.status);a(new Bm(s,u.message))}else a(new Bm(Vm.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Bm(Vm.UNAVAILABLE,"Connection failed."));break;default:Fm()}}finally{Pm("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=km(),a=bm(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Em({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");Pm("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new lI({Hr:function(e){l?Pm("Connection","Not sending because WebChannel is closed:",e):(c||(Pm("Connection","Opening WebChannel transport."),s.open(),c=!0),Pm("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Sm.EventType.OPEN,(function(){l||Pm("Connection","WebChannel transport opened.")})),h(s,Sm.EventType.CLOSE,(function(){l||(l=!0,Pm("Connection","WebChannel transport closed"),f.io())})),h(s,Sm.EventType.ERROR,(function(e){l||(l=!0,Lm("Connection","WebChannel transport errored:",e),f.io(new Bm(Vm.UNAVAILABLE,"The operation could not be completed")))})),h(s,Sm.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Um(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Pm("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=eb[e];if(void 0!==t)return ob(t)}(a),u=i.message;void 0===o&&(o=Vm.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Bm(o,u)),s.close()}else Pm("Connection","WebChannel received:",n),f.ro(n)}})),h(a,_m.STAT_EVENT,(function(e){e.stat===Im.PROXY?Pm("Connection","Detected buffering proxy"):e.stat===Im.NOPROXY&&Pm("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Pm("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Pm("RestConnection","Received: ",e),e}),(function(t){throw Lm("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=cI[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function hI(){return"undefined"!=typeof window?window:null}function dI(){return"undefined"!=typeof document?document:null}function pI(e){return new Pb(e,!0)}var vI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Pm("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),mI=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new vI(t,n)}return y(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Vm.RESOURCE_EXHAUSTED?(Om(n.toString()),Om("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===Vm.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Bm(Vm.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(Mt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Pm("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Pm("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),yI=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s}return y(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fm()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(Um(void 0===t||"string"==typeof t),zy.fromBase64String(t||"")):(Um(void 0===t||t instanceof Uint8Array),zy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Vm.UNKNOWN:ob(e.code);return new Bm(t,e.message||"")}(o);n=new Eb(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Bb(e,s.document.name),l=Fb(s.document.updateTime),f=s.document.createTime?Fb(s.document.createTime):ry.min(),h=new Yg({mapValue:{fields:s.document.fields}}),d=Jg.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new _b(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Bb(e,m.document),g=m.readTime?Fb(m.readTime):ry.min(),k=Jg.newNoDocument(y,g),b=m.removedTargetIds||[];n=new _b([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Bb(e,w.document),_=w.removedTargetIds||[];n=new _b([],_,x,null)}else{if(!("filter"in t))return Fm();t.filter;var I=t.filter;I.targetId;var E=I.count||0,S=new ib(E),T=I.targetId;n=new Ib(T,S)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return ry.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ry.min():t.readTime?Fb(t.readTime):ry.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Kb(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=nk(r)?{documents:Jb(e,r)}:{query:Zb(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Lb(e,t.resumeToken):t.snapshotVersion.compareTo(ry.min())>0&&(n.readTime=Ob(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fm()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Kb(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(mI),gI=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s.Jo=!1,s}return y(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,ca(b(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Um(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Um(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Fb(e.updateTime):Fb(t);return n.isEqual(ry.min())&&(n=Fb(t)),new Vk(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Fb(e.commitTime);return this.listener.Zo(n,t)}return Um(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Kb(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Yb(t.yt,e)}))};this.Bo(n)}}]),n}(mI),kI=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return y(n,[{key:"su",value:function(){if(this.nu)throw new Bm(Vm.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Vm.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Bm(Vm.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Vm.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Bm(Vm.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return y((function e(){d(this,e)}))}());var bI=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return y(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Om(t),this.ou=!1):Pm("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),wI=y((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=DI(o),!e.t0){e.next=5;break}return Pm("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=jm(t))._u.add(4),e.next=4,II(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,xI(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new bI(r,i)}));function xI(e){return _I.apply(this,arguments)}function _I(){return _I=Mt(Ot().mark((function e(t){var n,r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!DI(t)){e.next=18;break}n=A(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),_I.apply(this,arguments)}function II(e){return EI.apply(this,arguments)}function EI(){return EI=Mt(Ot().mark((function e(t){var n,r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=A(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),EI.apply(this,arguments)}function SI(e,t){var n=jm(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),RI(n)?NI(n):uE(n).ko()&&AI(n,t))}function TI(e,t){var n=jm(e),r=uE(n);n.du.delete(t),r.ko()&&CI(n,t),0===n.du.size&&(r.ko()?r.Fo():DI(n)&&n.gu.set("Unknown"))}function AI(e,t){e.yu.Ot(t.targetId),uE(e).zo(t)}function CI(e,t){e.yu.Ot(t),uE(e).Ho(t)}function NI(e){e.yu=new Tb({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),uE(e).start(),e.gu.uu()}function RI(e){return DI(e)&&!uE(e).No()&&e.du.size>0}function DI(e){return 0===jm(e)._u.size}function PI(e){e.yu=void 0}function OI(e){return LI.apply(this,arguments)}function LI(){return LI=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){AI(t,e)}));case 1:case"end":return e.stop()}}),e)}))),LI.apply(this,arguments)}function MI(e,t){return FI.apply(this,arguments)}function FI(){return FI=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:PI(t),RI(t)?(t.gu.hu(n),NI(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),FI.apply(this,arguments)}function UI(e,t,n){return jI.apply(this,arguments)}function jI(){return jI=Mt(Ot().mark((function e(t,n,r){var i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof Eb&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Mt(Ot().mark((function e(t,n){var r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=A(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Pm("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,VI(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof _b?t.yu.Kt(n):n instanceof Ib?t.yu.Jt(n):t.yu.jt(n),r.isEqual(ry.min())){e.next=29;break}return e.prev=14,e.next=17,M_(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(zy.EMPTY_BYTE_STRING,n.snapshotVersion)),CI(e,t);var r=new Bw(n.target,t,1,n.sequenceNumber);AI(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Pm("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,VI(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),jI.apply(this,arguments)}function VI(e,t,n){return BI.apply(this,arguments)}function BI(){return BI=Mt(Ot().mark((function e(t,n,r){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ty(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,II(t);case 5:t.gu.set("Offline"),r||(r=function(){return M_(t.localStore)}),t.asyncQueue.enqueueRetryable(Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pm("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,xI(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}function qI(e,t){return t().catch((function(n){return VI(e,n,t)}))}function zI(e){return KI.apply(this,arguments)}function KI(){return KI=Mt(Ot().mark((function e(t){var n,r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=jm(t),r=sE(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!GI(n)){e.next=19;break}return e.prev=3,e.next=6,j_(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,WI(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,VI(n,e.t0);case 17:e.next=2;break;case 19:HI(n)&&QI(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),KI.apply(this,arguments)}function GI(e){return DI(e)&&e.fu.length<10}function WI(e,t){e.fu.push(t);var n=sE(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function HI(e){return DI(e)&&!sE(e).No()&&e.fu.length>0}function QI(e){sE(e).start()}function YI(e){return XI.apply(this,arguments)}function XI(){return XI=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sE(t).eu();case 1:case"end":return e.stop()}}),e)}))),XI.apply(this,arguments)}function JI(e){return ZI.apply(this,arguments)}function ZI(){return ZI=Mt(Ot().mark((function e(t){var n,r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=sE(t),r=A(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),ZI.apply(this,arguments)}function $I(e,t,n){return eE.apply(this,arguments)}function eE(){return eE=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=jw.from(i,n,r),e.next=3,qI(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,zI(t);case 5:case"end":return e.stop()}}),e)}))),eE.apply(this,arguments)}function tE(e,t){return nE.apply(this,arguments)}function nE(){return nE=Mt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&sE(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Mt(Ot().mark((function e(t,n){var r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ab(i=n.code)||i===Vm.ABORTED){e.next=7;break}return r=t.fu.shift(),sE(t).Mo(),e.next=5,qI(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,zI(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:HI(t)&&QI(t);case 5:case"end":return e.stop()}}),e)}))),nE.apply(this,arguments)}function rE(e,t){return iE.apply(this,arguments)}function iE(){return iE=Mt(Ot().mark((function e(t,n){var r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=jm(t)).asyncQueue.verifyOperationInProgress(),Pm("RemoteStore","RemoteStore received new credentials"),i=DI(r),r._u.add(3),e.next=6,II(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,xI(r);case 12:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(e,t){return oE.apply(this,arguments)}function oE(){return oE=Mt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jm(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,xI(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,II(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),oE.apply(this,arguments)}function uE(e){return e.pu||(e.pu=function(e,t,n){var r=jm(e);return r.su(),new yI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:OI.bind(null,e),Zr:MI.bind(null,e),Wo:UI.bind(null,e)}),e.wu.push(function(){var t=Mt(Ot().mark((function t(n){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),RI(e)?NI(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:PI(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function sE(e){return e.Iu||(e.Iu=function(e,t,n){var r=jm(e);return r.su(),new gI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:YI.bind(null,e),Zr:tE.bind(null,e),tu:JI.bind(null,e),Zo:$I.bind(null,e)}),e.wu.push(function(){var t=Mt(Ot().mark((function t(n){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,zI(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Pm("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var cE=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new qm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bm(Vm.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function lE(e,t){if(Om("AsyncQueue","".concat(t,": ").concat(e)),Ty(e))return new Bm(Vm.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var fE=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||sy.comparator(e.key,n.key)}:function(e,t){return sy.comparator(e.key,t.key)},this.keyedMap=fb(),this.sortedSet=new qg(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),hE=function(){function e(){d(this,e),this.Tu=new qg(sy.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Fm():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),dE=function(){function e(t,n,r,i,a,o,u,s,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yk(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,fE.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),pE=y((function e(){d(this,e),this.Au=void 0,this.listeners=[]})),vE=y((function e(){d(this,e),this.queries=new ub((function(e){return gk(e)}),yk),this.onlineState="Unknown",this.Ru=new Set}));function mE(e,t){return yE.apply(this,arguments)}function yE(){return yE=Mt(Ot().mark((function e(t,n){var r,i,a,o,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jm(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new pE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=lE(e.t0,"Initialization of query '".concat(kk(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&xE(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),yE.apply(this,arguments)}function gE(e,t){return kE.apply(this,arguments)}function kE(){return kE=Mt(Ot().mark((function e(t,n){var r,i,a,o,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jm(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),kE.apply(this,arguments)}function bE(e,t){var n,r=jm(e),i=!1,a=A(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=A(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&xE(r)}function wE(e,t,n){var r=jm(e),i=r.queries.get(t);if(i){var a,o=A(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function xE(e){e.Ru.forEach((function(e){e.next()}))}var _E=function(){function e(t,n,r){d(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=A(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new dE(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=dE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),IE=function(){function e(t,n){d(this,e),this.ku=t,this.byteLength=n}return y(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),EE=function(){function e(t){d(this,e),this.yt=t}return y(e,[{key:"Ji",value:function(e){return Bb(this.yt,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Hb(this.yt,e.document,!1):Jg.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Fb(e)}}]),e}(),SE=function(){function e(t,n,r){d(this,e),this.Mu=t,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TE(t)}return y(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=ay.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new EE(this.yt),i=A(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=A(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||gb()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H_(this.localStore,new EE(this.yt),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=A(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Y_(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function TE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var AE=y((function e(t){d(this,e),this.key=t})),CE=y((function e(t){d(this,e),this.key=t})),NE=function(){function e(t,n){d(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=gb(),this.mutatedKeys=gb(),this.Gu=xk(t),this.Qu=new fE(this.Gu)}return y(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new hE,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=bk(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fm()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new dE(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new hE,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=gb(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new CE(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new AE(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=gb();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return dE.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),RE=y((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),DE=y((function e(t){d(this,e),this.key=t,this.nc=!1})),PE=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new ub((function(e){return gk(e)}),yk),this.rc=new Map,this.oc=new Set,this.uc=new qg(sy.comparator),this.cc=new Map,this.ac=new d_,this.hc={},this.lc=new Map,this.fc=zx.vn(),this.onlineState="Unknown",this.dc=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function OE(e,t){return LE.apply(this,arguments)}function LE(){return LE=Mt(Ot().mark((function e(t,n){var r,i,a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=TS(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,V_(r.localStore,pk(n));case 8:return u=e.sent,r.isPrimaryClient&&SI(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,ME(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),LE.apply(this,arguments)}function ME(e,t,n,r,i){return FE.apply(this,arguments)}function FE(){return FE=Mt(Ot().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=Mt(Ot().mark((function e(t,n,r,i){var a,o,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,z_(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(rS(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,z_(t.localStore,n,!0);case 3:return o=e.sent,u=new NE(n,o.Hi),s=u.Wu(o.documents),c=xb.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),rS(t,r,l.Xu),f=new RE(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),FE.apply(this,arguments)}function UE(e,t){return jE.apply(this,arguments)}function jE(){return jE=Mt(Ot().mark((function e(t,n){var r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jm(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!yk(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,B_(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),TI(r.remoteStore,i.targetId),tS(r,i.targetId)})).catch(by);case 9:e.next=14;break;case 11:return tS(r,i.targetId),e.next=14,B_(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),jE.apply(this,arguments)}function VE(e,t,n){return BE.apply(this,arguments)}function BE(){return BE=Mt(Ot().mark((function e(t,n,r){var i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=AS(t),e.prev=1,e.next=4,function(e,t){var n,r,i=jm(e),a=ny.now(),o=t.reduce((function(e,t){return e.add(t.key)}),gb());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=cb(),s=gb();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=A(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Hk(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Xk(c.key,l,Xg(l.value.mapValue),Bk.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:hb(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new qg($m)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,oS(i,a.changes);case 9:return e.next=11,zI(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=lE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),BE.apply(this,arguments)}function qE(e,t){return zE.apply(this,arguments)}function zE(){return zE=Mt(Ot().mark((function e(t,n){var r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jm(t),e.prev=1,e.next=4,F_(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Um(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Um(n.nc):e.removedDocuments.size>0&&(Um(n.nc),n.nc=!1))})),e.next=8,oS(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,by(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),zE.apply(this,arguments)}function KE(e,t,n){var r=jm(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=jm(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=A(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&xE(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function GE(e,t,n){return WE.apply(this,arguments)}function WE(){return WE=Mt(Ot().mark((function e(t,n,r){var i,a,o,u,s,c;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=jm(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new qg(sy.comparator)).insert(o,Jg.newNoDocument(o,ry.min())),s=gb().add(o),c=new wb(ry.min(),new Map,new Gg($m),u,s),e.next=9,qE(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),aS(i),e.next=16;break;case 14:return e.next=16,B_(i.localStore,n,!1).then((function(){return tS(i,n,r)})).catch(by);case 16:case"end":return e.stop()}}),e)}))),WE.apply(this,arguments)}function HE(e,t){return QE.apply(this,arguments)}function QE(){return QE=Mt(Ot().mark((function e(t,n){var r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jm(t),i=n.batch.batchId,e.prev=1,e.next=4,L_(r.localStore,n);case 4:return a=e.sent,eS(r,i,null),$E(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,oS(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,by(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),QE.apply(this,arguments)}function YE(e,t,n){return XE.apply(this,arguments)}function XE(){return XE=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jm(t),e.prev=1,e.next=4,function(e,t){var n=jm(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Um(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,eS(i,n,r),$E(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,oS(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,by(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),XE.apply(this,arguments)}function JE(e,t){return ZE.apply(this,arguments)}function ZE(){return ZE=Mt(Ot().mark((function e(t,n){var r,i,a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return DI((r=jm(t)).remoteStore)||Pm("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=jm(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=lE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),ZE.apply(this,arguments)}function $E(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function eS(e,t,n){var r=jm(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function tS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=A(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||nS(e,t)}))}function nS(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(TI(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),aS(e))}function rS(e,t,n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof AE?(e.ac.addReference(a.key,t),iS(e,a)):a instanceof CE?(Pm("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||nS(e,a.key)):Fm()}}catch(o){i.e(o)}finally{i.f()}}function iS(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Pm("SyncEngine","New document in limbo: "+n),e.oc.add(r),aS(e))}function aS(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new sy(ay.fromString(t)),r=e.fc.next();e.cc.set(r,new DE(n)),e.uc=e.uc.insert(n,r),SI(e.remoteStore,new Bw(pk(sk(n.path)),r,2,Oy.at))}}function oS(e,t,n){return uS.apply(this,arguments)}function uS(){return uS=Mt(Ot().mark((function e(t,n,r){var i,a,o,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=jm(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=C_.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=Mt(Ot().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jm(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return xy.forEach(n,(function(t){return xy.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return xy.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ty(e.t0)){e.next=10;break}throw e.t0;case 10:Pm("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=A(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function sS(e,t){return cS.apply(this,arguments)}function cS(){return cS=Mt(Ot().mark((function e(t,n){var r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=jm(t)).currentUser.isEqual(n)){e.next=11;break}return Pm("SyncEngine","User change. New user:",n.toKey()),e.next=5,P_(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Bm(Vm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,oS(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),cS.apply(this,arguments)}function lS(e,t){var n=jm(e),r=n.cc.get(t);if(r&&r.nc)return gb().add(r.key);var i=gb(),a=n.rc.get(t);if(!a)return i;var o,u=A(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function fS(e,t){return hS.apply(this,arguments)}function hS(){return hS=Mt(Ot().mark((function e(t,n){var r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jm(t),e.next=3,z_(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&rS(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),hS.apply(this,arguments)}function dS(e,t){return pS.apply(this,arguments)}function pS(){return pS=Mt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jm(t),e.abrupt("return",G_(r.localStore,n).then((function(e){return oS(r,e)})));case 2:case"end":return e.stop()}}),e)}))),pS.apply(this,arguments)}function vS(e,t,n,r){return mS.apply(this,arguments)}function mS(){return mS=Mt(Ot().mark((function e(t,n,r,i){var a,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jm(t),e.next=3,function(e,t){var n=jm(e),r=jm(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):xy.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,zI(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(eS(a,n,i||null),$E(a,n),function(e,t){jm(jm(e).mutationQueue).An(t)}(a.localStore,n)):Fm();case 11:return e.next=13,oS(a,o);case 13:e.next=16;break;case 15:Pm("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),mS.apply(this,arguments)}function yS(e,t){return gS.apply(this,arguments)}function gS(){return gS=Mt(Ot().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(TS(r=jm(t)),AS(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,kS(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,aE(r.remoteStore,!0);case 9:o=A(a);try{for(o.s();!(u=o.n()).done;)s=u.value,SI(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return tS(r,t),B_(r.localStore,t,!0)})),TI(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,kS(r,c);case 21:return function(e){var t=jm(e);t.cc.forEach((function(e,n){TI(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new qg(sy.comparator)}(r),r.dc=!1,e.next=25,aE(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),gS.apply(this,arguments)}function kS(e,t,n){return bS.apply(this,arguments)}function bS(){return bS=Mt(Ot().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=jm(t),a=[],o=[],u=A(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,V_(i.localStore,pk(f[0]));case 11:l=e.sent,h=A(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,fS(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,K_(i.localStore,c);case 36:return y=e.sent,e.next=39,V_(i.localStore,y);case 39:return l=e.sent,e.next=42,ME(i,wS(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),bS.apply(this,arguments)}function wS(e){return uk(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function xS(e){var t=jm(e);return jm(jm(t.localStore).persistence).vi()}function _S(e,t,n,r){return IS.apply(this,arguments)}function IS(){return IS=Mt(Ot().mark((function e(t,n,r,i){var a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=jm(t)).dc){e.next=3;break}return e.abrupt("return",void Pm("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,G_(a.localStore,wk(o[0]));case 10:return u=e.sent,s=wb.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,zy.EMPTY_BYTE_STRING),e.next=14,oS(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,B_(a.localStore,n,!0);case 17:return tS(a,n,i),e.abrupt("break",20);case 19:Fm();case 20:case"end":return e.stop()}}),e)}))),IS.apply(this,arguments)}function ES(e,t,n){return SS.apply(this,arguments)}function SS(){return SS=Mt(Ot().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=TS(t)).dc){e.next=45;break}a=A(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return Pm("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,K_(i.localStore,u);case 12:return s=e.sent,e.next=15,V_(i.localStore,s);case 15:return c=e.sent,e.next=18,ME(i,wS(s),c.targetId,!1,c.resumeToken);case 18:SI(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=A(r),e.prev=30,h=Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,B_(i.localStore,t,!1).then((function(){TI(i.remoteStore,t),tS(i,t)})).catch(by);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),SS.apply(this,arguments)}function TS(e){var t=jm(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=qE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=lS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GE.bind(null,t),t.sc.Wo=bE.bind(null,t.eventManager),t.sc.wc=wE.bind(null,t.eventManager),t}function AS(e){var t=jm(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=HE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=YE.bind(null,t),t}function CS(e,t,n){var r=jm(e);(function(){var e=Mt(Ot().mark((function e(t,n,r){var i,a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=jm(e),r=Fb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(TE(i)),a=new SE(i,t.localStore,n.yt),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,oS(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=jm(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Lm("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var NS=function(){function e(){d(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=pI(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return D_(this.persistence,new N_,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new k_(w_.Bs,this.yt)}},{key:"gc",value:function(e){return new oI}},{key:"terminate",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),RS=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=Mt(Ot().mark((function e(t){var r=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,AS(this.Ac.syncEngine);case 6:return e.next=8,zI(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return D_(this.persistence,new N_,e.initialUser,this.yt)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Xx(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new Py(t,this.persistence);return new Dy(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=A_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Lx.withCacheSize(this.cacheSizeBytes):Lx.DEFAULT;return new E_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,hI(),dI(),this.yt,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new oI}}]),n}(NS),DS=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=Mt(Ot().mark((function e(t){var r,i=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof aI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:vS.bind(null,r),$r:_S.bind(null,r),Br:ES.bind(null,r),vi:xS.bind(null,r),Mr:dS.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yS(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=hI();if(!aI.C(t))throw new Bm(Vm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=A_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(RS),PS=function(){function e(){d(this,e)}return y(e,[{key:"initialize",value:function(){var e=Mt(Ot().mark((function e(t,n){var r=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return KE(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=sS.bind(null,this.syncEngine),e.next=12,aE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new vE}},{key:"createDatastore",value:function(e){var t,n=pI(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new fI(t));return function(e,t,n,r){return new kI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return KE(o.syncEngine,e,0)},a=sI.C()?new sI:new uI,new wI(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new PE(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jm(t),Pm("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,II(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function OS(e,t,n){if(!n)throw new Bm(Vm.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function LS(e,t,n,r){if(!0===t&&!0===r)throw new Bm(Vm.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function MS(e){if(!sy.isDocumentKey(e))throw new Bm(Vm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function FS(e){if(sy.isDocumentKey(e))throw new Bm(Vm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function US(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Fm()}function jS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Bm(Vm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=US(e);throw new Bm(Vm.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function VS(e,t){if(t<=0)throw new Bm(Vm.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var BS=new Map,qS=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Bm(Vm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Bm(Vm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,LS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),zS=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qS({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new Bm(Vm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Bm(Vm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Km;switch(e.type){case"gapi":var t=e.client;return new Qm(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Bm(Vm.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=BS.get(e);t&&(Pm("ComponentProvider","Removing Datastore"),BS.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function KS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=jS(e,zS))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Lm("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Cm.MOCK_USER;else{o=dt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Bm(Vm.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Cm(s)}e._authCredentials=new Gm(new zm(o,u))}}var GS=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new HS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),WS=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),HS=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,sk(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new GS(this.firestore,null,new sy(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(WS);function QS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Pt(e),OS("collection","path",t),e instanceof zS){var a=ay.fromString.apply(ay,[t].concat(r));return FS(a),new HS(e,null,a)}if(!(e instanceof GS||e instanceof HS))throw new Bm(Vm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ay.fromString.apply(ay,[t].concat(r)));return FS(o),new HS(e.firestore,null,o)}function YS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Pt(e),1===arguments.length&&(t=Zm.R()),OS("doc","path",t),e instanceof zS){var a=ay.fromString.apply(ay,[t].concat(r));return MS(a),new GS(e,null,new sy(a))}if(!(e instanceof GS||e instanceof HS))throw new Bm(Vm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ay.fromString.apply(ay,[t].concat(r)));return MS(o),new GS(e.firestore,e instanceof HS?e.converter:null,new sy(o))}function XS(e,t){return e=Pt(e),t=Pt(t),(e instanceof GS||e instanceof HS)&&(t instanceof GS||t instanceof HS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function JS(e,t){return e=Pt(e),t=Pt(t),e instanceof WS&&t instanceof WS&&e.firestore===t.firestore&&yk(e._query,t._query)&&e.converter===t.converter}function ZS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Mt(Ot().mark((function r(){var i;return Ot().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var $S=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Om("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),eT=function(){function e(t,n){var r=this;d(this,e),this.Pc=t,this.yt=n,this.metadata=new qm,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=Mt(Ot().mark((function e(){var t,n,r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new IE(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=Mt(Ot().mark((function e(){var t,n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=Mt(Ot().mark((function e(){var t,n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),tT=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=Mt(Ot().mark((function e(t){var n,r=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Bm(Vm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Mt(Ot().mark((function e(t,n){var r,i,a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jm(t),i=Kb(r.yt)+"/documents",a={documents:n.map((function(e){return Vb(r.yt,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Qb(r.yt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Um(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new nb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Mt(Ot().mark((function e(){var t,n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=sy.fromPath(t);n.mutations.push(new rb(r,n.precondition(r)))})),e.next=7,function(){var e=Mt(Ot().mark((function e(t,n){var r,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jm(t),i=Kb(r.yt)+"/documents",a={writes:n.map((function(e){return Yb(r.yt,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fm();t=ry.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Bm(Vm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ry.min())?Bk.exists(!1):Bk.updateTime(t):Bk.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ry.min()))throw new Bm(Vm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bk.updateTime(t)}return Bk.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),nT=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new vI(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(Mt(Ot().mark((function t(){var n,r;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new tT(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Vy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ab(t)}return!1}}]),e}(),rT=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Cm.UNAUTHENTICATED,this.clientId=Zm.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pm("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Pm("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=Mt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Bm(Vm.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new qm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Mt(Ot().mark((function n(){var r;return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=lE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function iT(e,t){return aT.apply(this,arguments)}function aT(){return aT=Mt(Ot().mark((function e(t,n){var r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Pm("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,P_(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),aT.apply(this,arguments)}function oT(e,t){return uT.apply(this,arguments)}function uT(){return uT=Mt(Ot().mark((function e(t,n){var r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,sT(t);case 3:return r=e.sent,Pm("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return rE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return rE(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),uT.apply(this,arguments)}function sT(e){return cT.apply(this,arguments)}function cT(){return cT=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Pm("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,iT(t,new NS);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),cT.apply(this,arguments)}function lT(e){return fT.apply(this,arguments)}function fT(){return fT=Mt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Pm("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,oT(t,new PS);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),fT.apply(this,arguments)}function hT(e){return sT(e).then((function(e){return e.persistence}))}function dT(e){return sT(e).then((function(e){return e.localStore}))}function pT(e){return lT(e).then((function(e){return e.remoteStore}))}function vT(e){return lT(e).then((function(e){return e.syncEngine}))}function mT(e){return lT(e).then((function(e){return e.datastore}))}function yT(e){return gT.apply(this,arguments)}function gT(){return gT=Mt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lT(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=OE.bind(null,n.syncEngine),r.onUnlisten=UE.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),gT.apply(this,arguments)}function kT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new qm;return e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function i(){return Ot().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $S({next:function(a){t.enqueueAndForget((function(){return gE(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Bm(Vm.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Bm(Vm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new _E(sk(n.path),a,{includeMetadataChanges:!0,Nu:!0});return mE(e,o)},i.next=3,yT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function bT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new qm;return e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function i(){return Ot().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $S({next:function(n){t.enqueueAndForget((function(){return gE(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Bm(Vm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new _E(n,a,{includeMetadataChanges:!0,Nu:!0});return mE(e,o)},i.next=3,yT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var wT=function(){function e(){var t=this;d(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new vI(this,"async_queue_retry"),this.Wc=function(){var e=dI();e&&Pm("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=dI();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return y(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=dI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new qm;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=Mt(Ot().mark((function e(){var t=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ty(e.t0)){e.next=12;break}throw e.t0;case 12:Pm("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Om("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=cE.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&Fm()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=Mt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=A(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=A(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function xT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=A(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var _T=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new qm,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),IT=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new wT,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||ST(this),this._firestoreClient.terminate()}}]),n}(zS);function ET(e){return e._firestoreClient||ST(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ST(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ly(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new rT(e._authCredentials,e._appCheckCredentials,e._queue,r)}function TT(e,t,n){var r=new qm;return e.asyncQueue.enqueue(Mt(Ot().mark((function i(){var a;return Ot().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,iT(e,n);case 3:return i.next=5,oT(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Vm.FAILED_PRECONDITION||e.code===Vm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Lm("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function AT(e){return function(e){return e.asyncQueue.enqueue(Mt(Ot().mark((function t(){var n,r;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,hT(e);case 2:return n=t.sent,t.next=5,pT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=jm(e);return t._u.delete(0),xI(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(ET(e=jS(e,IT)))}function CT(e){return function(e){return e.asyncQueue.enqueue(Mt(Ot().mark((function t(){var n,r;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,hT(e);case 2:return n=t.sent,t.next=5,pT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=jm(t))._u.add(0),e.next=4,II(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(ET(e=jS(e,IT)))}function NT(e,t){var n=ET(e=jS(e,IT)),r=new _T;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new eT(e,t)}(function(e,t){if(e instanceof Uint8Array)return ZS(e,t);if(e instanceof ArrayBuffer)return ZS(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,pI(t));e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=CS,t.next=3,vT(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function RT(e,t){return function(e,t){return e.asyncQueue.enqueue(Mt(Ot().mark((function n(){return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=jm(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,dT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(ET(e=jS(e,IT)),t).then((function(t){return t?new WS(e,null,t.query):null}))}function DT(e){if(e._initialized||e._terminated)throw new Bm(Vm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var PT=function(){function e(t){d(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(zy.fromBase64String(t))}catch(t){throw new Bm(Vm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(zy.fromUint8Array(t))}}]),e}(),OT=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new uy(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var LT=y((function e(t){d(this,e),this._methodName=t})),MT=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Bm(Vm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Bm(Vm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return $m(this._lat,e._lat)||$m(this._long,e._long)}}]),e}(),FT=/^__.*__$/,UT=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Xk(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yk(e,this.data,t,this.fieldTransforms)}}]),e}(),jT=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new Xk(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function VT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fm()}}var BT=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return uA(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(VT(this.sa)&&FT.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),qT=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||pI(t)}return y(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new BT({sa:e,methodName:t,fa:n,path:uy.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function zT(e){var t=e._freezeSettings(),n=pI(e._databaseId);return new qT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function KT(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);rA("Data must be an object, but it was:",o,r);var u,s,c=tA(r,o);if(a.merge)u=new Qg(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=A(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=iA(t,d,n);if(!o.contains(p))throw new Bm(Vm.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));sA(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Qg(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new UT(new Yg(c),u,s)}var GT=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(LT);function WT(e,t,n){return new BT({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var HT=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new jk(e.path,new Rk)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(LT),QT=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=WT(this,e,!0),n=this._a.map((function(e){return eA(e,t)})),r=new Dk(n);return new jk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(LT),YT=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=WT(this,e,!0),n=this._a.map((function(e){return eA(e,t)})),r=new Ok(n);return new jk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(LT),XT=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).wa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new Mk(e.yt,Sk(e.yt,this.wa));return new jk(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(LT);function JT(e,t,n,r){var i=e.da(1,t,n);rA("Data must be an object, but it was:",i,r);var a=[],o=Yg.empty();Uy(r,(function(e,r){var u=oA(t,e,n);r=Pt(r);var s=i.ca(u);if(r instanceof GT)a.push(u);else{var c=eA(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Qg(a);return new jT(o,u,i.fieldTransforms)}function ZT(e,t,n,r,i,a){var o=e.da(1,t,n),u=[iA(t,r,n)],s=[i];if(a.length%2!=0)throw new Bm(Vm.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(iA(t,a[c])),s.push(a[c+1]);for(var l=[],f=Yg.empty(),h=u.length-1;h>=0;--h)if(!sA(l,u[h])){var d=u[h],p=s[h];p=Pt(p);var v=o.ca(d);if(p instanceof GT)l.push(d);else{var m=eA(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Qg(l);return new jT(f,y,o.fieldTransforms)}function $T(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return eA(n,e.da(r?4:3,t))}function eA(e,t){if(nA(e=Pt(e)))return rA("Unsupported field value:",t,e),tA(e,t);if(e instanceof LT)return function(e,t){if(!VT(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=A(e);try{for(a.s();!(n=a.n()).done;){var o=eA(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Pt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Sk(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ny.fromDate(e);return{timestampValue:Ob(t.yt,n)}}if(e instanceof ny){var r=new ny(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ob(t.yt,r)}}if(e instanceof MT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof PT)return{bytesValue:Lb(t.yt,e._byteString)};if(e instanceof GS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ub(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(US(e)))}(e,t)}function tA(e,t){var n={};return jy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Uy(e,(function(e,r){var i=eA(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function nA(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ny||e instanceof MT||e instanceof PT||e instanceof GS||e instanceof LT)}function rA(e,t,n){if(!nA(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=US(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function iA(e,t,n){if((t=Pt(t))instanceof OT)return t._internalPath;if("string"==typeof t)return oA(e,t);throw uA("Field path arguments must be of type string or ",e,!1,void 0,n)}var aA=new RegExp("[~\\*/\\[\\]]");function oA(e,t,n){if(t.search(aA)>=0)throw uA("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return E(OT,h(t.split(".")))._internalPath}catch(r){throw uA("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function uA(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Bm(Vm.INVALID_ARGUMENT,u+e+s)}function sA(e,t){return e.some((function(e){return e.isEqual(t)}))}var cA=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new GS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new lA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(fA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),lA=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return ca(b(n.prototype),"data",this).call(this)}}]),n}(cA);function fA(e,t){return"string"==typeof t?oA(e,t):t instanceof OT?t._internalPath:t._delegate._internalPath}function hA(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Bm(Vm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dA=y((function e(){d(this,e)})),pA=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(dA);function vA(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof dA&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof yA})).length,n=e.filter((function(e){return e instanceof mA})).length;if(t>1||t>0&&n>0)throw new Bm(Vm.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=A(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;e=s._apply(e)}}catch(c){u.e(c)}finally{u.f()}return e}var mA=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return CA(e._query,t),new WS(e.firestore,e.converter,vk(e._query,t))}},{key:"_parse",value:function(e){var t=zT(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){AA(o,a);var s,c=[],l=A(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(TA(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=TA(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||AA(o,a),u=$T(n,"where",o,"in"===a||"not-in"===a);return xg.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(pA);var yA=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:_g.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=A(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;CA(r,a),r=vk(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new WS(e.firestore,e.converter,vk(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(dA);var gA=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Vg(t,n);return function(e,t){if(null===lk(e)){var n=fk(e);null!==n&&NA(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new WS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ok(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(pA);var kA=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new WS(e.firestore,e.converter,mk(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(pA);var bA=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=SA(e,this.type,this._docOrFields,this._inclusive);return new WS(e.firestore,e.converter,function(e,t){return new ok(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(pA);function wA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bA._create("startAt",t,!0)}function xA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bA._create("startAfter",t,!1)}var _A=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=SA(e,this.type,this._docOrFields,this._inclusive);return new WS(e.firestore,e.converter,function(e,t){return new ok(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(pA);function IA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _A._create("endBefore",t,!1)}function EA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _A._create("endAt",t,!0)}function SA(e,t,n,r){if(n[0]=Pt(n[0]),n[0]instanceof cA)return function(e,t,n,r,i){if(!r)throw new Bm(Vm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=A(dk(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(og(t,r.key));else{var c=r.data.field(s.field);if(Qy(c))throw new Bm(Vm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new gg(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=zT(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Bm(Vm.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!hk(e)&&-1!==c.indexOf("/"))throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ay.fromString(c));if(!sy.isDocumentKey(l))throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new sy(l);u.push(og(t,f))}else{var h=$T(n,r,c);u.push(h)}}return new gg(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function TA(e,t,n){if("string"==typeof(n=Pt(n))){if(""===n)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hk(t)&&-1!==n.indexOf("/"))throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ay.fromString(n));if(!sy.isDocumentKey(r))throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return og(e,new sy(r))}if(n instanceof GS)return og(e,n._key);throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(US(n),"."))}function AA(e,t){if(!Array.isArray(e)||0===e.length)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function CA(e,t){if(t.isInequality()){var n=fk(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=lk(e);null!==i&&NA(e,r,i)}var a=function(e,t){var n,r=A(e);try{for(r.s();!(n=r.n()).done;){var i,a=A(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Bm(Vm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Bm(Vm.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function NA(e,t,n){if(!n.isEqual(t))throw new Bm(Vm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var RA=function(){function e(){d(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($y(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fm()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Uy(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new MT(Wy(e.latitude),Wy(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Yy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Xy(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Gy(e);return new ny(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ay.fromString(e);Um(sw(n));var r=new My(n.get(1),n.get(3)),i=new sy(n.popFirst(5));return r.isEqual(t)||Om("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function DA(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var PA=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new PT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new GS(this.firestore,null,t)}}]),n}(RA),OA=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),LA=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return ca(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new MA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(fA("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(cA),MA=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ca(b(n.prototype),"data",this).call(this,e)}}]),n}(LA),FA=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new OA(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new MA(n._firestore,n._userDataWriter,r.key,r,new OA(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Bm(Vm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new MA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new OA(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new MA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new OA(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:UA(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function UA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fm()}}function jA(e,t){return e instanceof LA&&t instanceof LA?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof FA&&t instanceof FA&&e._firestore===t._firestore&&JS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var VA=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new PT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new GS(this.firestore,null,t)}}]),n}(RA);function BA(e){e=jS(e,GS);var t=jS(e.firestore,IT),n=ET(t),r=new VA(t);return function(e,t){var n=new qm;return e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function r(){return Ot().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Mt(Ot().mark((function e(t,n,r){var i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=jm(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Bm(Vm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=lE(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,dT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new LA(t,r,e._key,n,new OA(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function qA(e){e=jS(e,WS);var t=jS(e.firestore,IT),n=ET(t),r=new VA(t);return function(e,t){var n=new qm;return e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function r(){return Ot().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Mt(Ot().mark((function e(t,n,r){var i,a,o,u,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z_(t,n,!0);case 3:i=e.sent,a=new NE(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=lE(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,dT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new FA(t,r,e,n)}))}function zA(e,t,n){e=jS(e,GS);var r=jS(e.firestore,IT),i=DA(e.converter,t,n);return HA(r,[KT(zT(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Bk.none())])}function KA(e,t,n){e=jS(e,GS);for(var r=jS(e.firestore,IT),i=zT(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return HA(r,[("string"==typeof(t=Pt(t))||t instanceof OT?ZT(i,"updateDoc",e._key,t,n,o):JT(i,"updateDoc",e._key,t)).toMutation(e._key,Bk.exists(!0))])}function GA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Pt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||xT(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(xT(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof GS)l=jS(e.firestore,IT),f=sk(e._key.path),c={next:function(t){n[s]&&n[s](QA(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=jS(e,WS);l=jS(p.firestore,IT),f=p._query;var v=new VA(l);c={next:function(e){n[s]&&n[s](new FA(l,v,p,e))},error:n[s+1],complete:n[s+2]},hA(e._query)}return function(e,t,n,r){var i=new $S(r),a=new _E(t,i,n);return e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=mE,t.next=3,yT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gE,t.next=3,yT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ET(l),f,h,c)}function WA(e,t){return function(e,t){var n=new $S(t);return e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){jm(e).Ru.add(t),t.next()},t.next=3,yT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){jm(e).Ru.delete(t)},t.next=3,yT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ET(e=jS(e,IT)),xT(t)?t:{next:t})}function HA(e,t){return function(e,t){var n=new qm;return e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function r(){return Ot().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=VE,r.next=3,vT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ET(e),t)}function QA(e,t,n){var r=n.docs.get(t._key),i=new VA(e);return new LA(e,i,t._key,r,new OA(n.hasPendingWrites,n.fromCache),t.converter)}var YA={maxAttempts:5},XA=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zT(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=JA(e,this._firestore),i=DA(r.converter,t,n),a=KT(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Bk.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=JA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Pt(t))||t instanceof OT?ZT(this._dataReader,"WriteBatch.update",i._key,t,n,o):JT(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Bk.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=JA(e,this._firestore);return this._mutations=this._mutations.concat(new nb(t._key,Bk.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Bm(Vm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function JA(e,t){if((e=Pt(e)).firestore!==t)throw new Bm(Vm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ZA=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=JA(e,this._firestore),i=new VA(this._firestore);return ca(b(n.prototype),"get",this).call(this,e).then((function(e){return new LA(t._firestore,i,r._key,e._document,new OA(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=zT(t)}return y(e,[{key:"get",value:function(e){var t=this,n=JA(e,this._firestore),r=new PA(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Fm();var i=e[0];if(i.isFoundDocument())return new cA(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new cA(t._firestore,r,n._key,null,n.converter);throw Fm()}))}},{key:"set",value:function(e,t,n){var r=JA(e,this._firestore),i=DA(r.converter,t,n),a=KT(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=JA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Pt(t))||t instanceof OT?ZT(this._dataReader,"Transaction.update",i._key,t,n,o):JT(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=JA(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function $A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new QT("arrayUnion",t)}function eC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new YT("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Nm=e}(Rn),In(new Ft("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new IT(new Wm(e.getProvider("auth-internal")),new Xm(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Bm(Vm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new My(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Fn(Am,"3.8.3",e),Fn(Am,"3.8.3","esm2017")}();function tC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Bm("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function nC(){if("undefined"===typeof Uint8Array)throw new Bm("unimplemented","Uint8Arrays are not available in this environment.")}function rC(){if("undefined"==typeof atob)throw new Bm("unimplemented","Blobs are unavailable in Firestore in this environment.")}var iC=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return rC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return nC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return rC(),new e(PT.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return nC(),new e(PT.fromUint8Array(t))}}]),e}();function aC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=A(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var oC=function(){function e(){d(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){DT(e=jS(e,IT));var n=ET(e),r=e._freezeSettings(),i=new PS;return TT(n,i,new RS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){DT(e=jS(e,IT));var t=ET(e),n=e._freezeSettings(),r=new PS;return TT(t,r,new DS(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Bm(Vm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new qm;return e._queue.enqueueAndForgetEvenWhileRestricted(Mt(Ot().mark((function n(){return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Mt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Iy.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Iy.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(A_(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),uC=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof My||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Lm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};KS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return AT(this._delegate)}},{key:"disableNetwork",value:function(){return CT(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&LS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new qm;return e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function n(){return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=JE,n.next=3,vT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(ET(e=jS(e,IT)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return WA(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Bm("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new wC(this,QS(this._delegate,e))}catch(t){throw dC(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new hC(this,YS(this._delegate,e))}catch(t){throw dC(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new gC(this,function(e,t){if(e=jS(e,zS),OS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Bm(Vm.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new WS(e,null,function(e){return new ok(ay.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw dC(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=jS(e,IT);var r=Object.assign(Object.assign({},YA),n);return function(e){if(e.maxAttempts<1)throw new Bm(Vm.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new qm;return e.asyncQueue.enqueueAndForget(Mt(Ot().mark((function i(){var a;return Ot().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,mT(e);case 2:a=i.sent,new nT(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(ET(e),(function(n){return t(new ZA(e,n))}),r)}(this._delegate,(function(n){return e(new cC(t,n))}))}},{key:"batch",value:function(){var e=this;return ET(this._delegate),new lC(new XA(this._delegate,(function(t){return HA(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return NT(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return RT(this._delegate,e).then((function(e){return e?new gC(t,e):null}))}}]),e}(),sC=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new iC(new PT(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return hC.forKey(t,this.firestore,null)}}]),n}(RA);var cC=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new sC(t)}return y(e,[{key:"get",value:function(e){var t=this,n=xC(e);return this._delegate.get(n).then((function(e){return new mC(t._firestore,new LA(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=xC(e);return n?(tC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=xC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=xC(e);return this._delegate.delete(t),this}}]),e}(),lC=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=xC(e);return n?(tC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=xC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=xC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),fC=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new MA(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yC(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new sC(t),n),i.set(n,a)),a}}]),e}();fC.INSTANCES=new WeakMap;var hC=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sC(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new wC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new wC(this.firestore,QS(this._delegate,e))}catch(t){throw dC(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Pt(e))instanceof GS&&XS(this._delegate,e)}},{key:"set",value:function(e,t){t=tC("DocumentReference.set",t);try{return t?zA(this._delegate,e,t):zA(this._delegate,e)}catch(n){throw dC(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?KA(this._delegate,e):KA.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw dC(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return HA(jS(e.firestore,IT),[new nb(e._key,Bk.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pC(n),a=vC(n,(function(t){return new mC(e.firestore,new LA(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return GA(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?BA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=jS(e,GS);var t=jS(e.firestore,IT);return kT(ET(t),e._key,{source:"server"}).then((function(n){return QA(t,e,n)}))}(this._delegate):function(e){e=jS(e,GS);var t=jS(e.firestore,IT);return kT(ET(t),e._key).then((function(n){return QA(t,e,n)}))}(this._delegate),t.then((function(e){return new mC(n.firestore,new LA(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Bm("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new GS(n._delegate,r,new sy(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new GS(n._delegate,r,t))}}]),e}();function dC(e,t,n){return e.message=e.message.replace(t,n),e}function pC(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!aC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function vC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=aC(e[0])?e[0]:aC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mC=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new hC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return jA(this._delegate,e._delegate)}}]),e}(),yC=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Fm()}(void 0!==t),t}}]),n}(mC),gC=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sC(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,vA(this._delegate,function(e,t,n){var r=t,i=fA("where",e);return mA._create(i,r,n)}(t,n,r)))}catch(i){throw dC(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,vA(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=fA("orderBy",e);return gA._create(r,n)}(t,n)))}catch(r){throw dC(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,vA(this._delegate,function(e){return VS("limit",e),kA._create("limit",e,"F")}(t)))}catch(n){throw dC(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,vA(this._delegate,function(e){return VS("limitToLast",e),kA._create("limitToLast",e,"L")}(t)))}catch(n){throw dC(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,vA(this._delegate,wA.apply(void 0,arguments)))}catch(t){throw dC(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,vA(this._delegate,xA.apply(void 0,arguments)))}catch(t){throw dC(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,vA(this._delegate,IA.apply(void 0,arguments)))}catch(t){throw dC(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,vA(this._delegate,EA.apply(void 0,arguments)))}catch(t){throw dC(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return JS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?qA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=jS(e,WS);var t=jS(e.firestore,IT),n=ET(t),r=new VA(t);return bT(n,e._query,{source:"server"}).then((function(n){return new FA(t,r,e,n)}))}(this._delegate):function(e){e=jS(e,WS);var t=jS(e.firestore,IT),n=ET(t),r=new VA(t);return hA(e._query),bT(n,e._query).then((function(n){return new FA(t,r,e,n)}))}(this._delegate),t.then((function(e){return new bC(n.firestore,new FA(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pC(n),a=vC(n,(function(t){return new bC(e.firestore,new FA(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return GA(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),kC=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new yC(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),bC=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new gC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new yC(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new kC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new yC(n._firestore,r))}))}},{key:"isEqual",value:function(e){return jA(this._delegate,e._delegate)}}]),e}(),wC=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new hC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new hC(this.firestore,void 0===e?YS(this._delegate):YS(this._delegate,e))}catch(t){throw dC(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=jS(e.firestore,IT),r=YS(e),i=DA(e.converter,t);return HA(n,[KT(zT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Bk.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new hC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return XS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(fC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(gC);function xC(e){return jS(e,GS)}var _C=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=E(OT,n)}return y(e,[{key:"isEqual",value:function(e){return(e=Pt(e))instanceof OT&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(uy.keyField().canonicalString())}}]),e}(),IC=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new HT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new GT("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=$A.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=eC.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new XT("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),EC={Firestore:uC,GeoPoint:MT,Timestamp:ny,Blob:iC,Transaction:cC,WriteBatch:lC,DocumentReference:hC,DocumentSnapshot:mC,Query:gC,QueryDocumentSnapshot:yC,QuerySnapshot:bC,CollectionReference:wC,FieldPath:_C,FieldValue:IC,setLogLevel:function(e){!function(e){Rm.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ft("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},EC)))}(e,(function(e,t){return new uC(e,t,new oC)})),e.registerVersion("@firebase/firestore-compat","0.3.3")}(ur);var SC=function(e){var t=xe(),n=(0,r.useContext)(nt).setUser;return(0,He.jsxs)("div",{className:"otherSignin",children:[(0,He.jsxs)("button",{onClick:function(){var e=new ur.auth.GoogleAuthProvider;ur.auth().signInWithPopup(e).then((function(e){n(e.user),window.popup("Login Success"),t("/Kivlic-career-Assignment")})).catch((function(e){console.log(e)}))},children:[" ",(0,He.jsx)("span",{className:"icon googleIcon"}),"Continue With Google"]}),e.email?(0,He.jsxs)("button",{onClick:function(){t("/Kivlic-career-Assignment/emaillogin")},children:[" ",(0,He.jsx)("span",{className:"icon emailIcon"}),"Continue With Email"]}):(0,He.jsxs)("button",{onClick:function(){t("/Kivlic-career-Assignment/phonelogin")},children:[" ",(0,He.jsx)("span",{className:"icon phoneIcon"}),"Continue With Phone"]}),"        "]})};var TC=function(){var e=xe(),t=l((0,r.useState)("Use 6 or more characters"),2),n=t[0],i=t[1],a=l((0,r.useState)("You can use letters, numbers and full stops"),2),o=a[0],u=a[1],s=l(et({username:"",email:"",password:"",confirmPassword:""}),2),c=s[0],f=s[1],h=(0,r.useContext)(tt).Firebase;return(0,He.jsxs)("div",{className:"login",children:[(0,He.jsxs)("form",{className:"loginBox",onSubmit:function(t){t.preventDefault(),c.password!==c.confirmPassword?(i("Passwords didn't match."),document.querySelector(".passwordHint").classList.add("error")):(document.querySelector(".passwordHint").classList.remove("error"),i("Use 6 or more characters"),u("You can use letters, numbers and full stops"),document.querySelector(".emailHint").classList.remove("error"),ur.auth().createUserWithEmailAndPassword(c.email,c.password).then((function(t){t.user.updateProfile({displayName:c.username}).then((function(){h.firestore().collection("users").doc(t.user.uid).set({id:t.user.uid,username:c.username,email:c.email}).then((function(){console.log("data stored"),ur.auth().signInWithEmailAndPassword(c.email,c.password).then((function(){console.log("signed success"),window.popup("Signin Success"),e("/Kivlic-career-Assignment")}))})),console.log("displayName ready")})),console.log("username ready")})).catch((function(e){"auth/email-already-in-use"===e.code&&u("The email address is already in use"),document.querySelector(".emailHint").classList.add("error"),console.error(e)})))},children:[(0,He.jsx)("h1",{children:"SIGN UP"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("input",{type:"text",name:"username",value:c.username,onChange:f,required:!0}),(0,He.jsx)("p",{children:"User Name"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("input",{type:"email",name:"email",value:c.email,onChange:f,required:!0}),(0,He.jsx)("p",{children:"Enter email"}),(0,He.jsx)("span",{className:"emailHint",children:o})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("input",{type:"password",minLength:"6",name:"password",value:c.password,onChange:f,required:!0}),(0,He.jsx)("p",{children:"Password"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("input",{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:f,required:!0}),(0,He.jsx)("p",{children:"Confirm Password"}),(0,He.jsx)("span",{className:"passwordHint",children:n})]}),(0,He.jsxs)("div",{className:"button",children:[(0,He.jsx)("h6",{children:(0,He.jsx)(ze,{to:"/Kivlic-career-Assignment/emaillogin",children:"Sign in instead"})}),(0,He.jsx)("button",{children:"Signup"})]})]}),(0,He.jsx)(SC,{})]})};var AC=function(){return(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(oa,{currentNav:"Login"}),(0,He.jsx)(TC,{})]})};var CC=function(){return(0,He.jsx)("div",{})};var NC=function(){return(0,He.jsxs)("div",{children:[(0,He.jsx)(oa,{currentNav:"AboutUs"}),(0,He.jsx)(CC,{}),(0,He.jsx)(Xe,{})]})};var RC=function(){return(0,He.jsx)("div",{})};var DC=function(){return(0,He.jsxs)("div",{children:[(0,He.jsx)(oa,{currentNav:"Services"}),(0,He.jsx)(RC,{}),(0,He.jsx)(Xe,{})]})};var PC=function(){return(0,He.jsx)("div",{})};var OC=function(){return(0,He.jsxs)("div",{children:[(0,He.jsx)(oa,{currentNav:"Pricing"}),(0,He.jsx)(PC,{}),(0,He.jsx)(Xe,{})]})};var LC=function(){var e=(0,r.useContext)(tt).Firebase,t=l((0,r.useState)(""),2),n=t[0],i=t[1],a=l((0,r.useState)(""),2),o=a[0],u=a[1],s=l((0,r.useState)(!1),2),c=s[0],f=s[1],h=(0,r.useContext)(nt).user,d=xe(),p=l(et({displayName:"",email:"",phoneNumber:""}),2),v=p[0],m=p[1],y=function(e){e.preventDefault(),i(e.target.name),f(!0)};if(h)return(0,He.jsxs)("div",{className:"account",children:[h&&(0,He.jsxs)("div",{className:"info",children:[(0,He.jsx)("div",{className:"img",children:(0,He.jsx)("img",{src:h.photoURL||"https://i.pinimg.com/originals/ff/a0/9a/ffa09aec412db3f54deadf1b3781de2a.png",name:"profile",onClick:y,alt:"loading"})}),(0,He.jsxs)("div",{className:"details",children:[(0,He.jsx)("h1",{children:h.displayName}),h.email&&(0,He.jsxs)("h3",{children:[h.email,(0,He.jsx)("i",{className:h.emailVerified?"bx bxs-check-circle":"bx bxs-x-circle",style:h.emailVerified?{color:"green"}:{color:"red"},title:"Email not verified"})]}),(0,He.jsx)("h3",{children:h.phoneNumber})]})]}),c&&(0,He.jsxs)("form",{className:"update",onSubmit:function(t){t.preventDefault(),o&&e.storage().ref("profiles/"+h.uid+"/picture/"+o.name).put(o).then((function(e){e.ref.getDownloadURL().then((function(e){console.log(e),h.updateProfile({photoURL:e}),window.popup("profile picture updated")}))})),console.log(h.uid),v.displayName&&e.firestore().collection("users").doc(h.uid).update({username:v.displayName}).then((function(){console.log("username changed"),h.updateProfile({displayName:v.username})})),console.log(h.uid),o&&h.updateProfile({photoURL:""}),console.log(h.displayName,h),u(""),i(""),f(!1),m()},children:[(0,He.jsx)("i",{className:"bx bx-x",onClick:function(){f(!1),i("")}}),"displayName"===n&&(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{children:"Update username"}),(0,He.jsx)("input",{type:"text",name:"displayName",id:"displayName",value:v.displayName,onChange:m})]}),"email"===n&&(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{children:"Update Email Address"}),(0,He.jsx)("input",{type:"email",name:"email",id:"email",value:v.email,onChange:m})]}),"phoneNumber"===n&&(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{children:"Update Phone Number"}),(0,He.jsx)("input",{type:"text",name:"phoneNumber",id:"phoneNumber",value:v.phoneNumber,onChange:m})]}),"profile"===n&&(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{children:"Update Profile picture"}),(0,He.jsx)("input",{type:"file",id:"profile",name:"profile",accept:"image/png ,image/jpeg ,image/jpg, image/webp",onChange:function(e){if(m(e),console.log(e.target.files),e.target.files[0]){var t=e.target.files[0].type;u("image/png"===t||"image/jpg"===t||"image/webp"===t||"image/jpeg"===t?e.target.files[0]:"")}else u("")}}),(0,He.jsx)("label",{htmlFor:"profile",children:o?(0,He.jsx)("img",{height:"100%",width:"100%",src:o&&URL.createObjectURL(o),alt:"posts"}):(0,He.jsxs)(He.Fragment,{children:["Click to Upload picture ",(0,He.jsx)("span",{})," ",(0,He.jsx)("button",{children:"Browse File"})]})})]}),(0,He.jsx)("button",{children:"Save & Update"})]}),(0,He.jsx)("div",{className:"userDetails",children:(0,He.jsxs)("ul",{children:[(0,He.jsxs)("li",{children:[(0,He.jsx)("h4",{children:"Username"}),(0,He.jsxs)("span",{children:[h.displayName,(0,He.jsxs)("button",{name:"displayName",onClick:y,children:[(0,He.jsx)("i",{className:"bx bxs-edit"})," Update"]})]})]}),(0,He.jsxs)("li",{children:[(0,He.jsx)("h4",{children:"Email Address"}),(0,He.jsx)("span",{children:h.email||(0,He.jsxs)("button",{name:"email",onClick:y,children:[(0,He.jsx)("i",{className:"bx bxs-edit"})," Update"]})})]}),(0,He.jsxs)("li",{children:[(0,He.jsx)("h4",{children:"Phone Number"}),(0,He.jsx)("span",{children:h.phoneNumber||(0,He.jsxs)("button",{name:"phoneNumber",onClick:y,children:[(0,He.jsx)("i",{className:"bx bxs-edit"})," Update"]})})]}),h.email&&(0,He.jsxs)("li",{children:[(0,He.jsx)("h4",{children:"Email Verified"}),(0,He.jsx)("span",{children:h.emailVerified?"Yes":(0,He.jsx)("button",{onClick:function(){h.sendEmailVerification().then((function(){return window.popup("varification email sent to your email ,Check your email")}))},children:"Verify"})})]})]})}),(0,He.jsx)("div",{className:"btn",children:(0,He.jsx)("button",{onClick:function(){ur.auth().signOut().then((function(){d("/Kivlic-career-Assignment/"),console.log("SignOut"),window.popup("Signed Out Success")}))},children:"Logout"})})]})};var MC=function(){return(0,He.jsxs)("div",{children:[(0,He.jsx)(oa,{currentNav:"Account"}),(0,He.jsx)(LC,{}),(0,He.jsx)(Xe,{})]})};function FC(e){var t=function(){document.body.removeChild(n),clearTimeout(i)},n=document.createElement("div");n.innerHTML=e,n.classList.add("popup"),document.body.appendChild(n);var r=document.createElement("i");n.appendChild(r),r.classList.add("close","bx","bx-x"),r.onclick=t,console.log("shown popup");var i=setTimeout(t,3e3);return{close:t}}var UC=function(){return(0,He.jsx)("div",{})};var jC=function(){return(0,He.jsxs)("div",{children:[(0,He.jsx)(oa,{currentNav:"Contact"}),(0,He.jsx)(UC,{}),(0,He.jsx)(Xe,{})]})};var VC=function(){var e=xe(),t=l((0,r.useState)(""),2),n=t[0],i=t[1],a=l((0,r.useState)(!1),2),o=a[0],u=a[1],s=l((0,r.useState)("Send Code"),2),c=s[0],f=s[1],h=(0,r.useContext)(tt).Firebase,d=l(et({phoneNumber:"",Otp:""}),2),p=d[0],v=d[1];return(0,He.jsxs)("div",{className:"login",children:[(0,He.jsxs)("form",{className:"loginBox",onSubmit:function(t){console.log("loging"),t.preventDefault(),window.confirmationResult.confirm(p.Otp).then((function(t){console.log(t),h.firestore().collection("users").doc(t.user.uid).update({id:t.user.uid,phoneNumber:t.user.phoneNumber}),e("/Kivlic-career-Assignment"),console.log("Signed Success"),window.popup("Signed In")})).catch((function(e){"auth/invalid-verification-code"===e.code&&i("Invalid Code, Try again"),console.log(e.code)}))},children:[(0,He.jsx)("h1",{children:"PHONE LOGIN"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("input",{type:"text",name:"phoneNumber",required:!0,onChange:v,value:p.phoneNumber}),(0,He.jsx)("p",{children:"Enter Phone Number"})]}),o&&(0,He.jsxs)("div",{id:"otpContainer",children:[(0,He.jsx)("input",{type:"text",name:"Otp",minLength:6,maxLength:6,required:!0,onChange:v,value:p.Otp}),(0,He.jsx)("p",{children:"Enter OTP"})]}),(0,He.jsx)("span",{className:"error",children:n}),(0,He.jsx)("span",{id:"captcha"}),(0,He.jsxs)("div",{className:"button",children:[(0,He.jsx)("button",{type:"button",id:"sendCode",onClick:function(){p.phoneNumber?(i(""),window.recaptchaVerifier||(window.recaptchaVerifier=new ur.auth.RecaptchaVerifier("captcha",{size:"invisible",callback:function(e){console.log(window.recaptchaVerifier),console.log("verified")}})),console.log("verifying"),ur.auth().signInWithPhoneNumber(p.phoneNumber,window.recaptchaVerifier).then((function(e){console.log("Code sent"),u(!0),f("Resend Code"),window.popup("Code sent"),window.confirmationResult=e})).catch((function(e){"auth/too-many-requests"===e.code?i("Too many requests, Try after some time"):"auth/invalid-phone-number"===e.code&&i("Invalid phone Number"),console.log(e),console.log(e.code)}))):i("Enter Phone Number")},children:c}),o&&(0,He.jsx)("button",{children:"Login"})]})]}),(0,He.jsx)(SC,{email:!0})]})};var BC=function(){return(0,He.jsxs)("div",{children:[(0,He.jsx)(oa,{currentNav:"Login"}),(0,He.jsx)(VC,{})]})};var qC=function(){var e=xe(),t=l((0,r.useState)(""),2),n=t[0],i=t[1],a=l(et({email:"",password:""}),2),o=a[0],u=a[1];return(0,He.jsxs)("div",{className:"login",children:[(0,He.jsxs)("form",{className:"loginBox",onSubmit:function(t){t.preventDefault(),i(""),ur.auth().signInWithEmailAndPassword(o.email,o.password).then((function(){e("/Kivlic-career-Assignment"),console.log("Signed Success"),window.popup("Signed In")})).catch((function(e){console.log(e.code),"auth/wrong-password"===e.code?i("Wrong password,Try again"):"auth/too-many-requests"===e.code?i("Too many requests, Try after some time"):"auth/user-not-found"===e.code&&i("This email is not Registered")}))},children:[(0,He.jsx)("h1",{children:"EMAIL LOGIN"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("input",{type:"email",name:"email",required:!0,onChange:u,value:o.email}),(0,He.jsx)("p",{children:"Enter email"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("input",{type:"password",name:"password",required:!0,onChange:u,value:o.password}),(0,He.jsx)("p",{children:"Password"})]}),(0,He.jsxs)("div",{className:"forgetPassword",children:[(0,He.jsx)("span",{className:"error",children:n}),(0,He.jsx)("span",{onClick:function(){i(""),o.email?ur.auth().sendPasswordResetEmail(o.email).then((function(){alert("Password Reset Link Sent to your Registered email"),window.popup("Password Reset Link Sent to your Registered email")})).catch((function(e){console.log(e),"auth/invalid-email"===e.code?i("Wrong email address"):"auth/user-not-found"===e.code&&i("This email is not registered")})):i("Enter email and continue")},children:"Forget Password?"})]}),(0,He.jsxs)("div",{className:"button",children:[(0,He.jsx)("h6",{children:(0,He.jsx)(ze,{to:"/Kivlic-career-Assignment/signup",children:"Create account"})}),(0,He.jsx)("button",{id:"loginBtn",children:"Login"})]})]}),(0,He.jsx)(SC,{})]})};var zC=function(){return(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(oa,{currentNav:"Login"}),(0,He.jsx)(qC,{})]})};var KC=function(){window.popup=FC;var e=(0,r.useContext)(nt).setUser;return(0,r.useEffect)((function(){ur.auth().onAuthStateChanged((function(t){e(t),console.log(t)}))})),(0,He.jsx)("div",{className:"App",children:(0,He.jsx)(Be,{children:(0,He.jsxs)(Le,{children:[(0,He.jsx)(Pe,{exact:!0,path:"Kivlic-career-Assignment/",element:(0,He.jsx)(ua,{})}),(0,He.jsx)(Pe,{path:"/Kivlic-career-Assignment/emaillogin",element:(0,He.jsx)(zC,{})}),(0,He.jsx)(Pe,{path:"/Kivlic-career-Assignment/phonelogin",element:(0,He.jsx)(BC,{})}),(0,He.jsx)(Pe,{path:"/Kivlic-career-Assignment/signup",element:(0,He.jsx)(AC,{})}),(0,He.jsx)(Pe,{path:"/Kivlic-career-Assignment/about",element:(0,He.jsx)(NC,{})}),(0,He.jsx)(Pe,{path:"/Kivlic-career-Assignment/services",element:(0,He.jsx)(DC,{})}),(0,He.jsx)(Pe,{path:"/Kivlic-career-Assignment/pricing",element:(0,He.jsx)(OC,{})}),(0,He.jsx)(Pe,{path:"/Kivlic-career-Assignment/contact",element:(0,He.jsx)(jC,{})}),(0,He.jsx)(Pe,{path:"/Kivlic-career-Assignment/account",element:(0,He.jsx)(MC,{})})]})})})},GC=ur.initializeApp({apiKey:"AIzaSyCInC7n13UbBQB1OeH15j14PmiE8BH4Qt0",authDomain:"kivlic-assignment.firebaseapp.com",projectId:"kivlic-assignment",storageBucket:"kivlic-assignment.appspot.com",messagingSenderId:"1024667055241",appId:"1:1024667055241:web:e834c689a74548e61f0258",measurementId:"G-5MZBXZ7DQP"});a.createRoot(document.getElementById("root")).render((0,He.jsx)(tt.Provider,{value:{Firebase:GC},children:(0,He.jsx)(rt,{children:(0,He.jsx)(r.StrictMode,{children:(0,He.jsx)(KC,{})})})}))}()}();
//# sourceMappingURL=main.9c252852.js.map